##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.31A/W32 EVALUATION    07/Jan/2016  21:50:28 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\EKF\Matrix.c                                #
#    Command line    =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\EKF\Matrix.c -lC                            #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\ -o H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6- #
#                       27ËøÎ²\Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»® #
#                       +LQR_2014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Deb #
#                       ug\Obj\ -z9 --debug --cpu_mode thumb --endian        #
#                       little --cpu ARM7TDMI --stack_align 4 --interwork    #
#                       -e --fpu None --ec++ --dlib_config                   #
#                       D:\IAREWE431\ARM\LIB\dl4tptinl8n.h -I                #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\srcIAR\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\src\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\ -I       #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\kalman\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pcm\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\spi\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\timer\ #
#                        -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27 #
#                       ËøÎ²\Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+L #
#                       QR_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pid\  #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\avcs\  #
#                       -I D:\IAREWE431\ARM\INC\                             #
#    List file       =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\Matrix.lst                                         #
#    Object file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Obj #
#                       \Matrix.r79                                          #
#                                                                            #
#                                                                            #
##############################################################################

H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ²\Ğ¡Ö±Éı»ú´úÂë²âÊÔ1-6\Ğ¡Ö±Éı»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2014_7_31\EKF\Matrix.c
      1          /****************************************************************
      2           *ÎÄ ¼ş Ãû: Matrix.c
      3           *Ãè    Êö:
      4           *          ¾ØÕóÏà¼Ó¼õ¡¢Ïà³Ë¡¢×ªÖÃ¡¢ÇóÄæµÄÊµÏÖ
      5           *
      6           *×÷    Õß£ºÉêÎÄ±ó
      7           *µ±Ç°°æ±¾: 1.0
      8           *Íê³ÉÈÕÆÚ: 2011-3-22
      9           *
     10           *È¡´ú°æ±¾£º
     11           *Ô­ ×÷ Õß£º
     12           *Íê³ÉÈÕÆÚ£º
     13           *
     14           *°æÈ¨ËùÓĞ£º
     15           ****************************************************************/
     16          #include <includs.h>
     17          #include "Matrix.h"
     18          
     19          // ÉùÃ÷³ö´íĞÅÏ¢ 

   \                                 In segment DATA_I, align 4, align-sorted
     20          char* errmsg[] =
   \                     errmsg:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for errmsg>`
     21          {
     22              "No error.",
     23              "Memeroy is not enough.",
     24              "Matrix can't be inversed."
     25          };
     26          
     27          /****************************************************************
     28           *º¯ Êı Ãû: AddMatrix()
     29           *²Î    Êı:
     30           *         const void * mIna: ÊäÈë¾ØÕó
     31           *         const void * mInb: ÊäÈë¾ØÕó
     32           *               void *mRslt: Êä³ö¾ØÕó
     33           *               size    row: ÊäÈë¾ØÕóĞĞÊı
     34           *               size    col: ÊäÈë¾ØÕóÁĞÊı
     35           *
     36           *¹¦    ÄÜ£º¼ÆËã¾ØÕómIna¼ÓÉÏmInb£¬½á¹û´æÈë¾ØÕómRsltÖĞ
     37           *
     38           *·µ »Ø Öµ:
     39           *          ³É¹¦: OK
     40           *          ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ£ºERR_MEM_NONE
     41           *
     42           *×÷    Õß£ºÉêÎÄ±ó
     43           *Íê³ÉÈÕÆÚ£º2011-3-22
     44           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
     45          int AddMatrix(const void * mIna, const void * mInb, void * mRslt, size row, size col)
     46          {
   \                     ??AddMatrix:
   \   00000000   FFB5               PUSH        {R0-R7,LR}
   \   00000002   099E               LDR         R6,[SP, #+36]
   \   00000004   0024               MOV         R4,#+0
   \   00000006   12E0               B           ??AddMatrix_1
     47              double *pmIna = (double *)mIna;
     48              double *pmInb = (double *)mInb;
     49              double *pmRslt = (double *)mRslt;
     50              int     i, j;        // Ñ­»·±äÁ¿
     51          
     52          #ifdef __DEBUG__
     53              if ( (pmIna == NULL) || (pmInb == NULL) || (pmRslt == NULL) )
     54              {
     55                  return ERR_MEM_NONE;        // ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ
     56              }
     57          #endif
     58          
     59              for (i=0; i<row; i++)
     60              {
     61                  for (j=0; j<col; j++)
     62                  {
     63                      pmRslt[i*col+j] = pmIna[i*col+j] + pmInb[i*col+j];
   \                     ??AddMatrix_2:
   \   00000008   201C               MOV         R0,R4
   \   0000000A   7043               MUL         R0,R6
   \   0000000C   4019               ADD         R0,R0,R5
   \   0000000E   C000               LSL         R0,R0,#+3
   \   00000010   0299               LDR         R1,[SP, #+8]
   \   00000012   0F18               ADD         R7,R1,R0
   \   00000014   0099               LDR         R1,[SP, #+0]
   \   00000016   0918               ADD         R1,R1,R0
   \   00000018   0CC9               LDMIA       R1!,{R2,R3}
   \   0000001A   0199               LDR         R1,[SP, #+4]
   \   0000001C   0818               ADD         R0,R1,R0
   \   0000001E   03C8               LDMIA       R0!,{R0,R1}
   \   00000020   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000024   03C7               STMIA       R7!,{R0,R1}
     64                  }//for
   \   00000026   6D1C               ADD         R5,R5,#+1
   \                     ??AddMatrix_3:
   \   00000028   B542               CMP         R5,R6
   \   0000002A   EDDB               BLT         ??AddMatrix_2
   \   0000002C   641C               ADD         R4,R4,#+1
   \                     ??AddMatrix_1:
   \   0000002E   0398               LDR         R0,[SP, #+12]
   \   00000030   8442               CMP         R4,R0
   \   00000032   01DA               BGE         ??AddMatrix_4
   \   00000034   0025               MOV         R5,#+0
   \   00000036   F7E7               B           ??AddMatrix_3
     65              }//for
     66          
     67              return OK;
   \                     ??AddMatrix_4:
   \   00000038   0020               MOV         R0,#+0
   \   0000003A   04B0               ADD         SP,#+16
   \   0000003C   ....               B           ?Subroutine7
     68          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine7:
   \   00000000   F0BC               POP         {R4-R7}
   \   00000002   02BC               POP         {R1}
   \   00000004   0847               BX          R1                 ;; return
     69          
     70          /****************************************************************
     71           *º¯ Êı Ãû: SubMatrix()
     72           *²Î    Êı:
     73           *         const void * mIna: ÊäÈë¾ØÕó
     74           *         const void * mInb: ÊäÈë¾ØÕó
     75           *               void *mRslt: Êä³ö¾ØÕó
     76           *               size    row: ÊäÈë¾ØÕóĞĞÊı
     77           *               size    col: ÊäÈë¾ØÕóÁĞÊı
     78           *
     79           *¹¦    ÄÜ£º¼ÆËã¾ØÕómIna¼õÈ¥mInb£¬½á¹û´æÈë¾ØÕómRsltÖĞ
     80           *
     81           *·µ »Ø Öµ:
     82           *          ³É¹¦: OK
     83           *          ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ£ºERR_MEM_NONE
     84           *
     85           *×÷    Õß£ºÉêÎÄ±ó
     86           *Íê³ÉÈÕÆÚ£º2011-3-22
     87           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
     88          int SubMatrix(const void * mIna, const void * mInb, void * mRslt, size row, size col)
     89          {
   \                     ??SubMatrix:
   \   00000000   FFB5               PUSH        {R0-R7,LR}
   \   00000002   099E               LDR         R6,[SP, #+36]
   \   00000004   0024               MOV         R4,#+0
   \   00000006   12E0               B           ??SubMatrix_1
     90              double *pmIna = (double *)mIna;
     91              double *pmInb = (double *)mInb;
     92              double *pmRslt = (double *)mRslt;
     93              int     i, j;        // Ñ­»·±äÁ¿
     94          
     95          #ifdef __DEBUG__
     96              if ( (pmIna == NULL) || (pmInb == NULL) || (pmRslt == NULL) )
     97              {
     98                  return ERR_MEM_NONE;        // ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ
     99              }
    100          #endif
    101          
    102              for (i=0; i<row; i++)
    103              {
    104                  for (j=0; j<col; j++)
    105                  {
    106                      pmRslt[i*col+j] = pmIna[i*col+j] - pmInb[i*col+j];
   \                     ??SubMatrix_2:
   \   00000008   201C               MOV         R0,R4
   \   0000000A   7043               MUL         R0,R6
   \   0000000C   4019               ADD         R0,R0,R5
   \   0000000E   C200               LSL         R2,R0,#+3
   \   00000010   0298               LDR         R0,[SP, #+8]
   \   00000012   8718               ADD         R7,R0,R2
   \   00000014   0098               LDR         R0,[SP, #+0]
   \   00000016   8018               ADD         R0,R0,R2
   \   00000018   03C8               LDMIA       R0!,{R0,R1}
   \   0000001A   019B               LDR         R3,[SP, #+4]
   \   0000001C   9A18               ADD         R2,R3,R2
   \   0000001E   0CCA               LDMIA       R2!,{R2,R3}
   \   00000020   ........           _BLF        __dSub,??__dSub??rT
   \   00000024   03C7               STMIA       R7!,{R0,R1}
    107                  }//for
   \   00000026   6D1C               ADD         R5,R5,#+1
   \                     ??SubMatrix_3:
   \   00000028   B542               CMP         R5,R6
   \   0000002A   EDDB               BLT         ??SubMatrix_2
   \   0000002C   641C               ADD         R4,R4,#+1
   \                     ??SubMatrix_1:
   \   0000002E   0398               LDR         R0,[SP, #+12]
   \   00000030   8442               CMP         R4,R0
   \   00000032   01DA               BGE         ??SubMatrix_4
   \   00000034   0025               MOV         R5,#+0
   \   00000036   F7E7               B           ??SubMatrix_3
    108              }//for
    109          
    110              return OK;
   \                     ??SubMatrix_4:
   \   00000038   0020               MOV         R0,#+0
   \   0000003A   04B0               ADD         SP,#+16
   \   0000003C                      REQUIRE ?Subroutine7
   \   0000003C                      ;; // Fall through to label ?Subroutine7
    111          }
    112          
    113          /****************************************************************
    114           *º¯ Êı Ãû: MulMatrix()
    115           *²Î    Êı:
    116           *         const void * mIna: ÊäÈë¾ØÕó
    117           *         const void * mInb: ÊäÈë¾ØÕó
    118           *               void *mRslt: Êä³ö¾ØÕó
    119           *               size   rowa: ÊäÈë¾ØÕómInaĞĞÊı
    120           *               size   cola: ÊäÈë¾ØÕómInaÁĞÊı
    121           *               size   colb: ÊäÈë¾ØÕómInbÁĞÊı
    122           *
    123           *¹¦    ÄÜ£º¼ÆËã¾ØÕómIna ³Ë mInb£¬½á¹û´æÈë¾ØÕómRsltÖĞ
    124           *
    125           *·µ »Ø Öµ:
    126           *          ³É¹¦: OK
    127           *          ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ£ºERR_MEM_NONE
    128           *
    129           *×÷    Õß£ºÉêÎÄ±ó
    130           *Íê³ÉÈÕÆÚ£º2011-3-22
    131           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    132          int MulMatrix(const void * mIna, const void * mInb, void * mRslt, size rowa, size cola, size colb)
    133          {
   \                     ??MulMatrix:
   \   00000000   FFB5               PUSH        {R0-R7,LR}
   \   00000002   0022               MOV         R2,#+0
   \   00000004   0CE0               B           ??MulMatrix_1
    134              double *pmIna = (double *)mIna;
    135              double *pmInb = (double *)mInb;
    136              double *pmRslt = (double *)mRslt;
    137              int     i, j, k; // Ñ­»·±äÁ¿ 
    138          
    139          #ifdef __DEBUG__
    140              if ( (pmIna == NULL) || (pmInb == NULL) || (pmRslt == NULL) )
    141              {
    142                  return ERR_MEM_NONE;        // ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ
    143              }
    144          #endif
    145          
    146              for (i=0; i<rowa; i++)
    147              {
    148                  for (j=0; j<colb; j++)
    149                  {                           // Êä³ö¾ØÕóµÄ´óĞ¡Ó¦¸ÃÎªrowa * colb
    150                      pmRslt[i*colb+j] = 0;    // ½«Êä³ö¾ØÕó³õÊ¼»¯Îª0
   \                     ??MulMatrix_2:
   \   00000006   5043               MUL         R0,R2
   \   00000008   0019               ADD         R0,R0,R4
   \   0000000A   C000               LSL         R0,R0,#+3
   \   0000000C   0299               LDR         R1,[SP, #+8]
   \   0000000E   0B18               ADD         R3,R1,R0
   \   00000010   0020               MOV         R0,#+0
   \   00000012   0021               MOV         R1,#+0
   \   00000014   03C3               STMIA       R3!,{R0,R1}
    151                  }
   \   00000016   641C               ADD         R4,R4,#+1
   \                     ??MulMatrix_3:
   \   00000018   0A98               LDR         R0,[SP, #+40]
   \   0000001A   8442               CMP         R4,R0
   \   0000001C   F3DB               BLT         ??MulMatrix_2
   \   0000001E   521C               ADD         R2,R2,#+1
   \                     ??MulMatrix_1:
   \   00000020   0398               LDR         R0,[SP, #+12]
   \   00000022   8242               CMP         R2,R0
   \   00000024   01DA               BGE         ??MulMatrix_4
   \   00000026   0024               MOV         R4,#+0
   \   00000028   F6E7               B           ??MulMatrix_3
    152              }// for
    153          
    154              // Á½¸ö¾ØÕóÏà³Ë
    155              for (i=0; i<rowa; i++)
   \                     ??MulMatrix_4:
   \   0000002A   0027               MOV         R7,#+0
   \   0000002C   00E0               B           ??MulMatrix_5
   \                     ??MulMatrix_6:
   \   0000002E   7F1C               ADD         R7,R7,#+1
   \                     ??MulMatrix_5:
   \   00000030   0398               LDR         R0,[SP, #+12]
   \   00000032   8742               CMP         R7,R0
   \   00000034   28DA               BGE         ??MulMatrix_7
    156              {
    157                  for (j=0; j<colb; j++)
   \   00000036   0024               MOV         R4,#+0
   \   00000038   21E0               B           ??MulMatrix_8
    158                  {
    159                      for (k=0; k<cola; k++)
    160                      {
    161                          pmRslt[i*colb+j] += pmIna[i*cola+k] * pmInb[k*colb+j];
   \                     ??MulMatrix_9:
   \   0000003A   0A98               LDR         R0,[SP, #+40]
   \   0000003C   7843               MUL         R0,R7
   \   0000003E   0019               ADD         R0,R0,R4
   \   00000040   C000               LSL         R0,R0,#+3
   \   00000042   0299               LDR         R1,[SP, #+8]
   \   00000044   0E18               ADD         R6,R1,R0
   \   00000046   0998               LDR         R0,[SP, #+36]
   \   00000048   7843               MUL         R0,R7
   \   0000004A   4019               ADD         R0,R0,R5
   \   0000004C   C000               LSL         R0,R0,#+3
   \   0000004E   0099               LDR         R1,[SP, #+0]
   \   00000050   0818               ADD         R0,R1,R0
   \   00000052   0CC8               LDMIA       R0!,{R2,R3}
   \   00000054   0A98               LDR         R0,[SP, #+40]
   \   00000056   6843               MUL         R0,R5
   \   00000058   0019               ADD         R0,R0,R4
   \   0000005A   C000               LSL         R0,R0,#+3
   \   0000005C   0199               LDR         R1,[SP, #+4]
   \   0000005E   0818               ADD         R0,R1,R0
   \   00000060   03C8               LDMIA       R0!,{R0,R1}
   \   00000062   ........           _BLF        __dMul,??__dMul??rT
   \   00000066   021C               MOV         R2,R0
   \   00000068   0B1C               MOV         R3,R1
   \   0000006A   03CE               LDMIA       R6!,{R0,R1}
   \   0000006C   083E               SUB         R6,#+8
   \   0000006E   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000072   03C6               STMIA       R6!,{R0,R1}
    162                      }
   \   00000074   6D1C               ADD         R5,R5,#+1
   \                     ??MulMatrix_10:
   \   00000076   0998               LDR         R0,[SP, #+36]
   \   00000078   8542               CMP         R5,R0
   \   0000007A   DEDB               BLT         ??MulMatrix_9
   \   0000007C   641C               ADD         R4,R4,#+1
   \                     ??MulMatrix_8:
   \   0000007E   0A98               LDR         R0,[SP, #+40]
   \   00000080   8442               CMP         R4,R0
   \   00000082   D4DA               BGE         ??MulMatrix_6
   \   00000084   0025               MOV         R5,#+0
   \   00000086   F6E7               B           ??MulMatrix_10
    163                  }
    164              }//for
    165          
    166              return OK;
   \                     ??MulMatrix_7:
   \   00000088   0020               MOV         R0,#+0
   \   0000008A   04B0               ADD         SP,#+16
   \   0000008C   ....               B           ?Subroutine7
    167          }
    168          
    169          /****************************************************************
    170           *º¯ Êı Ãû: SymMulMatrix()
    171           *²Î    Êı:
    172           *         const void * mIna: ÊäÈë¾ØÕó
    173           *         const void * mInb: ÊäÈë¾ØÕó
    174           *               void *mRslt: Êä³ö¾ØÕó
    175           *               size   rowa: ÊäÈë¾ØÕómInaĞĞÊı
    176           *               size   cola: ÊäÈë¾ØÕómInaÁĞÊı
    177           *
    178           *¹¦    ÄÜ£º¼ÆËã¾ØÕómIna ³Ë mInb£¬½á¹û´æÈë¾ØÕómRsltÖĞ£¬²¢ÇÒ½á¹ûÎª¶Ô³Æ¾ØÕó
    179           *          ÒòÎª½á¹ûÎª¶Ô³Æ¾ØÕó£¬ËùÒÔ±ØÈ»Îª·½Õó£¬¶øÇÒÖ»ĞèÒªÇóÏÂÈı½ÇÔªËØ¾ÍĞĞÁË
    180           *          Òò´ËÖ»ÒªÕâÀïÖ»ĞèÒªÊäÈë¾ØÕómInaµÄĞĞÁĞÊı¾Í¹»ÁË
    181           *
    182           *·µ »Ø Öµ:
    183           *          ³É¹¦: OK
    184           *          ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ£ºERR_MEM_NONE
    185           *
    186           *×÷    Õß£ºÉêÎÄ±ó
    187           *Íê³ÉÈÕÆÚ£º2011-3-22
    188           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    189          int SymMulMatrix(const void * mIna, const void * mInb, void * mRslt, size rowa, size cola)
    190          {
   \                     ??SymMulMatrix:
   \   00000000   FFB5               PUSH        {R0-R7,LR}
   \   00000002   0022               MOV         R2,#+0
   \   00000004   0DE0               B           ??SymMulMatrix_1
    191              double *pmIna = (double *)mIna;
    192              double *pmInb = (double *)mInb;
    193              double *pmRslt = (double *)mRslt;
    194              int     i, j, k; // Ñ­»·±äÁ¿ 
    195          
    196          #ifdef __DEBUG__
    197              if ( (pmIna == NULL) || (pmInb == NULL) || (pmRslt == NULL) )
    198              {
    199                  return ERR_MEM_NONE;        // ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ
    200              }
    201          #endif
    202          
    203              for (i=0; i<rowa; i++)
    204              {
    205                  for (j=0; j<=i; j++)
   \                     ??SymMulMatrix_2:
   \   00000006   0024               MOV         R4,#+0
    206                  {
    207                      pmRslt[i*rowa+j] = 0.0; // ½«Êä³ö¾ØÕóÏÂÈı½Ç³õÊ¼»¯Îª0
   \                     ??SymMulMatrix_3:
   \   00000008   0398               LDR         R0,[SP, #+12]
   \   0000000A   5043               MUL         R0,R2
   \   0000000C   0019               ADD         R0,R0,R4
   \   0000000E   C000               LSL         R0,R0,#+3
   \   00000010   0299               LDR         R1,[SP, #+8]
   \   00000012   0B18               ADD         R3,R1,R0
   \   00000014   0020               MOV         R0,#+0
   \   00000016   0021               MOV         R1,#+0
   \   00000018   03C3               STMIA       R3!,{R0,R1}
    208                  }
   \   0000001A   641C               ADD         R4,R4,#+1
   \   0000001C   A242               CMP         R2,R4
   \   0000001E   F3DA               BGE         ??SymMulMatrix_3
    209              }// for
   \   00000020   521C               ADD         R2,R2,#+1
   \                     ??SymMulMatrix_1:
   \   00000022   0398               LDR         R0,[SP, #+12]
   \   00000024   8242               CMP         R2,R0
   \   00000026   EEDB               BLT         ??SymMulMatrix_2
    210          
    211              // Á½¸ö¾ØÕóÏà³Ë
    212              for (i=0; i<rowa; i++)
   \   00000028   0027               MOV         R7,#+0
   \   0000002A   2AE0               B           ??SymMulMatrix_4
    213              {
    214                  for (j=0; j<=i; j++)
    215                  {
    216                      for (k=0; k<cola; k++)
    217                      {
    218                          // mInbµÄÁĞÊıµÈÓÚmInaµÄĞĞÊı£¬ËùÒÔmInbµÄ(k, j)ÔªËØÎª[k*rowa+j]
    219                          pmRslt[i*rowa+j] += pmIna[i*cola+k] * pmInb[k*rowa+j];
   \                     ??SymMulMatrix_5:
   \   0000002C   7843               MUL         R0,R7
   \   0000002E   4019               ADD         R0,R0,R5
   \   00000030   C000               LSL         R0,R0,#+3
   \   00000032   0099               LDR         R1,[SP, #+0]
   \   00000034   0818               ADD         R0,R1,R0
   \   00000036   0CC8               LDMIA       R0!,{R2,R3}
   \   00000038   0398               LDR         R0,[SP, #+12]
   \   0000003A   6843               MUL         R0,R5
   \   0000003C   0019               ADD         R0,R0,R4
   \   0000003E   C000               LSL         R0,R0,#+3
   \   00000040   0199               LDR         R1,[SP, #+4]
   \   00000042   0818               ADD         R0,R1,R0
   \   00000044   03C8               LDMIA       R0!,{R0,R1}
   \   00000046   ........           _BLF        __dMul,??__dMul??rT
   \   0000004A   021C               MOV         R2,R0
   \   0000004C   0B1C               MOV         R3,R1
   \   0000004E   03CE               LDMIA       R6!,{R0,R1}
   \   00000050   083E               SUB         R6,#+8
   \   00000052   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000056   03C6               STMIA       R6!,{R0,R1}
    220                      }
   \   00000058   6D1C               ADD         R5,R5,#+1
   \                     ??SymMulMatrix_6:
   \   0000005A   0398               LDR         R0,[SP, #+12]
   \   0000005C   7843               MUL         R0,R7
   \   0000005E   0019               ADD         R0,R0,R4
   \   00000060   C000               LSL         R0,R0,#+3
   \   00000062   0299               LDR         R1,[SP, #+8]
   \   00000064   0E18               ADD         R6,R1,R0
   \   00000066   0998               LDR         R0,[SP, #+36]
   \   00000068   8542               CMP         R5,R0
   \   0000006A   DFDB               BLT         ??SymMulMatrix_5
    221                      pmRslt[j*rowa+i] = pmRslt[i*rowa+j];        // ÉÏÈı½ÇÔªËØ
   \   0000006C   0398               LDR         R0,[SP, #+12]
   \   0000006E   6043               MUL         R0,R4
   \   00000070   C019               ADD         R0,R0,R7
   \   00000072   C000               LSL         R0,R0,#+3
   \   00000074   0A18               ADD         R2,R1,R0
   \   00000076   03CE               LDMIA       R6!,{R0,R1}
   \   00000078   03C2               STMIA       R2!,{R0,R1}
   \   0000007A   641C               ADD         R4,R4,#+1
   \   0000007C   A742               CMP         R7,R4
   \   0000007E   04DA               BGE         ??SymMulMatrix_7
   \   00000080   7F1C               ADD         R7,R7,#+1
   \                     ??SymMulMatrix_4:
   \   00000082   0398               LDR         R0,[SP, #+12]
   \   00000084   8742               CMP         R7,R0
   \   00000086   02DA               BGE         ??SymMulMatrix_8
   \   00000088   0024               MOV         R4,#+0
   \                     ??SymMulMatrix_7:
   \   0000008A   0025               MOV         R5,#+0
   \   0000008C   E5E7               B           ??SymMulMatrix_6
    222                  }
    223              }//for
    224          
    225              return OK;
   \                     ??SymMulMatrix_8:
   \   0000008E   0020               MOV         R0,#+0
   \   00000090   04B0               ADD         SP,#+16
   \   00000092   ....               B           ?Subroutine7
    226          }
    227          
    228          /****************************************************************
    229           *º¯ Êı Ãû: MulMatrix()
    230           *²Î    Êı:
    231           *         const void *  mIn: ÊäÈë¾ØÕó
    232           *               void *mTran: Êä³ö¾ØÕó
    233           *               size    row: ÊäÈë¾ØÕóĞĞÊı
    234           *               size    col: ÊäÈë¾ØÕóÁĞÊı
    235           *
    236           *¹¦    ÄÜ£º¶Ô¾ØÕómIn½øĞĞ×ªÖÃ£¬½á¹û´æÈë¾ØÕómTranÖĞ
    237           *
    238           *·µ »Ø Öµ:
    239           *          ³É¹¦: OK
    240           *          ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ£ºERR_MEM_NONE
    241           *
    242           *×÷    Õß£ºÉêÎÄ±ó
    243           *Íê³ÉÈÕÆÚ£º2011-3-22
    244           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    245          int TranMatrix(const void * mIn, void * mTran, size row, size col)
    246          {
   \                     ??TranMatrix:
   \   00000000   E3B5               PUSH        {R0,R1,R5-R7,LR}
    247              double *pmIn = (double *)mIn;
    248              double *pmTran = (double *)mTran;
    249              int     i, j;      // Ñ­»·±äÁ¿ 
    250          
    251          #ifdef __DEBUG__
    252              if ( (pmIn == NULL) || (pmTran == NULL) )
    253              {
    254                  return ERR_MEM_NONE;        // ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ
    255              }
    256          #endif
    257          
    258              // ¾ØÕó×ªÖÃ
    259              for (i=0; i<row; i++)
   \   00000002   0025               MOV         R5,#+0
   \   00000004   11E0               B           ??TranMatrix_1
    260              {
    261                  for (j=0; j<col; j++)
    262                  {
    263                      pmTran[j*row+i] = pmIn[i*col+j];
   \                     ??TranMatrix_2:
   \   00000006   301C               MOV         R0,R6
   \   00000008   5043               MUL         R0,R2
   \   0000000A   4019               ADD         R0,R0,R5
   \   0000000C   C000               LSL         R0,R0,#+3
   \   0000000E   0199               LDR         R1,[SP, #+4]
   \   00000010   0F18               ADD         R7,R1,R0
   \   00000012   281C               MOV         R0,R5
   \   00000014   5843               MUL         R0,R3
   \   00000016   8019               ADD         R0,R0,R6
   \   00000018   C000               LSL         R0,R0,#+3
   \   0000001A   0099               LDR         R1,[SP, #+0]
   \   0000001C   0818               ADD         R0,R1,R0
   \   0000001E   03C8               LDMIA       R0!,{R0,R1}
   \   00000020   03C7               STMIA       R7!,{R0,R1}
    264                  }//for
   \   00000022   761C               ADD         R6,R6,#+1
   \                     ??TranMatrix_3:
   \   00000024   9E42               CMP         R6,R3
   \   00000026   EEDB               BLT         ??TranMatrix_2
   \   00000028   6D1C               ADD         R5,R5,#+1
   \                     ??TranMatrix_1:
   \   0000002A   9542               CMP         R5,R2
   \   0000002C   01DA               BGE         ??TranMatrix_4
   \   0000002E   0026               MOV         R6,#+0
   \   00000030   F8E7               B           ??TranMatrix_3
    265              }//for
    266          
    267              return OK;
   \                     ??TranMatrix_4:
   \   00000032   0020               MOV         R0,#+0
   \   00000034   ECBC               POP         {R2,R3,R5-R7}
   \   00000036   02BC               POP         {R1}
   \   00000038   0847               BX          R1                 ;; return
    268          }
    269          
    270          // ½»»»x,yµÄÖµ
    271          #define swap(x, y) { double t = (x); (x) = (y); (y) = t; }
    272          
    273          /****************************************************************
    274           *º¯ Êı Ãû: InvMtrx()
    275           *²Î    Êı:
    276           *         const void *  mIn: ÊäÈë¾ØÕó
    277           *               void * mInv: Êä³ö¾ØÕó
    278           *               size    len: ÊäÈë¾ØÕóĞĞÁĞÊı
    279           *
    280           *¹¦    ÄÜ£ºÓÃGauseÈ«Ñ¡Ö÷Ôª·¨¶Ô¾ØÕómIn½øĞĞÇóÄæ£¬½á¹û´æÈë¾ØÕómInvÖĞ
    281           *          Õâ¸öº¯ÊıÖ»¿ÉÒÔÇóĞĞÁĞÊıÎªLEN_INV_GAUSEµÄ¾ØÕóµÄÄæ
    282           *
    283           *·µ »Ø Öµ:
    284           *          ³É¹¦: OK
    285           *          ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ£ºERR_MEM_NONE
    286           *          ¾ØÕó²»¿ÉÒÔÇóÄæ£ºERR_CANNOT_INV
    287           *
    288           *×÷    Õß£ºÉêÎÄ±ó
    289           *Íê³ÉÈÕÆÚ£º2011-3-22
    290           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    291          int InvMtrx(const void * mIn, void * mInv, size len)
    292          { 
   \                     ??InvMtrx:
   \   00000000   F6B5               PUSH        {R1,R2,R4-R7,LR}
   \   00000002   AFB0               SUB         SP,#+188
   \   00000004   021C               MOV         R2,R0
   \   00000006   0026               MOV         R6,#+0
   \   00000008   0CE0               B           ??InvMtrx_1
    293              int i, j, k;                      // Ñ­»·±äÁ¿
    294              int rowMax[LEN_INV_GAUSE];        // ×î´óÔªËØĞĞÏÂ±ê
    295              int colMax[LEN_INV_GAUSE];        // ×î´óÔªËØÁĞÏÂ±ê
    296          
    297              double maxElem;                   // ×î´óÔªËØ
    298              double absElem;                   // ÔªËØ¾ø¶ÔÖµ
    299          
    300              double *pmIn = (double *)mIn;
    301              double *pmInv = (double *)mInv;
    302              double INF = 1e-6;                // Ò»¸öºÜĞ¡µÄÊı
    303          
    304          #ifdef __DEBUG__
    305              if ( (pmIn == NULL) || (pmInv == NULL) )
    306              {
    307                  return ERR_MEM_NONE;        // ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ
    308              }
    309          #endif
    310          
    311              // ½«ÊäÈë¾ØÕóµÄÖµ¿½±´µ½Êä³ö¾ØÕóÖĞ£¬
    312              // ÕâÑùÊ¹ÇóÄæ½á¹ûÖ±½Ó±£´æÔÚÊä³ö¾ØÕóÖĞ¡£
    313              for (i=0; i<len; i++)
    314              {
    315                  for (j=0; j<len; j++)
    316                  {
    317                      pmInv[i*len+j] = pmIn[i*len+j];
   \                     ??InvMtrx_2:
   \   0000000A   7043               MUL         R0,R6
   \   0000000C   4019               ADD         R0,R0,R5
   \   0000000E   C000               LSL         R0,R0,#+3
   \   00000010   2F99               LDR         R1,[SP, #+188]
   \   00000012   0B18               ADD         R3,R1,R0
   \   00000014   1018               ADD         R0,R2,R0
   \   00000016   03C8               LDMIA       R0!,{R0,R1}
   \   00000018   03C3               STMIA       R3!,{R0,R1}
    318                  }//for
   \   0000001A   6D1C               ADD         R5,R5,#+1
   \                     ??InvMtrx_3:
   \   0000001C   3098               LDR         R0,[SP, #+192]
   \   0000001E   8542               CMP         R5,R0
   \   00000020   F3DB               BLT         ??InvMtrx_2
   \   00000022   761C               ADD         R6,R6,#+1
   \                     ??InvMtrx_1:
   \   00000024   3098               LDR         R0,[SP, #+192]
   \   00000026   8642               CMP         R6,R0
   \   00000028   01DA               BGE         ??InvMtrx_4
   \   0000002A   0025               MOV         R5,#+0
   \   0000002C   F6E7               B           ??InvMtrx_3
    319              }//for
    320          
    321              // ´ÓÕâÀï¿ªÊ¼µ½×îºóÓ¦ÓÃGauseÈ«Ñ¡Ö÷ÔªÇóÄæ
    322              for (k=0; k<len; k++)
   \                     ??InvMtrx_4:
   \   0000002E   0024               MOV         R4,#+0
   \   00000030   17E0               B           ??InvMtrx_5
    323              {
    324                  // µÚÒ»²½£ºÑ¡Ö÷Ôª
    325                  // ´ÓµÚ k ĞĞ¡¢µÚ k ÁĞ¿ªÊ¼µÄÓÒÏÂ½Ç×ÓÕóÖĞÑ¡È¡¾ø¶ÔÖµ×î´óµÄÔªËØ£¬
    326                  // ²¢¼Ç×¡´ËÔªËØËùÔÚµÄĞĞºÅºÍÁĞºÅ£¬ÔÙÍ¨¹ıĞĞ½»»»ºÍÁĞ½»»»½«Ëü½»»»µ½Ö÷ÔªËØÎ»ÖÃÉÏ¡£
    327                  maxElem = 0.0;
    328                  for (i=k; i<len; i++) 
    329                  { 
    330                      for (j=k; j<len; j++)
    331                      {
    332                          absElem = (pmInv[i*len+j] > 0 ? pmInv[i*len+j] : -pmInv[i*len+j]); //Çó¾ø¶ÔÖµ
    333                          if (absElem > maxElem) 
    334                          { 
    335                              maxElem = absElem; 
    336                              rowMax[k] = i;        // µÚk´ÎÖ÷Ñ­»·×î´óÔªËØµÄĞĞºÅ
    337                              colMax[k] = j;        // µÚk´ÎÖ÷Ñ­»·×î´óÔªËØµÄÁĞºÅ
    338                          } 
    339                      }//for 
    340                  }//for
    341          
    342                  if ( (maxElem < INF) && (maxElem > -INF) )        //max µÈÓÚÁã
    343                  {            
    344                      return ERR_CANNOT_INV;        // ²»¿ÉÒÔÇóÄæÁË£¡
    345                  }
    346          
    347                  if ( rowMax[k] != k )            // ×î´óÔªËØ²»ÔÚµÚkĞĞ
    348                  {
    349                      for (j=0; j<len; j++)
    350                      {
    351                          // ½«kĞĞºÍ×î´óÔªËØËùÔÚĞĞµÄÔªËØ½øĞĞĞĞ½»»»
    352                          swap(pmInv[k*len+j], pmInv[rowMax[k]*len+j]);
    353                      }
    354                  }
    355          
    356                  if ( colMax[k] != k )             // ×î´óÔªËØ²»ÔÚµÚkÁĞ
    357                  {
    358                      for (j=0; j<len; j++)
    359                      {
    360                          // ½«kÁĞºÍ×î´óÔªËØËùÔÚÁĞµÄÔªËØ½øĞĞÁĞ½»»»
    361                          swap(pmInv[j*len+k], pmInv[j*len+colMax[k]]);
    362                      }
    363                  }
    364          
    365                  // µÚ¶ş²½£ºÔªËØm(k, k)Çóµ¹
    366                  pmInv[k*len+k] = 1.0 / pmInv[k*len+k];
    367          
    368                  // µÚÈı²½ 
    369                  for (j=0; j<len; j++) 
    370                  { 
    371                      if (j != k)
    372                      {
    373                          // m(k, j) = m(k, j) * m(k, k)£¬j = 0, 1, ..., n-1£»j != k 
    374                          pmInv[k*len+j] *= pmInv[k*len+k];
    375                      }
    376                  }
    377          
    378                  // µÚËÄ²½ 
    379                  for (i=0; i<len; i++) 
    380                  { 
    381                      if (i != k) 
    382                      { 
    383                          for (j=0; j<len; j++) 
    384                          { 
    385                              if (j != k)
    386                              {
    387                                  // m(i, j) = m(i, j) - m(i, k) * m(k, j)£¬i, j = 0, 1, ..., n-1£»i, j != k
    388                                  pmInv[i*len+j] -= pmInv[i*len+k] * pmInv[k*len+j];
    389                              }
    390                          } 
    391                      }//if
    392                  }//for
    393          
    394                  // µÚÎå²½
    395                  for (i=0; i<len; i++) 
    396                  { 
    397                      if (i != k)
   \                     ??InvMtrx_6:
   \   00000032   A642               CMP         R6,R4
   \   00000034   10D0               BEQ         ??InvMtrx_7
    398                      {
    399                          // m(i, k) = -m(i, k) * m(k, k)£¬i = 0, 1, ..., n-1£»i != k 
    400                          pmInv[i*len+k] *= -pmInv[k*len+k];
   \   00000036   7043               MUL         R0,R6
   \   00000038   0019               ADD         R0,R0,R4
   \   0000003A   C000               LSL         R0,R0,#+3
   \   0000003C   2F99               LDR         R1,[SP, #+188]
   \   0000003E   0D18               ADD         R5,R1,R0
   \   00000040   03CD               LDMIA       R5!,{R0,R1}
   \   00000042   083D               SUB         R5,#+8
   \   00000044   021C               MOV         R2,R0
   \   00000046   0B1C               MOV         R3,R1
   \   00000048   0398               LDR         R0,[SP, #+12]
   \   0000004A   03C8               LDMIA       R0!,{R0,R1}
   \   0000004C   ........           _BLF        __dMul,??__dMul??rT
   \   00000050   8022               MOV         R2,#+128
   \   00000052   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   00000054   5140               EOR         R1,R2
   \   00000056   03C5               STMIA       R5!,{R0,R1}
    401                      }
    402                  }//for
   \                     ??InvMtrx_7:
   \   00000058   761C               ADD         R6,R6,#+1
   \                     ??InvMtrx_8:
   \   0000005A   3098               LDR         R0,[SP, #+192]
   \   0000005C   8642               CMP         R6,R0
   \   0000005E   E8DB               BLT         ??InvMtrx_6
   \   00000060   641C               ADD         R4,R4,#+1
   \                     ??InvMtrx_5:
   \   00000062   3098               LDR         R0,[SP, #+192]
   \   00000064   8442               CMP         R4,R0
   \   00000066   ....               BLT         .+5
   \   00000068   D6E0               B           ??InvMtrx_9
   \   0000006A   6A46               MOV         R2,SP
   \   0000006C   0020               MOV         R0,#+0
   \   0000006E   0021               MOV         R1,#+0
   \   00000070   03C2               STMIA       R2!,{R0,R1}
   \   00000072   261C               MOV         R6,R4
   \                     ??InvMtrx_10:
   \   00000074   251C               MOV         R5,R4
   \                     ??InvMtrx_11:
   \   00000076   3098               LDR         R0,[SP, #+192]
   \   00000078   7043               MUL         R0,R6
   \   0000007A   4019               ADD         R0,R0,R5
   \   0000007C   C000               LSL         R0,R0,#+3
   \   0000007E   2F99               LDR         R1,[SP, #+188]
   \   00000080   0F18               ADD         R7,R1,R0
   \   00000082   03CF               LDMIA       R7!,{R0,R1}
   \   00000084   083F               SUB         R7,#+8
   \   00000086   0122               MOV         R2,#+1
   \   00000088   0023               MOV         R3,#+0
   \   0000008A   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   0000008E   0028               CMP         R0,#+0
   \   00000090   05AA               ADD         R2,SP,#+20
   \   00000092   03CF               LDMIA       R7!,{R0,R1}
   \   00000094   02D1               BNE         ??InvMtrx_12
   \   00000096   8023               MOV         R3,#+128
   \   00000098   1B06               LSL         R3,R3,#+24         ;; #-2147483648
   \   0000009A   5940               EOR         R1,R3
   \                     ??InvMtrx_12:
   \   0000009C   03C2               STMIA       R2!,{R0,R1}
   \   0000009E   A000               LSL         R0,R4,#+2
   \   000000A0   1BA9               ADD         R1,SP,#+108
   \   000000A2   0918               ADD         R1,R1,R0
   \   000000A4   0491               STR         R1,[SP, #+16]
   \   000000A6   07A9               ADD         R1,SP,#+28
   \   000000A8   0F18               ADD         R7,R1,R0
   \   000000AA   6846               MOV         R0,SP
   \   000000AC   03C8               LDMIA       R0!,{R0,R1}
   \   000000AE   05AA               ADD         R2,SP,#+20
   \   000000B0   0CCA               LDMIA       R2!,{R2,R3}
   \   000000B2   ........           _BLF        __dLess,??__dLess??rT
   \   000000B6   0028               CMP         R0,#+0
   \   000000B8   06D0               BEQ         ??InvMtrx_13
   \   000000BA   6A46               MOV         R2,SP
   \   000000BC   05A8               ADD         R0,SP,#+20
   \   000000BE   03C8               LDMIA       R0!,{R0,R1}
   \   000000C0   03C2               STMIA       R2!,{R0,R1}
   \   000000C2   3E60               STR         R6,[R7, #+0]
   \   000000C4   0498               LDR         R0,[SP, #+16]
   \   000000C6   0560               STR         R5,[R0, #+0]
   \                     ??InvMtrx_13:
   \   000000C8   6D1C               ADD         R5,R5,#+1
   \   000000CA   3098               LDR         R0,[SP, #+192]
   \   000000CC   8542               CMP         R5,R0
   \   000000CE   D2DB               BLT         ??InvMtrx_11
   \   000000D0   761C               ADD         R6,R6,#+1
   \   000000D2   8642               CMP         R6,R0
   \   000000D4   CEDB               BLT         ??InvMtrx_10
   \   000000D6   6846               MOV         R0,SP
   \   000000D8   03C8               LDMIA       R0!,{R0,R1}
   \   000000DA   ....               LDR         R2,??DataTable0    ;; 0xa0b5ed8d
   \   000000DC   ....               LDR         R3,??DataTable1    ;; 0x3eb0c6f7
   \   000000DE   ........           _BLF        __dLess,??__dLess??rT
   \   000000E2   0028               CMP         R0,#+0
   \   000000E4   09D0               BEQ         ??InvMtrx_14
   \   000000E6   6846               MOV         R0,SP
   \   000000E8   03C8               LDMIA       R0!,{R0,R1}
   \   000000EA   ....               LDR         R2,??DataTable2    ;; 0xa0b5ed8c
   \   000000EC   ....               LDR         R3,??DataTable3    ;; 0xbeb0c6f7
   \   000000EE   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   000000F2   0028               CMP         R0,#+0
   \   000000F4   01D0               BEQ         ??InvMtrx_14
   \   000000F6   0220               MOV         R0,#+2
   \   000000F8   D2E0               B           ??InvMtrx_15
   \                     ??InvMtrx_14:
   \   000000FA   3A68               LDR         R2,[R7, #+0]
   \   000000FC   3098               LDR         R0,[SP, #+192]
   \   000000FE   6043               MUL         R0,R4
   \   00000100   0290               STR         R0,[SP, #+8]
   \   00000102   A242               CMP         R2,R4
   \   00000104   1AD0               BEQ         ??InvMtrx_16
   \   00000106   0025               MOV         R5,#+0
   \   00000108   15E0               B           ??InvMtrx_17
   \                     ??InvMtrx_18:
   \   0000010A   0298               LDR         R0,[SP, #+8]
   \   0000010C   4019               ADD         R0,R0,R5
   \   0000010E   C000               LSL         R0,R0,#+3
   \   00000110   2F99               LDR         R1,[SP, #+188]
   \   00000112   0B18               ADD         R3,R1,R0
   \   00000114   6E46               MOV         R6,SP
   \   00000116   03CB               LDMIA       R3!,{R0,R1}
   \   00000118   083B               SUB         R3,#+8
   \   0000011A   03C6               STMIA       R6!,{R0,R1}
   \   0000011C   3098               LDR         R0,[SP, #+192]
   \   0000011E   5043               MUL         R0,R2
   \   00000120   4019               ADD         R0,R0,R5
   \   00000122   C000               LSL         R0,R0,#+3
   \   00000124   2F99               LDR         R1,[SP, #+188]
   \   00000126   0E18               ADD         R6,R1,R0
   \   00000128   03CE               LDMIA       R6!,{R0,R1}
   \   0000012A   083E               SUB         R6,#+8
   \   0000012C   03C3               STMIA       R3!,{R0,R1}
   \   0000012E   6846               MOV         R0,SP
   \   00000130   03C8               LDMIA       R0!,{R0,R1}
   \   00000132   03C6               STMIA       R6!,{R0,R1}
   \   00000134   6D1C               ADD         R5,R5,#+1
   \                     ??InvMtrx_17:
   \   00000136   3098               LDR         R0,[SP, #+192]
   \   00000138   8542               CMP         R5,R0
   \   0000013A   E6DB               BLT         ??InvMtrx_18
   \                     ??InvMtrx_16:
   \   0000013C   0498               LDR         R0,[SP, #+16]
   \   0000013E   0268               LDR         R2,[R0, #+0]
   \   00000140   A242               CMP         R2,R4
   \   00000142   19D0               BEQ         ??InvMtrx_19
   \   00000144   0025               MOV         R5,#+0
   \   00000146   14E0               B           ??InvMtrx_20
   \                     ??InvMtrx_21:
   \   00000148   061C               MOV         R6,R0
   \   0000014A   6E43               MUL         R6,R5
   \   0000014C   3019               ADD         R0,R6,R4
   \   0000014E   C000               LSL         R0,R0,#+3
   \   00000150   2F99               LDR         R1,[SP, #+188]
   \   00000152   0B18               ADD         R3,R1,R0
   \   00000154   6F46               MOV         R7,SP
   \   00000156   03CB               LDMIA       R3!,{R0,R1}
   \   00000158   083B               SUB         R3,#+8
   \   0000015A   03C7               STMIA       R7!,{R0,R1}
   \   0000015C   B018               ADD         R0,R6,R2
   \   0000015E   C000               LSL         R0,R0,#+3
   \   00000160   2F99               LDR         R1,[SP, #+188]
   \   00000162   0E18               ADD         R6,R1,R0
   \   00000164   03CE               LDMIA       R6!,{R0,R1}
   \   00000166   083E               SUB         R6,#+8
   \   00000168   03C3               STMIA       R3!,{R0,R1}
   \   0000016A   6846               MOV         R0,SP
   \   0000016C   03C8               LDMIA       R0!,{R0,R1}
   \   0000016E   03C6               STMIA       R6!,{R0,R1}
   \   00000170   6D1C               ADD         R5,R5,#+1
   \                     ??InvMtrx_20:
   \   00000172   3098               LDR         R0,[SP, #+192]
   \   00000174   8542               CMP         R5,R0
   \   00000176   E7DB               BLT         ??InvMtrx_21
   \                     ??InvMtrx_19:
   \   00000178   0298               LDR         R0,[SP, #+8]
   \   0000017A   0019               ADD         R0,R0,R4
   \   0000017C   C000               LSL         R0,R0,#+3
   \   0000017E   2F99               LDR         R1,[SP, #+188]
   \   00000180   0818               ADD         R0,R1,R0
   \   00000182   0390               STR         R0,[SP, #+12]
   \   00000184   051C               MOV         R5,R0
   \   00000186   0020               MOV         R0,#+0
   \   00000188   ....               LDR         R1,??DataTable4    ;; 0x3ff00000
   \   0000018A   2A1C               MOV         R2,R5
   \   0000018C   0CCA               LDMIA       R2!,{R2,R3}
   \   0000018E   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000192   03C5               STMIA       R5!,{R0,R1}
   \   00000194   0025               MOV         R5,#+0
   \   00000196   10E0               B           ??InvMtrx_22
   \                     ??InvMtrx_23:
   \   00000198   A542               CMP         R5,R4
   \   0000019A   0DD0               BEQ         ??InvMtrx_24
   \   0000019C   0298               LDR         R0,[SP, #+8]
   \   0000019E   4019               ADD         R0,R0,R5
   \   000001A0   C000               LSL         R0,R0,#+3
   \   000001A2   2F99               LDR         R1,[SP, #+188]
   \   000001A4   0E18               ADD         R6,R1,R0
   \   000001A6   03CE               LDMIA       R6!,{R0,R1}
   \   000001A8   083E               SUB         R6,#+8
   \   000001AA   021C               MOV         R2,R0
   \   000001AC   0B1C               MOV         R3,R1
   \   000001AE   0398               LDR         R0,[SP, #+12]
   \   000001B0   03C8               LDMIA       R0!,{R0,R1}
   \   000001B2   ........           _BLF        __dMul,??__dMul??rT
   \   000001B6   03C6               STMIA       R6!,{R0,R1}
   \                     ??InvMtrx_24:
   \   000001B8   6D1C               ADD         R5,R5,#+1
   \                     ??InvMtrx_22:
   \   000001BA   3098               LDR         R0,[SP, #+192]
   \   000001BC   8542               CMP         R5,R0
   \   000001BE   EBDB               BLT         ??InvMtrx_23
   \   000001C0   0026               MOV         R6,#+0
   \   000001C2   20E0               B           ??InvMtrx_25
   \                     ??InvMtrx_26:
   \   000001C4   A542               CMP         R5,R4
   \   000001C6   19D0               BEQ         ??InvMtrx_27
   \   000001C8   7043               MUL         R0,R6
   \   000001CA   4119               ADD         R1,R0,R5
   \   000001CC   C900               LSL         R1,R1,#+3
   \   000001CE   2F9A               LDR         R2,[SP, #+188]
   \   000001D0   5718               ADD         R7,R2,R1
   \   000001D2   0019               ADD         R0,R0,R4
   \   000001D4   C000               LSL         R0,R0,#+3
   \   000001D6   1018               ADD         R0,R2,R0
   \   000001D8   03C8               LDMIA       R0!,{R0,R1}
   \   000001DA   021C               MOV         R2,R0
   \   000001DC   0B1C               MOV         R3,R1
   \   000001DE   0298               LDR         R0,[SP, #+8]
   \   000001E0   4019               ADD         R0,R0,R5
   \   000001E2   C000               LSL         R0,R0,#+3
   \   000001E4   2F99               LDR         R1,[SP, #+188]
   \   000001E6   0818               ADD         R0,R1,R0
   \   000001E8   03C8               LDMIA       R0!,{R0,R1}
   \   000001EA   ........           _BLF        __dMul,??__dMul??rT
   \   000001EE   021C               MOV         R2,R0
   \   000001F0   0B1C               MOV         R3,R1
   \   000001F2   03CF               LDMIA       R7!,{R0,R1}
   \   000001F4   083F               SUB         R7,#+8
   \   000001F6   ........           _BLF        __dSub,??__dSub??rT
   \   000001FA   03C7               STMIA       R7!,{R0,R1}
   \                     ??InvMtrx_27:
   \   000001FC   6D1C               ADD         R5,R5,#+1
   \                     ??InvMtrx_28:
   \   000001FE   3098               LDR         R0,[SP, #+192]
   \   00000200   8542               CMP         R5,R0
   \   00000202   DFDB               BLT         ??InvMtrx_26
   \                     ??InvMtrx_29:
   \   00000204   761C               ADD         R6,R6,#+1
   \                     ??InvMtrx_25:
   \   00000206   3098               LDR         R0,[SP, #+192]
   \   00000208   8642               CMP         R6,R0
   \   0000020A   03DA               BGE         ??InvMtrx_30
   \   0000020C   A642               CMP         R6,R4
   \   0000020E   F9D0               BEQ         ??InvMtrx_29
   \   00000210   0025               MOV         R5,#+0
   \   00000212   F4E7               B           ??InvMtrx_28
   \                     ??InvMtrx_30:
   \   00000214   0026               MOV         R6,#+0
   \   00000216   20E7               B           ??InvMtrx_8
    403              }//for
    404          
    405              // ×îºó£¬¸ù¾İÔÚÈ«Ñ¡Ö÷Ôª¹ı³ÌÖĞËù¼ÇÂ¼µÄĞĞ¡¢ÁĞ½»»»µÄĞÅÏ¢½øĞĞ»Ö¸´£¬»Ö¸´µÄÔ­ÔòÈçÏÂ£º
    406              // ÔÚÈ«Ñ¡Ö÷Ôª¹ı³ÌÖĞ£¬ÏÈ½»»»µÄĞĞ£¨ÁĞ£©ºó½øĞĞ»Ö¸´£»
    407              // Ô­À´µÄĞĞ£¨ÁĞ£©½»»»ÓÃÁĞ£¨ĞĞ£©½»»»À´»Ö¸´¡£
    408              for (k=len-1; k>=0; k--) 
   \                     ??InvMtrx_9:
   \   00000218   441E               SUB         R4,R0,#+1
   \   0000021A   18E0               B           ??InvMtrx_31
    409              {
    410                  if ( colMax[k] != k )
    411                  {
    412                      for (j=0; j<len; j++)
    413                      {
    414                          swap(pmInv[k*len+j], pmInv[colMax[k]*len+j]);
    415                      }
    416                  }//if
    417          
    418                  if ( rowMax[k] != k )
    419                  {
    420                      for (j=0; j<len; j++)
    421                      {
    422                          swap(pmInv[j*len+k], pmInv[j*len+rowMax[k]]);
   \                     ??InvMtrx_32:
   \   0000021C   061C               MOV         R6,R0
   \   0000021E   6E43               MUL         R6,R5
   \   00000220   3019               ADD         R0,R6,R4
   \   00000222   C000               LSL         R0,R0,#+3
   \   00000224   2F99               LDR         R1,[SP, #+188]
   \   00000226   0B18               ADD         R3,R1,R0
   \   00000228   6F46               MOV         R7,SP
   \   0000022A   03CB               LDMIA       R3!,{R0,R1}
   \   0000022C   083B               SUB         R3,#+8
   \   0000022E   03C7               STMIA       R7!,{R0,R1}
   \   00000230   B018               ADD         R0,R6,R2
   \   00000232   C000               LSL         R0,R0,#+3
   \   00000234   2F99               LDR         R1,[SP, #+188]
   \   00000236   0E18               ADD         R6,R1,R0
   \   00000238   03CE               LDMIA       R6!,{R0,R1}
   \   0000023A   083E               SUB         R6,#+8
   \   0000023C   03C3               STMIA       R3!,{R0,R1}
   \   0000023E   6846               MOV         R0,SP
   \   00000240   03C8               LDMIA       R0!,{R0,R1}
   \   00000242   03C6               STMIA       R6!,{R0,R1}
    423                      }
   \   00000244   6D1C               ADD         R5,R5,#+1
   \                     ??InvMtrx_33:
   \   00000246   3098               LDR         R0,[SP, #+192]
   \   00000248   8542               CMP         R5,R0
   \   0000024A   E7DB               BLT         ??InvMtrx_32
   \                     ??InvMtrx_34:
   \   0000024C   641E               SUB         R4,R4,#+1
   \                     ??InvMtrx_31:
   \   0000024E   002C               CMP         R4,#+0
   \   00000250   25D4               BMI         ??InvMtrx_35
   \   00000252   A200               LSL         R2,R4,#+2
   \   00000254   1BA8               ADD         R0,SP,#+108
   \   00000256   8358               LDR         R3,[R0, R2]
   \   00000258   A342               CMP         R3,R4
   \   0000025A   1AD0               BEQ         ??InvMtrx_36
   \   0000025C   0025               MOV         R5,#+0
   \   0000025E   15E0               B           ??InvMtrx_37
   \                     ??InvMtrx_38:
   \   00000260   6043               MUL         R0,R4
   \   00000262   4019               ADD         R0,R0,R5
   \   00000264   C000               LSL         R0,R0,#+3
   \   00000266   2F99               LDR         R1,[SP, #+188]
   \   00000268   0F18               ADD         R7,R1,R0
   \   0000026A   6E46               MOV         R6,SP
   \   0000026C   03CF               LDMIA       R7!,{R0,R1}
   \   0000026E   083F               SUB         R7,#+8
   \   00000270   03C6               STMIA       R6!,{R0,R1}
   \   00000272   3098               LDR         R0,[SP, #+192]
   \   00000274   5843               MUL         R0,R3
   \   00000276   4019               ADD         R0,R0,R5
   \   00000278   C000               LSL         R0,R0,#+3
   \   0000027A   2F99               LDR         R1,[SP, #+188]
   \   0000027C   0E18               ADD         R6,R1,R0
   \   0000027E   03CE               LDMIA       R6!,{R0,R1}
   \   00000280   083E               SUB         R6,#+8
   \   00000282   03C7               STMIA       R7!,{R0,R1}
   \   00000284   6846               MOV         R0,SP
   \   00000286   03C8               LDMIA       R0!,{R0,R1}
   \   00000288   03C6               STMIA       R6!,{R0,R1}
   \   0000028A   6D1C               ADD         R5,R5,#+1
   \                     ??InvMtrx_37:
   \   0000028C   3098               LDR         R0,[SP, #+192]
   \   0000028E   8542               CMP         R5,R0
   \   00000290   E6DB               BLT         ??InvMtrx_38
   \                     ??InvMtrx_36:
   \   00000292   07A8               ADD         R0,SP,#+28
   \   00000294   8258               LDR         R2,[R0, R2]
   \   00000296   A242               CMP         R2,R4
   \   00000298   D8D0               BEQ         ??InvMtrx_34
   \   0000029A   0025               MOV         R5,#+0
   \   0000029C   D3E7               B           ??InvMtrx_33
    424                  }
    425              }//for
    426          
    427              return OK;
   \                     ??InvMtrx_35:
   \   0000029E   0020               MOV         R0,#+0
   \                     ??InvMtrx_15:
   \   000002A0   31B0               ADD         SP,#+196
   \   000002A2   ....               B           ?Subroutine7
    428          }
    429          
    430          /****************************************************************
    431           *º¯ Êı Ãû: InvSymMtrx()
    432           *²Î    Êı:
    433           *         const void *  mIn: ÊäÈë¾ØÕó£¬Ó¦¸ÃÎª¶Ô³Æ¾ØÕó
    434           *               void * mInv: Êä³ö¾ØÕó
    435           *               size    len: ÊäÈë¾ØÕóĞĞÁĞÊı
    436           *
    437           *¹¦    ÄÜ£ºÓÃ²»Ñ¡Ö÷ÔªGause·¨¶Ô¶Ô³Æ¾ØÕómIn½øĞĞÇóÄæ£¬Èç¹û²»Ñ¡Ö÷ÔªµÄ
    438           *          ¹ı³Ì³öÏÖÖ÷ÔªÎªÁã£¬Ôòµ÷ÓÃÈ«Ñ¡Ö÷ÔªµÄ¸ßË¹Ëã·¨
    439           *          ½á¹û´æÈë¾ØÕómInvÖĞ
    440           *×¢   Òâ£º ÈôÊäÈë¾ØÕómIn²»¶Ô³Æ£¬ÔòÓÃÈ«Ñ¡Ö÷Ôª¸ßË¹ÇóÄæ
    441           *
    442           *·µ »Ø Öµ:
    443           *          ³É¹¦: OK
    444           *          ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ£ºERR_MEM_NONE
    445           *          ¾ØÕó²»¿ÉÒÔÇóÄæ£ºERR_CANNOT_INV
    446           *
    447           *×÷    Õß£ºÉêÎÄ±ó
    448           *Íê³ÉÈÕÆÚ£º2011-3-22
    449           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    450          int InvSymMtrx(const void * mIn, void * mInv, size len)
    451          {
   \                     ??InvSymMtrx:
   \   00000000   F7B5               PUSH        {R0-R2,R4-R7,LR}
   \   00000002   87B0               SUB         SP,#+28
   \   00000004   0020               MOV         R0,#+0
   \   00000006   0DE0               B           ??InvSymMtrx_1
    452              int    i, j, k;                // Ñ­»·±äÁ¿
    453              double *pmIn = (double *)mIn;
    454              double *pmInv = (double *)mInv;
    455              double INF = 1e-6;                // Ò»¸öºÜĞ¡µÄÊı
    456          
    457          #ifdef __DEBUG__
    458              if ( (pmIn == NULL) || (pmInv == NULL) )
    459              {
    460                  return ERR_MEM_NONE;        // ÊäÈë»òÊä³ö¾ØÕóÖ¸ÕëÎª¿Õ
    461              }
    462          #endif
    463          
    464              // ½«ÊäÈë¾ØÕóµÄÖµ¿½±´µ½Êä³ö¾ØÕóÖĞ£¬
    465              // ÕâÑù¼È¿ÉÒÔ±£´æÊäÈë¾ØÕó£¬ÓÖ¿ÉÒÔÊ¹ÇóÄæ½á¹û
    466              // Ö±½Ó±£´æÔÚÊä³ö¾ØÕóÖĞ¡£
    467              for (i=0; i<len; i++)
    468              {
    469                  for (j=0; j<=i; j++)
    470                  {
    471                      // ÅĞ¶ÏÊäÈë¾ØÕóÊÇ·ñ¶Ô³Æ£¬Èô²»¶Ô³Æ£¬ÔòÓÃÈ«Ñ¡Ö÷Ôª¸ßË¹ÇóÄæ
    472                      double tmp = pmIn[i*len+j] - pmIn[j*len+i];
    473                      if ( (tmp < -INF) || (tmp > INF) )
    474                      {
    475                          return InvMtrx(pmIn, pmInv, len);  // µ÷ÓÃÈ«Ñ¡Ö÷Ôª¸ßË¹ÇóÄæ
    476                      }
    477          
    478                      pmInv[i*len+j] = pmIn[i*len+j];
   \                     ??InvSymMtrx_2:
   \   00000008   0898               LDR         R0,[SP, #+32]
   \   0000000A   4219               ADD         R2,R0,R5
   \   0000000C   03CE               LDMIA       R6!,{R0,R1}
   \   0000000E   083E               SUB         R6,#+8
   \   00000010   03C2               STMIA       R2!,{R0,R1}
    479                      pmInv[j*len+i] = pmIn[i*len+j];
   \   00000012   0898               LDR         R0,[SP, #+32]
   \   00000014   C219               ADD         R2,R0,R7
   \   00000016   03CE               LDMIA       R6!,{R0,R1}
   \   00000018   03C2               STMIA       R2!,{R0,R1}
   \   0000001A   641C               ADD         R4,R4,#+1
   \   0000001C   0098               LDR         R0,[SP, #+0]
   \   0000001E   A042               CMP         R0,R4
   \   00000020   06DA               BGE         ??InvSymMtrx_3
   \   00000022   401C               ADD         R0,R0,#+1
   \                     ??InvSymMtrx_1:
   \   00000024   0090               STR         R0,[SP, #+0]
   \   00000026   0098               LDR         R0,[SP, #+0]
   \   00000028   0999               LDR         R1,[SP, #+36]
   \   0000002A   8842               CMP         R0,R1
   \   0000002C   2DDA               BGE         ??InvSymMtrx_4
   \   0000002E   0024               MOV         R4,#+0
   \                     ??InvSymMtrx_3:
   \   00000030   0098               LDR         R0,[SP, #+0]
   \   00000032   0999               LDR         R1,[SP, #+36]
   \   00000034   4843               MUL         R0,R1
   \   00000036   0019               ADD         R0,R0,R4
   \   00000038   C500               LSL         R5,R0,#+3
   \   0000003A   0798               LDR         R0,[SP, #+28]
   \   0000003C   4619               ADD         R6,R0,R5
   \   0000003E   081C               MOV         R0,R1
   \   00000040   6043               MUL         R0,R4
   \   00000042   0099               LDR         R1,[SP, #+0]
   \   00000044   4018               ADD         R0,R0,R1
   \   00000046   C700               LSL         R7,R0,#+3
   \   00000048   05AA               ADD         R2,SP,#+20
   \   0000004A   04B4               PUSH        {R2}
   \   0000004C   03CE               LDMIA       R6!,{R0,R1}
   \   0000004E   083E               SUB         R6,#+8
   \   00000050   089A               LDR         R2,[SP, #+32]
   \   00000052   D219               ADD         R2,R2,R7
   \   00000054   0CCA               LDMIA       R2!,{R2,R3}
   \   00000056   ........           _BLF        __dSub,??__dSub??rT
   \   0000005A   04BC               POP         {R2}
   \   0000005C   03C2               STMIA       R2!,{R0,R1}
   \   0000005E   05A8               ADD         R0,SP,#+20
   \   00000060   03C8               LDMIA       R0!,{R0,R1}
   \   00000062   ....               LDR         R2,??DataTable8    ;; 0xa0b5ed8d
   \   00000064   ....               LDR         R3,??DataTable11   ;; 0xbeb0c6f7
   \   00000066   ........           _BLF        __dLess,??__dLess??rT
   \   0000006A   0028               CMP         R0,#+0
   \   0000006C   07D1               BNE         ??InvSymMtrx_5
   \   0000006E   05A8               ADD         R0,SP,#+20
   \   00000070   03C8               LDMIA       R0!,{R0,R1}
   \   00000072   844A               LDR         R2,??InvSymMtrx_6  ;; 0xa0b5ed8e
   \   00000074   ....               LDR         R3,??DataTable9    ;; 0x3eb0c6f7
   \   00000076   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   0000007A   0028               CMP         R0,#+0
   \   0000007C   C4D0               BEQ         ??InvSymMtrx_2
   \                     ??InvSymMtrx_5:
   \   0000007E   099A               LDR         R2,[SP, #+36]
   \   00000080   0899               LDR         R1,[SP, #+32]
   \   00000082   0798               LDR         R0,[SP, #+28]
   \   00000084   ........           BL          ??InvMtrx
   \   00000088   FAE0               B           ??InvSymMtrx_7
    480                  }//for
    481              }//for
    482          
    483              for (i=0; i<len; i++)
   \                     ??InvSymMtrx_4:
   \   0000008A   0020               MOV         R0,#+0
   \   0000008C   1DE0               B           ??InvSymMtrx_8
    484              {
    485                  if ( (pmInv[i*len+i] < INF) && (pmInv[i*len+i] > -INF) )  // Ö÷ÔªÎªÁã
    486                  {
    487                      return InvMtrx(pmIn, pmInv, len);        // µ÷ÓÃÈ«Ñ¡Ö÷Ôª¸ßË¹ÇóÄæ
    488                  }
    489          
    490                  // ¼ÆËãµÚ(i, i)ÔªËØ
    491                  pmInv[i*len+i] = 1.0 / pmInv[i*len+i];
    492          
    493                  for (j=0; j<i; j++)
    494                  {
    495                      // ¼ÆËãÔªËØ(0,0)µ½(i-1, i-1)
    496                      for (k=0; k<=j; k++)
    497                      {
    498                          pmInv[j*len+k] -= pmInv[j*len+i] * pmInv[i*len+k] * pmInv[i*len+i];
    499                          pmInv[k*len+j]  = pmInv[j*len+k];        // Á½ÔªËØ¶Ô³Æ
    500                      }
    501          
    502                      // ¼ÆËãÔªËØ(0,i+1)µ½(i-1, len)¼°Õâ¸öÇøÓòµÄ¶Ô³ÆÔªËØ
    503                      for (k=i+1; k<len; k++)
    504                      {
    505                          pmInv[j*len+k] -=  pmInv[j*len+i] * pmInv[i*len+k] * pmInv[i*len+i];
    506                          pmInv[k*len+j]  = -pmInv[j*len+k];        // Á½ÔªËØ·´¶Ô³Æ
    507                      }
    508                  }//for
    509          
    510                  // ¼ÆËãÔªËØ(i+1,i+1)µ½(len, len)Õâ¸öÇøÓòÔªËØ
    511                   for ( j=i+1; j<len; j++)
    512                  {
    513                      for (k=j; k<len; k++)
    514                      {
    515                          pmInv[j*len+k] -= pmInv[j*len+i] * pmInv[i*len+k] * pmInv[i*len+i];
    516                          pmInv[k*len+j]  = pmInv[j*len+k];
    517                      }
    518                  }
    519          
    520                  // ¼ÆËã³ı(i, i)ÍâµÚiĞĞkÁĞÔªËØ¼°kĞĞiÁĞÔªËØ
    521                  for (k=0; k<i; k++)
    522                  {
    523                      pmInv[i*len+k] *= pmInv[i*len+i];
    524                      pmInv[k*len+i] =  pmInv[i*len+k];
    525                  }
    526                  for (k=i+1; k<len; k++)
    527                  {
    528                      pmInv[i*len+k] *=  pmInv[i*len+i];
   \                     ??InvSymMtrx_9:
   \   0000008E   0298               LDR         R0,[SP, #+8]
   \   00000090   4019               ADD         R0,R0,R5
   \   00000092   C000               LSL         R0,R0,#+3
   \   00000094   0899               LDR         R1,[SP, #+32]
   \   00000096   0C18               ADD         R4,R1,R0
   \   00000098   03CC               LDMIA       R4!,{R0,R1}
   \   0000009A   083C               SUB         R4,#+8
   \   0000009C   019A               LDR         R2,[SP, #+4]
   \   0000009E   0CCA               LDMIA       R2!,{R2,R3}
   \   000000A0   ........           _BLF        __dMul,??__dMul??rT
   \   000000A4   03C4               STMIA       R4!,{R0,R1}
   \   000000A6   083C               SUB         R4,#+8
    529                      pmInv[k*len+i] =  -pmInv[i*len+k];
   \   000000A8   0998               LDR         R0,[SP, #+36]
   \   000000AA   6843               MUL         R0,R5
   \   000000AC   0099               LDR         R1,[SP, #+0]
   \   000000AE   4018               ADD         R0,R0,R1
   \   000000B0   C000               LSL         R0,R0,#+3
   \   000000B2   0899               LDR         R1,[SP, #+32]
   \   000000B4   0A18               ADD         R2,R1,R0
   \   000000B6   03CC               LDMIA       R4!,{R0,R1}
   \   000000B8   8023               MOV         R3,#+128
   \   000000BA   1B06               LSL         R3,R3,#+24         ;; #-2147483648
   \   000000BC   5940               EOR         R1,R3
   \   000000BE   03C2               STMIA       R2!,{R0,R1}
    530                  }
   \   000000C0   6D1C               ADD         R5,R5,#+1
   \                     ??InvSymMtrx_10:
   \   000000C2   0998               LDR         R0,[SP, #+36]
   \   000000C4   8542               CMP         R5,R0
   \   000000C6   E2DB               BLT         ??InvSymMtrx_9
   \   000000C8   0398               LDR         R0,[SP, #+12]
   \                     ??InvSymMtrx_8:
   \   000000CA   0090               STR         R0,[SP, #+0]
   \   000000CC   0098               LDR         R0,[SP, #+0]
   \   000000CE   0999               LDR         R1,[SP, #+36]
   \   000000D0   8842               CMP         R0,R1
   \   000000D2   ....               BLT         .+5
   \   000000D4   D3E0               B           ??InvSymMtrx_11
   \   000000D6   4843               MUL         R0,R1
   \   000000D8   0290               STR         R0,[SP, #+8]
   \   000000DA   0099               LDR         R1,[SP, #+0]
   \   000000DC   4018               ADD         R0,R0,R1
   \   000000DE   C000               LSL         R0,R0,#+3
   \   000000E0   0899               LDR         R1,[SP, #+32]
   \   000000E2   0818               ADD         R0,R1,R0
   \   000000E4   0190               STR         R0,[SP, #+4]
   \   000000E6   03C8               LDMIA       R0!,{R0,R1}
   \   000000E8   ....               LDR         R2,??DataTable8    ;; 0xa0b5ed8d
   \   000000EA   ....               LDR         R3,??DataTable9    ;; 0x3eb0c6f7
   \   000000EC   ........           _BLF        __dLess,??__dLess??rT
   \   000000F0   0028               CMP         R0,#+0
   \   000000F2   07D0               BEQ         ??InvSymMtrx_12
   \   000000F4   0198               LDR         R0,[SP, #+4]
   \   000000F6   03C8               LDMIA       R0!,{R0,R1}
   \   000000F8   ....               LDR         R2,??DataTable10   ;; 0xa0b5ed8c
   \   000000FA   ....               LDR         R3,??DataTable11   ;; 0xbeb0c6f7
   \   000000FC   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000100   0028               CMP         R0,#+0
   \   00000102   BCD1               BNE         ??InvSymMtrx_5
   \                     ??InvSymMtrx_12:
   \   00000104   019C               LDR         R4,[SP, #+4]
   \   00000106   0020               MOV         R0,#+0
   \   00000108   ....               LDR         R1,??DataTable12   ;; 0x3ff00000
   \   0000010A   221C               MOV         R2,R4
   \   0000010C   0CCA               LDMIA       R2!,{R2,R3}
   \   0000010E   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000112   03C4               STMIA       R4!,{R0,R1}
   \   00000114   0026               MOV         R6,#+0
   \   00000116   2AE0               B           ??InvSymMtrx_13
   \                     ??InvSymMtrx_14:
   \   00000118   7819               ADD         R0,R7,R5
   \   0000011A   C000               LSL         R0,R0,#+3
   \   0000011C   0899               LDR         R1,[SP, #+32]
   \   0000011E   0C18               ADD         R4,R1,R0
   \   00000120   0498               LDR         R0,[SP, #+16]
   \   00000122   0CC8               LDMIA       R0!,{R2,R3}
   \   00000124   0298               LDR         R0,[SP, #+8]
   \   00000126   4019               ADD         R0,R0,R5
   \   00000128   C000               LSL         R0,R0,#+3
   \   0000012A   0818               ADD         R0,R1,R0
   \   0000012C   03C8               LDMIA       R0!,{R0,R1}
   \   0000012E   ........           _BLF        __dMul,??__dMul??rT
   \   00000132   021C               MOV         R2,R0
   \   00000134   0B1C               MOV         R3,R1
   \   00000136   0198               LDR         R0,[SP, #+4]
   \   00000138   03C8               LDMIA       R0!,{R0,R1}
   \   0000013A   ........           _BLF        __dMul,??__dMul??rT
   \   0000013E   021C               MOV         R2,R0
   \   00000140   0B1C               MOV         R3,R1
   \   00000142   03CC               LDMIA       R4!,{R0,R1}
   \   00000144   083C               SUB         R4,#+8
   \   00000146   ........           _BLF        __dSub,??__dSub??rT
   \   0000014A   03C4               STMIA       R4!,{R0,R1}
   \   0000014C   083C               SUB         R4,#+8
   \   0000014E   0998               LDR         R0,[SP, #+36]
   \   00000150   6843               MUL         R0,R5
   \   00000152   8019               ADD         R0,R0,R6
   \   00000154   C000               LSL         R0,R0,#+3
   \   00000156   0899               LDR         R1,[SP, #+32]
   \   00000158   0A18               ADD         R2,R1,R0
   \   0000015A   03CC               LDMIA       R4!,{R0,R1}
   \   0000015C   8023               MOV         R3,#+128
   \   0000015E   1B06               LSL         R3,R3,#+24         ;; #-2147483648
   \   00000160   5940               EOR         R1,R3
   \   00000162   03C2               STMIA       R2!,{R0,R1}
   \   00000164   6D1C               ADD         R5,R5,#+1
   \                     ??InvSymMtrx_15:
   \   00000166   0998               LDR         R0,[SP, #+36]
   \   00000168   8542               CMP         R5,R0
   \   0000016A   D5DB               BLT         ??InvSymMtrx_14
   \   0000016C   761C               ADD         R6,R6,#+1
   \                     ??InvSymMtrx_13:
   \   0000016E   0098               LDR         R0,[SP, #+0]
   \   00000170   401C               ADD         R0,R0,#+1
   \   00000172   0390               STR         R0,[SP, #+12]
   \   00000174   0098               LDR         R0,[SP, #+0]
   \   00000176   8642               CMP         R6,R0
   \   00000178   2FDA               BGE         ??InvSymMtrx_16
   \   0000017A   0024               MOV         R4,#+0
   \   0000017C   099F               LDR         R7,[SP, #+36]
   \   0000017E   7743               MUL         R7,R6
   \   00000180   3818               ADD         R0,R7,R0
   \   00000182   C000               LSL         R0,R0,#+3
   \   00000184   0899               LDR         R1,[SP, #+32]
   \   00000186   0818               ADD         R0,R1,R0
   \   00000188   0490               STR         R0,[SP, #+16]
   \                     ??InvSymMtrx_17:
   \   0000018A   3819               ADD         R0,R7,R4
   \   0000018C   C000               LSL         R0,R0,#+3
   \   0000018E   0899               LDR         R1,[SP, #+32]
   \   00000190   0D18               ADD         R5,R1,R0
   \   00000192   0498               LDR         R0,[SP, #+16]
   \   00000194   0CC8               LDMIA       R0!,{R2,R3}
   \   00000196   0298               LDR         R0,[SP, #+8]
   \   00000198   0019               ADD         R0,R0,R4
   \   0000019A   C000               LSL         R0,R0,#+3
   \   0000019C   0818               ADD         R0,R1,R0
   \   0000019E   03C8               LDMIA       R0!,{R0,R1}
   \   000001A0   ........           _BLF        __dMul,??__dMul??rT
   \   000001A4   021C               MOV         R2,R0
   \   000001A6   0B1C               MOV         R3,R1
   \   000001A8   0198               LDR         R0,[SP, #+4]
   \   000001AA   03C8               LDMIA       R0!,{R0,R1}
   \   000001AC   ........           _BLF        __dMul,??__dMul??rT
   \   000001B0   021C               MOV         R2,R0
   \   000001B2   0B1C               MOV         R3,R1
   \   000001B4   03CD               LDMIA       R5!,{R0,R1}
   \   000001B6   083D               SUB         R5,#+8
   \   000001B8   ........           _BLF        __dSub,??__dSub??rT
   \   000001BC   03C5               STMIA       R5!,{R0,R1}
   \   000001BE   083D               SUB         R5,#+8
   \   000001C0   0998               LDR         R0,[SP, #+36]
   \   000001C2   6043               MUL         R0,R4
   \   000001C4   8019               ADD         R0,R0,R6
   \   000001C6   C000               LSL         R0,R0,#+3
   \   000001C8   0899               LDR         R1,[SP, #+32]
   \   000001CA   0A18               ADD         R2,R1,R0
   \   000001CC   03CD               LDMIA       R5!,{R0,R1}
   \   000001CE   03C2               STMIA       R2!,{R0,R1}
   \   000001D0   641C               ADD         R4,R4,#+1
   \   000001D2   A642               CMP         R6,R4
   \   000001D4   D9DA               BGE         ??InvSymMtrx_17
   \   000001D6   039D               LDR         R5,[SP, #+12]
   \   000001D8   C5E7               B           ??InvSymMtrx_15
   \                     ??InvSymMtrx_16:
   \   000001DA   039C               LDR         R4,[SP, #+12]
   \   000001DC   2EE0               B           ??InvSymMtrx_18
   \                     ??InvSymMtrx_19:
   \   000001DE   251C               MOV         R5,R4
   \                     ??InvSymMtrx_20:
   \   000001E0   0998               LDR         R0,[SP, #+36]
   \   000001E2   6043               MUL         R0,R4
   \   000001E4   4119               ADD         R1,R0,R5
   \   000001E6   C900               LSL         R1,R1,#+3
   \   000001E8   089A               LDR         R2,[SP, #+32]
   \   000001EA   5618               ADD         R6,R2,R1
   \   000001EC   0099               LDR         R1,[SP, #+0]
   \   000001EE   4018               ADD         R0,R0,R1
   \   000001F0   C000               LSL         R0,R0,#+3
   \   000001F2   111C               MOV         R1,R2
   \   000001F4   1018               ADD         R0,R2,R0
   \   000001F6   0CC8               LDMIA       R0!,{R2,R3}
   \   000001F8   0298               LDR         R0,[SP, #+8]
   \   000001FA   4019               ADD         R0,R0,R5
   \   000001FC   C000               LSL         R0,R0,#+3
   \   000001FE   0818               ADD         R0,R1,R0
   \   00000200   03C8               LDMIA       R0!,{R0,R1}
   \   00000202   ........           _BLF        __dMul,??__dMul??rT
   \   00000206   021C               MOV         R2,R0
   \   00000208   0B1C               MOV         R3,R1
   \   0000020A   0198               LDR         R0,[SP, #+4]
   \   0000020C   03C8               LDMIA       R0!,{R0,R1}
   \   0000020E   ........           _BLF        __dMul,??__dMul??rT
   \   00000212   021C               MOV         R2,R0
   \   00000214   0B1C               MOV         R3,R1
   \   00000216   03CE               LDMIA       R6!,{R0,R1}
   \   00000218   083E               SUB         R6,#+8
   \   0000021A   ........           _BLF        __dSub,??__dSub??rT
   \   0000021E   03C6               STMIA       R6!,{R0,R1}
   \   00000220   083E               SUB         R6,#+8
   \   00000222   0998               LDR         R0,[SP, #+36]
   \   00000224   6843               MUL         R0,R5
   \   00000226   0019               ADD         R0,R0,R4
   \   00000228   C000               LSL         R0,R0,#+3
   \   0000022A   0899               LDR         R1,[SP, #+32]
   \   0000022C   0A18               ADD         R2,R1,R0
   \   0000022E   03CE               LDMIA       R6!,{R0,R1}
   \   00000230   03C2               STMIA       R2!,{R0,R1}
   \   00000232   6D1C               ADD         R5,R5,#+1
   \   00000234   0998               LDR         R0,[SP, #+36]
   \   00000236   8542               CMP         R5,R0
   \   00000238   D2DB               BLT         ??InvSymMtrx_20
   \   0000023A   641C               ADD         R4,R4,#+1
   \                     ??InvSymMtrx_18:
   \   0000023C   0998               LDR         R0,[SP, #+36]
   \   0000023E   8442               CMP         R4,R0
   \   00000240   CDDB               BLT         ??InvSymMtrx_19
   \   00000242   0024               MOV         R4,#+0
   \   00000244   16E0               B           ??InvSymMtrx_21
   \                     ??InvSymMtrx_22:
   \   00000246   0298               LDR         R0,[SP, #+8]
   \   00000248   0019               ADD         R0,R0,R4
   \   0000024A   C000               LSL         R0,R0,#+3
   \   0000024C   0899               LDR         R1,[SP, #+32]
   \   0000024E   0D18               ADD         R5,R1,R0
   \   00000250   03CD               LDMIA       R5!,{R0,R1}
   \   00000252   083D               SUB         R5,#+8
   \   00000254   019A               LDR         R2,[SP, #+4]
   \   00000256   0CCA               LDMIA       R2!,{R2,R3}
   \   00000258   ........           _BLF        __dMul,??__dMul??rT
   \   0000025C   03C5               STMIA       R5!,{R0,R1}
   \   0000025E   083D               SUB         R5,#+8
   \   00000260   0998               LDR         R0,[SP, #+36]
   \   00000262   6043               MUL         R0,R4
   \   00000264   0099               LDR         R1,[SP, #+0]
   \   00000266   4018               ADD         R0,R0,R1
   \   00000268   C000               LSL         R0,R0,#+3
   \   0000026A   0899               LDR         R1,[SP, #+32]
   \   0000026C   0A18               ADD         R2,R1,R0
   \   0000026E   03CD               LDMIA       R5!,{R0,R1}
   \   00000270   03C2               STMIA       R2!,{R0,R1}
   \   00000272   641C               ADD         R4,R4,#+1
   \                     ??InvSymMtrx_21:
   \   00000274   0098               LDR         R0,[SP, #+0]
   \   00000276   8442               CMP         R4,R0
   \   00000278   E5DB               BLT         ??InvSymMtrx_22
   \   0000027A   039D               LDR         R5,[SP, #+12]
   \   0000027C   21E7               B           ??InvSymMtrx_10
    531          
    532              }//for
    533          
    534              return OK;
   \                     ??InvSymMtrx_11:
   \   0000027E   0020               MOV         R0,#+0
   \                     ??InvSymMtrx_7:
   \   00000280   0AB0               ADD         SP,#+40
   \   00000282   ....               B           ?Subroutine7
   \                     ??InvSymMtrx_6:
   \   00000284   8EEDB5A0           DC32        0xa0b5ed8e
    535          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable0:
   \   00000000   8DEDB5A0           DC32        0xa0b5ed8d

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   F7C6B03E           DC32        0x3eb0c6f7

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   8CEDB5A0           DC32        0xa0b5ed8c

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   F7C6B0BE           DC32        0xbeb0c6f7

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   0000F03F           DC32        0x3ff00000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   8DEDB5A0           DC32        0xa0b5ed8d

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable9:
   \   00000000   F7C6B03E           DC32        0x3eb0c6f7

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   8CEDB5A0           DC32        0xa0b5ed8c

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable11:
   \   00000000   F7C6B0BE           DC32        0xbeb0c6f7

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   0000F03F           DC32        0x3ff00000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for errmsg>`:
   \   00000000   ............       DC32 `?<Constant "No error.">`, `?<Constant "Memeroy is not enough.">`
   \              ....        
   \   00000008   ........           DC32 `?<Constant "Matrix can\\'t be inver...">`

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "No error.">`:
   \   00000000   4E6F20657272       DC8 "No error."
   \              6F722E00    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Memeroy is not enough.">`:
   \   00000000   4D656D65726F       DC8 "Memeroy is not enough."
   \              79206973206E
   \              6F7420656E6F
   \              7567682E00  
   \   00000017   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Matrix can\\'t be inver...">`:
   \   00000000   4D6174726978       DC8 "Matrix can't be inversed."
   \              2063616E2774
   \              20626520696E
   \              766572736564
   \              2E00        
   \   0000001A   0000               DC8 0, 0
    536          

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     AddMatrix(void const *, void const *, void *, int, int)
                                       36
     InvMtrx(void const *, void *, int)
                                      216
     InvSymMtrx(void const *, void *, int)
                                       64
     MulMatrix(void const *, void const *, void *, int, int, int)
                                       36
     SubMatrix(void const *, void const *, void *, int, int)
                                       36
     SymMulMatrix(void const *, void const *, void *, int, int)
                                       36
     TranMatrix(void const *, void *, int, int)
                                       28


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     errmsg                           12
     AddMatrix(void const *, void const *, void *, int, int)
                                      62
     ?Subroutine7                      6
     SubMatrix(void const *, void const *, void *, int, int)
                                      60
     MulMatrix(void const *, void const *, void *, int, int, int)
                                     142
     SymMulMatrix(void const *, void const *, void *, int, int)
                                     148
     TranMatrix(void const *, void *, int, int)
                                      58
     InvMtrx(void const *, void *, int)
                                     676
     InvSymMtrx(void const *, void *, int)
                                     648
     ??DataTable0                      4
     ??DataTable1                      4
     ??DataTable2                      4
     ??DataTable3                      4
     ??DataTable4                      4
     ??DataTable8                      4
     ??DataTable9                      4
     ??DataTable10                     4
     ??DataTable11                     4
     ??DataTable12                     4
     ?<Initializer for errmsg>        12
     ?<Constant "No error.">          12
     ?<Constant "Memeroy is not enough.">
                                      24
     ?<Constant "Matrix can\'t be inver...">
                                      28
      Others                         164

 
 1 992 bytes in segment CODE
    64 bytes in segment DATA_C
    12 bytes in segment DATA_I
    12 bytes in segment DATA_ID
    12 bytes in segment INITTAB
 
 1 840 bytes of CODE  memory (+ 164 bytes shared)
    76 bytes of CONST memory
    12 bytes of DATA  memory

Errors: none
Warnings: none
