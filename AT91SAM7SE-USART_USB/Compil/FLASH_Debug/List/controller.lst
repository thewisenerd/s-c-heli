##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.31A/W32 EVALUATION    11/Jan/2016  07:18:30 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\pid\controller.c                            #
#    Command line    =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\pid\controller.c -lC                        #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\ -o H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6- #
#                       27ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»® #
#                       +LQR_2014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Deb #
#                       ug\Obj\ -z9 --debug --cpu_mode thumb --endian        #
#                       little --cpu ARM7TDMI --stack_align 4 --interwork    #
#                       -e --fpu None --ec++ --dlib_config                   #
#                       D:\IAREWE431\ARM\LIB\dl4tptinl8n.h -I                #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\srcIAR\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\src\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\ -I       #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\kalman\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pcm\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\spi\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\timer\ #
#                        -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27 #
#                       ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+L #
#                       QR_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pid\  #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\avcs\  #
#                       -I D:\IAREWE431\ARM\INC\                             #
#    List file       =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\controller.lst                                     #
#    Object file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Obj #
#                       \controller.r79                                      #
#                                                                            #
#                                                                            #
##############################################################################

H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-9\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2014_7_31\pid\controller.c
      1          #include <includs.h>
      2          
      3          //------------------------LQR parameter-----------------------//
      4          #define		Freq	30
      5          

   \                                 In segment DATA_Z, align 4, align-sorted
      6          double lastVelerrA1 = 0.0;
   \                     lastVelerrA1:
   \   00000000                      DS8 8

   \                                 In segment DATA_Z, align 4, align-sorted
      7          double lastVelerrB1 = 0.0;
   \                     lastVelerrB1:
   \   00000000                      DS8 8
      8          
      9          //double LQR_rollGain[3] = {0.5247, 0.0108, 2.6586};//5.16_1
     10          //double LQR_rollGain[3] = {0.8261,0.0071,1.1259};//5.16_2 Q=0.15
     11          //double LQR_rollGain[3] = {0.8222,0.0070,1.1192};//5.31_3 Q=0.1
     12          //double LQR_rollGain[3] = {0.8198,0.0070,1.1151};//5.31_4 Q=0.05
     13          //double LQR_rollGain[3] = {0.8191,0.0070,1.1138};//5.31_5 Q=0.01
     14          double LQR_rollGain[3] = {0.819,0.007,1.114};
     15          //double LQR_pitchGain[3] = {0.8887,0.0314,1.0379};//5.16_3 Q=0.1
     16          //double LQR_pitchGain[3] = {0.8858,0.0313,1.0342};//5.31_4 Q=0.05
     17          //double LQR_pitchGain[3] = {0.8848,0.0312,1.0330};//5.31_5 Q=0.01
     18          double LQR_pitchGain[3] = {0.685,0.031,0.533};
     19          //---------------------------------------------------------//
     20          
     21          double X_commend[2]; 

   \                                 In segment DATA_Z, align 4, align-sorted
     22          double Y_commend[2];
     23          double D_commends[2];
     24          
     25          double roll_commend[2];
     26          double pitch_commend[2];
     27          double yaw_commend[2]; 
     28          
     29          double X_feedback[2];
     30          double Y_feedback[2];
     31          double D_feedback[2];
     32          
     33          double roll_feedback[2];
     34          double pitch_feedback[2];
     35          double yaw_feedback[2];
     36          
     37          //parameters kp ki kd.
     38          double out_loop_X_PID[3];
   \                     out_loop_X_PID:
   \   00000000                      DS8 24
     39          double out_loop_Y_PID[3];
   \                     out_loop_Y_PID:
   \   00000018                      DS8 24
     40          double out_loop_D_PID[3];
   \                     out_loop_D_PID:
   \   00000030                      DS8 24
   \                     Y_commend:
   \   00000048                      DS8 16
   \                     D_commends:
   \   00000058                      DS8 16

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     X_feedback:
   \   00000000                      DS8 16
   \                     Y_feedback:
   \   00000010                      DS8 16
   \                     D_feedback:
   \   00000020                      DS8 16

   \                                 In segment DATA_Z, align 4, align-sorted
     41          
     42          double in_loop_roll_PID[3];
   \                     in_loop_roll_PID:
   \   00000000                      DS8 24
     43          double in_loop_pitch_PID[3];
   \                     in_loop_pitch_PID:
   \   00000018                      DS8 24
     44          double in_loop_yaw_PID[3];
   \                     in_loop_yaw_PID:
   \   00000030                      DS8 24
   \                     yaw_feedback:
   \   00000048                      DS8 16
     45          
     46          
     47          struct limits
     48          {
     49          	double ProErrorLimits[2];
     50          	double VelErrorLimits[2];
     51          	double IntStateLimits[2];
     52          	double OutErrorLimits[2];
     53          	
     54          	double int_state;

   \                                 In segment DATA_Z, align 4, align-sorted
     55          } X_limits,Y_limits,D_limits,roll_limits,pitch_limits,yaw_limits;
   \                     X_limits:
   \   00000000                      DS8 72

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     Y_limits:
   \   00000000                      DS8 72

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     D_limits:
   \   00000000                      DS8 72

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     roll_limits:
   \   00000000                      DS8 72

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     pitch_limits:
   \   00000000                      DS8 72

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     yaw_limits:
   \   00000000                      DS8 72

   \                                 In segment DATA_I, align 4, align-sorted
     56          
     57          double outputs[4];
   \                     outputs:
   \   00000000                      DS8 32
   \   00000020                      REQUIRE `?<Initializer for outputs>`
   \                     X_commend:
   \   00000020                      DS8 16
   \   00000030                      REQUIRE `?<Initializer for X_commend>`
   \                     roll_commend:
   \   00000030                      DS8 16
   \   00000040                      REQUIRE `?<Initializer for roll_commend>`
   \                     pitch_commend:
   \   00000040                      DS8 16
   \   00000050                      REQUIRE `?<Initializer for pitch_commend>`
   \                     yaw_commend:
   \   00000050                      DS8 16
   \   00000060                      REQUIRE `?<Initializer for yaw_commend>`
   \                     roll_feedback:
   \   00000060                      DS8 16
   \   00000070                      REQUIRE `?<Initializer for roll_feedback>`
   \                     pitch_feedback:
   \   00000070                      DS8 16
   \   00000080                      REQUIRE `?<Initializer for pitch_feedback>`
   \                     LQR_rollGain:
   \   00000080                      DS8 24
   \   00000098                      REQUIRE `?<Initializer for LQR_rollGain>`
   \                     LQR_pitchGain:
   \   00000098                      DS8 24
   \   000000B0                      REQUIRE `?<Initializer for LQR_pitchGain>`
     58          

   \                                 In segment CODE, align 4, keep-with-next
     59          double PID_step(	const double commend[2],
     60                                  const double feedback[2],
     61                                  const double PID_gain[3], 
     62                                  struct limits *lim	)
     63          {        
   \                     ??PID_step:
   \   00000000   F5B5               PUSH        {R0,R2,R4-R7,LR}
   \   00000002   86B0               SUB         SP,#+24
   \   00000004   0F1C               MOV         R7,R1
   \   00000006   1E1C               MOV         R6,R3
     64          	double err = limit((commend[0] - feedback[0]),lim->ProErrorLimits[0],
     65          						lim->ProErrorLimits[1]);
   \   00000008   181C               MOV         R0,R3
   \   0000000A   0830               ADD         R0,#+8
   \   0000000C   03C8               LDMIA       R0!,{R0,R1}
   \   0000000E   03B4               PUSH        {R0,R1}
   \   00000010   0CCE               LDMIA       R6!,{R2,R3}
   \   00000012   083E               SUB         R6,#+8
   \   00000014   141C               MOV         R4,R2
   \   00000016   1D1C               MOV         R5,R3
   \   00000018   0898               LDR         R0,[SP, #+32]
   \   0000001A   03C8               LDMIA       R0!,{R0,R1}
   \   0000001C   0CCF               LDMIA       R7!,{R2,R3}
   \   0000001E   ........           _BLF        __dSub,??__dSub??rT
   \   00000022   221C               MOV         R2,R4
   \   00000024   2B1C               MOV         R3,R5
   \   00000026   ........           _BLF        ??limit,??limit??rT
   \   0000002A   02AA               ADD         R2,SP,#+8
   \   0000002C   03C2               STMIA       R2!,{R0,R1}
     66          
     67          	double velerr = limit((commend[1] - feedback[1]),lim->VelErrorLimits[0],
     68          						lim->VelErrorLimits[1]);
   \   0000002E   301C               MOV         R0,R6
   \   00000030   1830               ADD         R0,#+24
   \   00000032   03C8               LDMIA       R0!,{R0,R1}
   \   00000034   03B4               PUSH        {R0,R1}
   \   00000036   301C               MOV         R0,R6
   \   00000038   1030               ADD         R0,#+16
   \   0000003A   0CC8               LDMIA       R0!,{R2,R3}
   \   0000003C   141C               MOV         R4,R2
   \   0000003E   1D1C               MOV         R5,R3
   \   00000040   0A98               LDR         R0,[SP, #+40]
   \   00000042   0830               ADD         R0,#+8
   \   00000044   03C8               LDMIA       R0!,{R0,R1}
   \   00000046   0CCF               LDMIA       R7!,{R2,R3}
   \   00000048   ........           _BLF        __dSub,??__dSub??rT
   \   0000004C   221C               MOV         R2,R4
   \   0000004E   2B1C               MOV         R3,R5
   \   00000050   ........           _BLF        ??limit,??limit??rT
   \   00000054   041C               MOV         R4,R0
   \   00000056   0D1C               MOV         R5,R1
     69          	
     70                  //NOTE HERE: PID_gain[0] is KP,PID_gain[2] is KD, PID_gain[1] is KI
     71          	double result = 0.0 +PID_gain[0]*err+PID_gain[2]*velerr
     72          			+PID_gain[1]*(lim->int_state); 
   \   00000058   06AA               ADD         R2,SP,#+24
   \   0000005A   306C               LDR         R0,[R6, #+64]
   \   0000005C   716C               LDR         R1,[R6, #+68]
   \   0000005E   03C2               STMIA       R2!,{R0,R1}
   \   00000060   08AF               ADD         R7,SP,#+32
   \   00000062   0B98               LDR         R0,[SP, #+44]
   \   00000064   0830               ADD         R0,#+8
   \   00000066   0CC8               LDMIA       R0!,{R2,R3}
   \   00000068   06A8               ADD         R0,SP,#+24
   \   0000006A   03C8               LDMIA       R0!,{R0,R1}
   \   0000006C   ........           _BLF        __dMul,??__dMul??rT
   \   00000070   03B4               PUSH        {R0,R1}
   \   00000072   0D98               LDR         R0,[SP, #+52]
   \   00000074   1030               ADD         R0,#+16
   \   00000076   03C8               LDMIA       R0!,{R0,R1}
   \   00000078   221C               MOV         R2,R4
   \   0000007A   2B1C               MOV         R3,R5
   \   0000007C   ........           _BLF        __dMul,??__dMul??rT
   \   00000080   041C               MOV         R4,R0
   \   00000082   0D1C               MOV         R5,R1
   \   00000084   0D98               LDR         R0,[SP, #+52]
   \   00000086   0CC8               LDMIA       R0!,{R2,R3}
   \   00000088   06A8               ADD         R0,SP,#+24
   \   0000008A   03C8               LDMIA       R0!,{R0,R1}
   \   0000008C   ........           _BLF        __dMul,??__dMul??rT
   \   00000090   221C               MOV         R2,R4
   \   00000092   2B1C               MOV         R3,R5
   \   00000094   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000098   0CBC               POP         {R2,R3}
   \   0000009A   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000009E   03C7               STMIA       R7!,{R0,R1}
     73          	
     74          	lim->int_state = limit(	lim->int_state + err*dt,
     75          			        lim->IntStateLimits[0],
     76                                          lim->IntStateLimits[1]	);
   \   000000A0   301C               MOV         R0,R6
   \   000000A2   2830               ADD         R0,#+40
   \   000000A4   03C8               LDMIA       R0!,{R0,R1}
   \   000000A6   03B4               PUSH        {R0,R1}
   \   000000A8   301C               MOV         R0,R6
   \   000000AA   2030               ADD         R0,#+32
   \   000000AC   0CC8               LDMIA       R0!,{R2,R3}
   \   000000AE   141C               MOV         R4,R2
   \   000000B0   1D1C               MOV         R5,R3
   \   000000B2   06A8               ADD         R0,SP,#+24
   \   000000B4   03C8               LDMIA       R0!,{R0,R1}
   \   000000B6   0E4A               LDR         R2,??PID_step_1    ;; 0x37f38c54
   \   000000B8   0E4B               LDR         R3,??PID_step_1+0x4  ;; 0x3fa110a1
   \   000000BA   ........           _BLF        __dMul,??__dMul??rT
   \   000000BE   021C               MOV         R2,R0
   \   000000C0   0B1C               MOV         R3,R1
   \   000000C2   08A8               ADD         R0,SP,#+32
   \   000000C4   03C8               LDMIA       R0!,{R0,R1}
   \   000000C6   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000CA   221C               MOV         R2,R4
   \   000000CC   2B1C               MOV         R3,R5
   \   000000CE   ........           _BLF        ??limit,??limit??rT
   \   000000D2   3064               STR         R0,[R6, #+64]
   \   000000D4   7164               STR         R1,[R6, #+68]
     77          	return limit(result,
     78          				 lim->OutErrorLimits[0],
     79          				 lim->OutErrorLimits[1]);
   \   000000D6   301C               MOV         R0,R6
   \   000000D8   3830               ADD         R0,#+56
   \   000000DA   03C8               LDMIA       R0!,{R0,R1}
   \   000000DC   03B4               PUSH        {R0,R1}
   \   000000DE   3036               ADD         R6,#+48
   \   000000E0   0CCE               LDMIA       R6!,{R2,R3}
   \   000000E2   0CA8               ADD         R0,SP,#+48
   \   000000E4   03C8               LDMIA       R0!,{R0,R1}
   \   000000E6   ........           _BLF        ??limit,??limit??rT
   \   000000EA   10B0               ADD         SP,#+64
   \   000000EC   ....               B           ?Subroutine14
   \   000000EE   C046               NOP         
   \                     ??PID_step_1:
   \   000000F0   548CF337           DC32        0x37f38c54
   \   000000F4   A110A13F           DC32        0x3fa110a1
     80          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine14:
   \   00000000   F0BC               POP         {R4-R7}
   \   00000002   04BC               POP         {R2}
   \   00000004   1047               BX          R2                 ;; return
   \   00000006   C046               NOP         
   \                     ??Subroutine14_0:
   \   00000008   ........           DC32        lastVelerrA1
   \   0000000C   85EB51B8           DC32        0xb851eb85
   \   00000010   1EAD7A40           DC32        0x407aad1e
     81          

   \                                 In segment CODE, align 4, keep-with-next
     82          void set_limits()
     83          {
   \                     ??set_limits:
   \   00000000   F0B4               PUSH        {R4-R7}
     84          	//--------X ÖáÏÞ·ù-----------
     85              X_limits.ProErrorLimits[0] = -8.0;
   \   00000002   ....               LDR         R4,??DataTable0    ;; X_limits
   \   00000004   0020               MOV         R0,#+0
   \   00000006   5E49               LDR         R1,??set_limits_1  ;; 0xc0200000
   \   00000008   03C4               STMIA       R4!,{R0,R1}
   \   0000000A   083C               SUB         R4,#+8
   \   0000000C   221C               MOV         R2,R4
   \   0000000E   0832               ADD         R2,#+8
   \   00000010   5C49               LDR         R1,??set_limits_1+0x4  ;; 0x40200000
   \   00000012   03C2               STMIA       R2!,{R0,R1}
   \   00000014   221C               MOV         R2,R4
   \   00000016   1032               ADD         R2,#+16
   \   00000018   5B49               LDR         R1,??set_limits_1+0x8  ;; 0xc0240000
   \   0000001A   03C2               STMIA       R2!,{R0,R1}
   \   0000001C   221C               MOV         R2,R4
   \   0000001E   1832               ADD         R2,#+24
   \   00000020   5A49               LDR         R1,??set_limits_1+0xC  ;; 0x40240000
   \   00000022   03C2               STMIA       R2!,{R0,R1}
   \   00000024   221C               MOV         R2,R4
   \   00000026   2032               ADD         R2,#+32
   \   00000028   C021               MOV         R1,#+192
   \   0000002A   0906               LSL         R1,R1,#+24         ;; #-1073741824
   \   0000002C   03C2               STMIA       R2!,{R0,R1}
     86          	X_limits.ProErrorLimits[1] =  8.0;
     87          	X_limits.VelErrorLimits[0] = -10.0; 
     88          	X_limits.VelErrorLimits[1] =  10.0;
     89          	X_limits.IntStateLimits[0] = -2.0;
     90          	X_limits.IntStateLimits[1] =  2.0;
   \   0000002E   4942               NEG         R1,R1
   \   00000030   221C               MOV         R2,R4
   \   00000032   2832               ADD         R2,#+40
   \   00000034   03C2               STMIA       R2!,{R0,R1}
     91          	X_limits.OutErrorLimits[0] = -0.255;//rad 
   \   00000036   564E               LDR         R6,??set_limits_1+0x10  ;; 0x851eb852
   \   00000038   564F               LDR         R7,??set_limits_1+0x14  ;; 0xbfd051eb
   \   0000003A   221C               MOV         R2,R4
   \   0000003C   3032               ADD         R2,#+48
   \   0000003E   C0C2               STMIA       R2!,{R6,R7}
   \   00000040   3834               ADD         R4,#+56
   \   00000042   321C               MOV         R2,R6
   \   00000044   544B               LDR         R3,??set_limits_1+0x18  ;; 0x3fd051eb
   \   00000046   0CC4               STMIA       R4!,{R2,R3}
     92          	X_limits.OutErrorLimits[1] =  0.255;
     93          	
     94                  //--------Y ÖáÏÞ·ù-----------
     95          	Y_limits.ProErrorLimits[0] = -8.0;
   \   00000048   ....               LDR         R4,??DataTable1    ;; Y_limits
   \   0000004A   0022               MOV         R2,#+0
   \   0000004C   4C4B               LDR         R3,??set_limits_1  ;; 0xc0200000
   \   0000004E   0CC4               STMIA       R4!,{R2,R3}
   \   00000050   083C               SUB         R4,#+8
     96          	Y_limits.ProErrorLimits[1] =  8.0;
   \   00000052   251C               MOV         R5,R4
   \   00000054   0835               ADD         R5,#+8
   \   00000056   4B4B               LDR         R3,??set_limits_1+0x4  ;; 0x40200000
   \   00000058   0CC5               STMIA       R5!,{R2,R3}
     97          	Y_limits.VelErrorLimits[0] = -10.0; 
   \   0000005A   251C               MOV         R5,R4
   \   0000005C   1035               ADD         R5,#+16
   \   0000005E   4A4B               LDR         R3,??set_limits_1+0x8  ;; 0xc0240000
   \   00000060   0CC5               STMIA       R5!,{R2,R3}
     98          	Y_limits.VelErrorLimits[1] =  10.0;
   \   00000062   251C               MOV         R5,R4
   \   00000064   1835               ADD         R5,#+24
   \   00000066   494B               LDR         R3,??set_limits_1+0xC  ;; 0x40240000
   \   00000068   0CC5               STMIA       R5!,{R2,R3}
     99          	Y_limits.IntStateLimits[0] = -2.0;
   \   0000006A   251C               MOV         R5,R4
   \   0000006C   2035               ADD         R5,#+32
   \   0000006E   C023               MOV         R3,#+192
   \   00000070   1B06               LSL         R3,R3,#+24         ;; #-1073741824
   \   00000072   0CC5               STMIA       R5!,{R2,R3}
    100          	Y_limits.IntStateLimits[1] =  2.0;
   \   00000074   221C               MOV         R2,R4
   \   00000076   2832               ADD         R2,#+40
   \   00000078   03C2               STMIA       R2!,{R0,R1}
    101          	Y_limits.OutErrorLimits[0] = -0.255;//rad 
   \   0000007A   221C               MOV         R2,R4
   \   0000007C   3032               ADD         R2,#+48
   \   0000007E   C0C2               STMIA       R2!,{R6,R7}
    102          	Y_limits.OutErrorLimits[1] =  0.255;
   \   00000080   3834               ADD         R4,#+56
   \   00000082   321C               MOV         R2,R6
   \   00000084   444B               LDR         R3,??set_limits_1+0x18  ;; 0x3fd051eb
   \   00000086   0CC4               STMIA       R4!,{R2,R3}
    103          	
    104                  //-----Z ÖáÏÞ·ù-------------
    105          	D_limits.ProErrorLimits[0] =-5.0;      //  ÏÞ¶¨²»ÄÜÌ«´ó£¬·ñÔòÉÏÉýËÙ¶È¹ý´ó;
   \   00000088   ....               LDR         R4,??DataTable2    ;; D_limits
   \   0000008A   021C               MOV         R2,R0
   \   0000008C   434B               LDR         R3,??set_limits_1+0x1C  ;; 0xc0140000
   \   0000008E   0CC4               STMIA       R4!,{R2,R3}
   \   00000090   083C               SUB         R4,#+8
    106          	D_limits.ProErrorLimits[1] = 5.0;      //  8m ÏÞ¶¨¿ÉÒÔ´ïµ½3m/sËÙ¶È£¬Ì«¿ì£»
   \   00000092   251C               MOV         R5,R4
   \   00000094   0835               ADD         R5,#+8
   \   00000096   424B               LDR         R3,??set_limits_1+0x20  ;; 0x40140000
   \   00000098   0CC5               STMIA       R5!,{R2,R3}
    107          	D_limits.VelErrorLimits[0] = -8.0; 
   \   0000009A   251C               MOV         R5,R4
   \   0000009C   1035               ADD         R5,#+16
   \   0000009E   384B               LDR         R3,??set_limits_1  ;; 0xc0200000
   \   000000A0   0CC5               STMIA       R5!,{R2,R3}
    108          	D_limits.VelErrorLimits[1] =  8.0;
   \   000000A2   251C               MOV         R5,R4
   \   000000A4   1835               ADD         R5,#+24
   \   000000A6   374B               LDR         R3,??set_limits_1+0x4  ;; 0x40200000
   \   000000A8   0CC5               STMIA       R5!,{R2,R3}
    109          	D_limits.IntStateLimits[0] = -2.0;
   \   000000AA   251C               MOV         R5,R4
   \   000000AC   2035               ADD         R5,#+32
   \   000000AE   C023               MOV         R3,#+192
   \   000000B0   1B06               LSL         R3,R3,#+24         ;; #-1073741824
   \   000000B2   0CC5               STMIA       R5!,{R2,R3}
    110          	D_limits.IntStateLimits[1] =  2.0;
   \   000000B4   221C               MOV         R2,R4
   \   000000B6   2832               ADD         R2,#+40
   \   000000B8   03C2               STMIA       R2!,{R0,R1}
    111          	D_limits.OutErrorLimits[0] = -10;//pwm without mutiply amplify(48) 
   \   000000BA   221C               MOV         R2,R4
   \   000000BC   3032               ADD         R2,#+48
   \   000000BE   3249               LDR         R1,??set_limits_1+0x8  ;; 0xc0240000
   \   000000C0   03C2               STMIA       R2!,{R0,R1}
    112          	D_limits.OutErrorLimits[1] =  10;
   \   000000C2   3834               ADD         R4,#+56
   \   000000C4   3149               LDR         R1,??set_limits_1+0xC  ;; 0x40240000
   \   000000C6   03C4               STMIA       R4!,{R0,R1}
    113          	
    114                  //------roll ÏÞ·ù-----------
    115          	roll_limits.ProErrorLimits[0] = -20.0*C_DEG2RAD;
   \   000000C8   ....               LDR         R4,??DataTable3    ;; roll_limits
   \   000000CA   364E               LDR         R6,??set_limits_1+0x24  ;; 0x4ae74487
   \   000000CC   364F               LDR         R7,??set_limits_1+0x28  ;; 0xbfd65718
   \   000000CE   C0C4               STMIA       R4!,{R6,R7}
   \   000000D0   083C               SUB         R4,#+8
    116          	roll_limits.ProErrorLimits[1] =  20.0*C_DEG2RAD;
   \   000000D2   301C               MOV         R0,R6
   \   000000D4   3549               LDR         R1,??set_limits_1+0x2C  ;; 0x3fd65718
   \   000000D6   221C               MOV         R2,R4
   \   000000D8   0832               ADD         R2,#+8
   \   000000DA   03C2               STMIA       R2!,{R0,R1}
    117          	roll_limits.VelErrorLimits[0] = -20.0*C_DEG2RAD;//ÄÚ»·Î¢·ÖÏîÏÞ·ù
   \   000000DC   221C               MOV         R2,R4
   \   000000DE   1032               ADD         R2,#+16
   \   000000E0   C0C2               STMIA       R2!,{R6,R7}
    118          	roll_limits.VelErrorLimits[1] =  20.0*C_DEG2RAD;
   \   000000E2   221C               MOV         R2,R4
   \   000000E4   1832               ADD         R2,#+24
   \   000000E6   03C2               STMIA       R2!,{R0,R1}
   \   000000E8   251C               MOV         R5,R4
   \   000000EA   2035               ADD         R5,#+32
   \   000000EC   304A               LDR         R2,??set_limits_1+0x30  ;; 0xc2c98977
   \   000000EE   314B               LDR         R3,??set_limits_1+0x34  ;; 0xbf857254
   \   000000F0   0CC5               STMIA       R5!,{R2,R3}
   \   000000F2   251C               MOV         R5,R4
   \   000000F4   2835               ADD         R5,#+40
   \   000000F6   304B               LDR         R3,??set_limits_1+0x38  ;; 0x3f857254
   \   000000F8   0CC5               STMIA       R5!,{R2,R3}
    119          	roll_limits.IntStateLimits[0] = - 0.6*C_DEG2RAD;
    120          	roll_limits.IntStateLimits[1] =   0.6*C_DEG2RAD;
    121          	roll_limits.OutErrorLimits[0] = -20.0*C_DEG2RAD;
   \   000000FA   221C               MOV         R2,R4
   \   000000FC   3032               ADD         R2,#+48
   \   000000FE   C0C2               STMIA       R2!,{R6,R7}
    122          	roll_limits.OutErrorLimits[1] =  20.0*C_DEG2RAD;
   \   00000100   3834               ADD         R4,#+56
   \   00000102   03C4               STMIA       R4!,{R0,R1}
    123                  
    124                  
    125                  //------pitch ÏÞ·ù-----------
    126          	pitch_limits.ProErrorLimits[0] = -20.0*C_DEG2RAD;
   \   00000104   ....               LDR         R4,??DataTable17   ;; pitch_limits
   \   00000106   C0C4               STMIA       R4!,{R6,R7}
   \   00000108   083C               SUB         R4,#+8
    127          	pitch_limits.ProErrorLimits[1] =  20.0*C_DEG2RAD;
   \   0000010A   221C               MOV         R2,R4
   \   0000010C   0832               ADD         R2,#+8
   \   0000010E   03C2               STMIA       R2!,{R0,R1}
    128          	pitch_limits.VelErrorLimits[0] = -20.0*C_DEG2RAD;
   \   00000110   221C               MOV         R2,R4
   \   00000112   1032               ADD         R2,#+16
   \   00000114   C0C2               STMIA       R2!,{R6,R7}
    129          	pitch_limits.VelErrorLimits[1] =  20.0*C_DEG2RAD;
   \   00000116   221C               MOV         R2,R4
   \   00000118   1832               ADD         R2,#+24
   \   0000011A   03C2               STMIA       R2!,{R0,R1}
    130          	pitch_limits.IntStateLimits[0] = - 0.6*C_DEG2RAD;
   \   0000011C   251C               MOV         R5,R4
   \   0000011E   2035               ADD         R5,#+32
   \   00000120   234A               LDR         R2,??set_limits_1+0x30  ;; 0xc2c98977
   \   00000122   244B               LDR         R3,??set_limits_1+0x34  ;; 0xbf857254
   \   00000124   0CC5               STMIA       R5!,{R2,R3}
    131          	pitch_limits.IntStateLimits[1] =   0.6*C_DEG2RAD;
   \   00000126   251C               MOV         R5,R4
   \   00000128   2835               ADD         R5,#+40
   \   0000012A   234B               LDR         R3,??set_limits_1+0x38  ;; 0x3f857254
   \   0000012C   0CC5               STMIA       R5!,{R2,R3}
    132          	pitch_limits.OutErrorLimits[0] = -20.0*C_DEG2RAD;
   \   0000012E   221C               MOV         R2,R4
   \   00000130   3032               ADD         R2,#+48
   \   00000132   C0C2               STMIA       R2!,{R6,R7}
    133          	pitch_limits.OutErrorLimits[1] =  20.0*C_DEG2RAD;
   \   00000134   3834               ADD         R4,#+56
   \   00000136   03C4               STMIA       R4!,{R0,R1}
    134                  
    135                  //------yaw ÏÞ·ù-----------
    136          	yaw_limits.ProErrorLimits[0] = -30.0*C_DEG2RAD;
   \   00000138   ....               LDR         R4,??DataTable18   ;; yaw_limits
   \   0000013A   204E               LDR         R6,??set_limits_1+0x3C  ;; 0x382d7365
   \   0000013C   204F               LDR         R7,??set_limits_1+0x40  ;; 0xbfe0c152
   \   0000013E   C0C4               STMIA       R4!,{R6,R7}
   \   00000140   083C               SUB         R4,#+8
    137          	yaw_limits.ProErrorLimits[1] =  30.0*C_DEG2RAD;
   \   00000142   301C               MOV         R0,R6
   \   00000144   1F49               LDR         R1,??set_limits_1+0x44  ;; 0x3fe0c152
   \   00000146   221C               MOV         R2,R4
   \   00000148   0832               ADD         R2,#+8
   \   0000014A   03C2               STMIA       R2!,{R0,R1}
    138          	yaw_limits.VelErrorLimits[0] = -100.0*C_DEG2RAD;
   \   0000014C   251C               MOV         R5,R4
   \   0000014E   1035               ADD         R5,#+16
   \   00000150   1D4A               LDR         R2,??set_limits_1+0x48  ;; 0x5da115a9
   \   00000152   1E4B               LDR         R3,??set_limits_1+0x4C  ;; 0xbffbecde
   \   00000154   0CC5               STMIA       R5!,{R2,R3}
    139          	yaw_limits.VelErrorLimits[1] =  100.0*C_DEG2RAD;
   \   00000156   251C               MOV         R5,R4
   \   00000158   1835               ADD         R5,#+24
   \   0000015A   1D4B               LDR         R3,??set_limits_1+0x50  ;; 0x3ffbecde
   \   0000015C   0CC5               STMIA       R5!,{R2,R3}
    140          	yaw_limits.IntStateLimits[0] = -90.0*C_DEG2RAD;
   \   0000015E   251C               MOV         R5,R4
   \   00000160   2035               ADD         R5,#+32
   \   00000162   1C4A               LDR         R2,??set_limits_1+0x54  ;; 0x54442d18
   \   00000164   1C4B               LDR         R3,??set_limits_1+0x58  ;; 0xbff921fb
   \   00000166   0CC5               STMIA       R5!,{R2,R3}
    141          	yaw_limits.IntStateLimits[1] =  90.0*C_DEG2RAD;
   \   00000168   251C               MOV         R5,R4
   \   0000016A   2835               ADD         R5,#+40
   \   0000016C   1B4B               LDR         R3,??set_limits_1+0x5C  ;; 0x3ff921fb
   \   0000016E   0CC5               STMIA       R5!,{R2,R3}
    142          	yaw_limits.OutErrorLimits[0] = -30.0*C_DEG2RAD;
   \   00000170   221C               MOV         R2,R4
   \   00000172   3032               ADD         R2,#+48
   \   00000174   C0C2               STMIA       R2!,{R6,R7}
    143          	yaw_limits.OutErrorLimits[1] =  30.0*C_DEG2RAD;
   \   00000176   3834               ADD         R4,#+56
   \   00000178   03C4               STMIA       R4!,{R0,R1}
    144          }
   \   0000017A   F0BC               POP         {R4-R7}
   \   0000017C   7047               BX          LR                 ;; return
   \   0000017E   C046               NOP         
   \                     ??set_limits_1:
   \   00000180   000020C0           DC32        0xc0200000
   \   00000184   00002040           DC32        0x40200000
   \   00000188   000024C0           DC32        0xc0240000
   \   0000018C   00002440           DC32        0x40240000
   \   00000190   52B81E85           DC32        0x851eb852
   \   00000194   EB51D0BF           DC32        0xbfd051eb
   \   00000198   EB51D03F           DC32        0x3fd051eb
   \   0000019C   000014C0           DC32        0xc0140000
   \   000001A0   00001440           DC32        0x40140000
   \   000001A4   8744E74A           DC32        0x4ae74487
   \   000001A8   1857D6BF           DC32        0xbfd65718
   \   000001AC   1857D63F           DC32        0x3fd65718
   \   000001B0   7789C9C2           DC32        0xc2c98977
   \   000001B4   547285BF           DC32        0xbf857254
   \   000001B8   5472853F           DC32        0x3f857254
   \   000001BC   65732D38           DC32        0x382d7365
   \   000001C0   52C1E0BF           DC32        0xbfe0c152
   \   000001C4   52C1E03F           DC32        0x3fe0c152
   \   000001C8   A915A15D           DC32        0x5da115a9
   \   000001CC   DEECFBBF           DC32        0xbffbecde
   \   000001D0   DEECFB3F           DC32        0x3ffbecde
   \   000001D4   182D4454           DC32        0x54442d18
   \   000001D8   FB21F9BF           DC32        0xbff921fb
   \   000001DC   FB21F93F           DC32        0x3ff921fb

   \                                 In segment CODE, align 4, keep-with-next
    145          void set_init_state()
    146          {
    147             	X_limits.int_state = 0.0;
   \                     ??set_init_state:
   \   00000000   0020               MOV         R0,#+0
   \   00000002   0021               MOV         R1,#+0
   \   00000004   064A               LDR         R2,??set_init_state_1  ;; X_limits + 64
   \   00000006   03C2               STMIA       R2!,{R0,R1}
    148          	Y_limits.int_state = 0.0;
   \   00000008   064A               LDR         R2,??set_init_state_1+0x4  ;; Y_limits + 64
   \   0000000A   03C2               STMIA       R2!,{R0,R1}
    149          	D_limits.int_state = 0.0;
   \   0000000C   064A               LDR         R2,??set_init_state_1+0x8  ;; D_limits + 64
   \   0000000E   03C2               STMIA       R2!,{R0,R1}
    150          	roll_limits.int_state = 0.0;
   \   00000010   064A               LDR         R2,??set_init_state_1+0xC  ;; roll_limits + 64
   \   00000012   03C2               STMIA       R2!,{R0,R1}
    151          	pitch_limits.int_state = 0.0;
   \   00000014   064A               LDR         R2,??set_init_state_1+0x10  ;; pitch_limits + 64
   \   00000016   03C2               STMIA       R2!,{R0,R1}
    152          	yaw_limits.int_state = 0.0;  
   \   00000018   064A               LDR         R2,??set_init_state_1+0x14  ;; yaw_limits + 64
   \   0000001A   03C2               STMIA       R2!,{R0,R1}
    153          }
   \   0000001C   7047               BX          LR                 ;; return
   \   0000001E   C046               NOP         
   \                     ??set_init_state_1:
   \   00000020   ........           DC32        X_limits + 64
   \   00000024   ........           DC32        Y_limits + 64
   \   00000028   ........           DC32        D_limits + 64
   \   0000002C   ........           DC32        roll_limits + 64
   \   00000030   ........           DC32        pitch_limits + 64
   \   00000034   ........           DC32        yaw_limits + 64

   \                                 In segment CODE, align 4, keep-with-next
    154          void reset_controller()
    155          {
   \                     ??reset_controller:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
    156          	//set the default target_commend; in hover state
    157          	X_commend[0] = 0.0;
   \   00000002   ....               LDR         R2,??DataTable12   ;; outputs
   \   00000004   0020               MOV         R0,#+0
   \   00000006   0021               MOV         R1,#+0
   \   00000008   131C               MOV         R3,R2
   \   0000000A   2033               ADD         R3,#+32
   \   0000000C   03C3               STMIA       R3!,{R0,R1}
    158          	X_commend[1] = 0.0;
   \   0000000E   131C               MOV         R3,R2
   \   00000010   2833               ADD         R3,#+40
   \   00000012   03C3               STMIA       R3!,{R0,R1}
    159          	Y_commend[0] = 0.0;
   \   00000014   ....               LDR         R4,??DataTable21   ;; out_loop_X_PID
   \   00000016   A064               STR         R0,[R4, #+72]
   \   00000018   E164               STR         R1,[R4, #+76]
    160          	Y_commend[1] = 0.0;
   \   0000001A   2065               STR         R0,[R4, #+80]
   \   0000001C   6165               STR         R1,[R4, #+84]
    161          	D_commends[0] = 0.0;
   \   0000001E   A065               STR         R0,[R4, #+88]
   \   00000020   E165               STR         R1,[R4, #+92]
    162          	D_commends[1] = 0.0;
   \   00000022   2066               STR         R0,[R4, #+96]
   \   00000024   6166               STR         R1,[R4, #+100]
    163          	yaw_commend[0] = 0.0;
   \   00000026   1065               STR         R0,[R2, #+80]
   \   00000028   5165               STR         R1,[R2, #+84]
    164          	yaw_commend[1] = 0.0;
   \   0000002A   5832               ADD         R2,#+88
   \   0000002C   03C2               STMIA       R2!,{R0,R1}
    165          	//set the default PID gain ,from t1.NOTE the sign
    166          	out_loop_X_PID[0] = 3.0;
   \   0000002E   021C               MOV         R2,R0
   \   00000030   244B               LDR         R3,??reset_controller_1  ;; 0x40080000
   \   00000032   0CC4               STMIA       R4!,{R2,R3}
   \   00000034   083C               SUB         R4,#+8
    167          	out_loop_X_PID[1] = 0.0;
   \   00000036   251C               MOV         R5,R4
   \   00000038   0835               ADD         R5,#+8
   \   0000003A   03C5               STMIA       R5!,{R0,R1}
    168          	out_loop_X_PID[2] = 13.0;//-0.05;
   \   0000003C   061C               MOV         R6,R0
   \   0000003E   224F               LDR         R7,??reset_controller_1+0x4  ;; 0x402a0000
   \   00000040   251C               MOV         R5,R4
   \   00000042   1035               ADD         R5,#+16
   \   00000044   C0C5               STMIA       R5!,{R6,R7}
    169          
    170          	out_loop_Y_PID[0] = 3.0;
   \   00000046   251C               MOV         R5,R4
   \   00000048   1835               ADD         R5,#+24
   \   0000004A   0CC5               STMIA       R5!,{R2,R3}
    171          	out_loop_Y_PID[1] = 0.0;
   \   0000004C   221C               MOV         R2,R4
   \   0000004E   2032               ADD         R2,#+32
   \   00000050   03C2               STMIA       R2!,{R0,R1}
    172          	out_loop_Y_PID[2] = 13.0;//0.05;
   \   00000052   221C               MOV         R2,R4
   \   00000054   2832               ADD         R2,#+40
   \   00000056   C0C2               STMIA       R2!,{R6,R7}
    173          	
    174          	out_loop_D_PID[0] = -50.0;//-40
   \   00000058   251C               MOV         R5,R4
   \   0000005A   3035               ADD         R5,#+48
   \   0000005C   021C               MOV         R2,R0
   \   0000005E   1B4B               LDR         R3,??reset_controller_1+0x8  ;; 0xc0490000
   \   00000060   0CC5               STMIA       R5!,{R2,R3}
    175          	out_loop_D_PID[1] = 0.0;
   \   00000062   221C               MOV         R2,R4
   \   00000064   3832               ADD         R2,#+56
   \   00000066   03C2               STMIA       R2!,{R0,R1}
    176          	out_loop_D_PID[2] = -60.0;//-90
   \   00000068   4034               ADD         R4,#+64
   \   0000006A   021C               MOV         R2,R0
   \   0000006C   184B               LDR         R3,??reset_controller_1+0xC  ;; 0xc04e0000
   \   0000006E   0CC4               STMIA       R4!,{R2,R3}
    177          	
    178                  in_loop_roll_PID[0] = 2800.0;   //-0.245;
   \   00000070   ....               LDR         R4,??DataTable15   ;; in_loop_roll_PID
   \   00000072   184B               LDR         R3,??reset_controller_1+0x10  ;; 0x40a5e000
   \   00000074   0CC4               STMIA       R4!,{R2,R3}
   \   00000076   083C               SUB         R4,#+8
    179          	in_loop_roll_PID[1] = -0.0;
   \   00000078   8027               MOV         R7,#+128
   \   0000007A   3F06               LSL         R7,R7,#+24         ;; #-2147483648
   \   0000007C   221C               MOV         R2,R4
   \   0000007E   0832               ADD         R2,#+8
   \   00000080   C0C2               STMIA       R2!,{R6,R7}
    180          	in_loop_roll_PID[2] = 30.0;    //-0.007;//-0.005
   \   00000082   251C               MOV         R5,R4
   \   00000084   1035               ADD         R5,#+16
   \   00000086   021C               MOV         R2,R0
   \   00000088   ....               LDR         R3,??DataTable25   ;; 0x403e0000
   \   0000008A   0CC5               STMIA       R5!,{R2,R3}
    181          
    182          	in_loop_pitch_PID[0] = -2300.0;// -850.0;  //0.5;
   \   0000008C   251C               MOV         R5,R4
   \   0000008E   1835               ADD         R5,#+24
   \   00000090   114B               LDR         R3,??reset_controller_1+0x14  ;; 0xc0a1f800
   \   00000092   0CC5               STMIA       R5!,{R2,R3}
    183          	in_loop_pitch_PID[1] = 0.0;
   \   00000094   221C               MOV         R2,R4
   \   00000096   2032               ADD         R2,#+32
   \   00000098   03C2               STMIA       R2!,{R0,R1}
    184          	in_loop_pitch_PID[2] = -30.0;//-22.0;   //0.15;//0.1
   \   0000009A   221C               MOV         R2,R4
   \   0000009C   2832               ADD         R2,#+40
   \   0000009E   0F49               LDR         R1,??reset_controller_1+0x18  ;; 0xc03e0000
   \   000000A0   03C2               STMIA       R2!,{R0,R1}
    185          
    186          	in_loop_yaw_PID[0] = -0.15;
   \   000000A2   221C               MOV         R2,R4
   \   000000A4   3032               ADD         R2,#+48
   \   000000A6   0E48               LDR         R0,??reset_controller_1+0x1C  ;; 0x33333333
   \   000000A8   0E49               LDR         R1,??reset_controller_1+0x20  ;; 0xbfc33333
   \   000000AA   03C2               STMIA       R2!,{R0,R1}
    187          	in_loop_yaw_PID[1] = -0.002;
   \   000000AC   221C               MOV         R2,R4
   \   000000AE   3832               ADD         R2,#+56
   \   000000B0   0D48               LDR         R0,??reset_controller_1+0x24  ;; 0xd2f1a9fc
   \   000000B2   0E49               LDR         R1,??reset_controller_1+0x28  ;; 0xbf60624d
   \   000000B4   03C2               STMIA       R2!,{R0,R1}
    188          	in_loop_yaw_PID[2] = -0.0;
   \   000000B6   4034               ADD         R4,#+64
   \   000000B8   C0C4               STMIA       R4!,{R6,R7}
    189          	
    190          	//set limits ,call the above function
    191          	set_limits();
   \   000000BA   ........           BL          ??set_limits
    192          	//set the int_state;
    193              set_init_state();
   \   000000BE   ........           BL          ??set_init_state
    194          
    195          }
   \   000000C2   ....               B           ?Subroutine16
   \                     ??reset_controller_1:
   \   000000C4   00000840           DC32        0x40080000
   \   000000C8   00002A40           DC32        0x402a0000
   \   000000CC   000049C0           DC32        0xc0490000
   \   000000D0   00004EC0           DC32        0xc04e0000
   \   000000D4   00E0A540           DC32        0x40a5e000
   \   000000D8   00F8A1C0           DC32        0xc0a1f800
   \   000000DC   00003EC0           DC32        0xc03e0000
   \   000000E0   33333333           DC32        0x33333333
   \   000000E4   3333C3BF           DC32        0xbfc33333
   \   000000E8   FCA9F1D2           DC32        0xd2f1a9fc
   \   000000EC   4D6260BF           DC32        0xbf60624d

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine16:
   \   00000000   F0BC               POP         {R4-R7}
   \   00000002   01BC               POP         {R0}
   \   00000004   0047               BX          R0                 ;; return
   \   00000006   C046               NOP         
   \                     ??Subroutine16_0:
   \   00000008   ........           DC32        position + 192
    196          
    197          //out loop

   \                                 In segment CODE, align 4, keep-with-next
    198          void out_loop_commend(const double C_position[3], 
    199          					  const double C_velocity[3])
    200          {
   \                     ??out_loop_commend:
   \   00000000   30B4               PUSH        {R4,R5}
   \   00000002   021C               MOV         R2,R0
   \   00000004   0B1C               MOV         R3,R1
    201          	X_commend[0] = C_position[0];
   \   00000006   ....               LDR         R4,??DataTable12   ;; outputs
   \   00000008   251C               MOV         R5,R4
   \   0000000A   2035               ADD         R5,#+32
   \   0000000C   03CA               LDMIA       R2!,{R0,R1}
   \   0000000E   083A               SUB         R2,#+8
   \   00000010   03C5               STMIA       R5!,{R0,R1}
    202          	X_commend[1] = C_velocity[0];//X
   \   00000012   2834               ADD         R4,#+40
   \   00000014   03CB               LDMIA       R3!,{R0,R1}
   \   00000016   083B               SUB         R3,#+8
   \   00000018   03C4               STMIA       R4!,{R0,R1}
    203          	
    204          	Y_commend[0] = C_position[1];
   \   0000001A   094C               LDR         R4,??out_loop_commend_1  ;; out_loop_X_PID
   \   0000001C   101C               MOV         R0,R2
   \   0000001E   0830               ADD         R0,#+8
   \   00000020   03C8               LDMIA       R0!,{R0,R1}
   \   00000022   A064               STR         R0,[R4, #+72]
   \   00000024   E164               STR         R1,[R4, #+76]
    205          	Y_commend[1] = C_velocity[1];//Y
   \   00000026   181C               MOV         R0,R3
   \   00000028   0830               ADD         R0,#+8
   \   0000002A   03C8               LDMIA       R0!,{R0,R1}
   \   0000002C   2065               STR         R0,[R4, #+80]
   \   0000002E   6165               STR         R1,[R4, #+84]
    206          
    207          	D_commends[0] = C_position[2];//+trajectory.yaw_com_theta;//º½Ïò½Ç½×Ô¾ÏìÓ¦²âÊÔ
   \   00000030   1032               ADD         R2,#+16
   \   00000032   03CA               LDMIA       R2!,{R0,R1}
   \   00000034   A065               STR         R0,[R4, #+88]
   \   00000036   E165               STR         R1,[R4, #+92]
    208          	D_commends[1] = C_velocity[2];//D
   \   00000038   6034               ADD         R4,#+96
   \   0000003A   1033               ADD         R3,#+16
   \   0000003C   03CB               LDMIA       R3!,{R0,R1}
   \   0000003E   ....               B           ?Subroutine15
   \                     ??out_loop_commend_1:
   \   00000040   ........           DC32        out_loop_X_PID
    209          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine15:
   \   00000000   03C4               STMIA       R4!,{R0,R1}
   \   00000002   30BC               POP         {R4,R5}
   \   00000004   7047               BX          LR                 ;; return
    210          

   \                                 In segment CODE, align 4, keep-with-next
    211          void out_loop_feedback(const double F_position[3],
    212          					   const double F_velocity[3])
    213          {
   \                     ??out_loop_feedback:
   \   00000000   30B4               PUSH        {R4,R5}
   \   00000002   031C               MOV         R3,R0
   \   00000004   0A1C               MOV         R2,R1
    214          	X_feedback[0] = F_position[0];
   \   00000006   ....               LDR         R4,??DataTable20   ;; X_feedback
   \   00000008   03CB               LDMIA       R3!,{R0,R1}
   \   0000000A   083B               SUB         R3,#+8
   \   0000000C   03C4               STMIA       R4!,{R0,R1}
   \   0000000E   083C               SUB         R4,#+8
    215          	X_feedback[1] = F_velocity[0];//X
   \   00000010   251C               MOV         R5,R4
   \   00000012   0835               ADD         R5,#+8
   \   00000014   03CA               LDMIA       R2!,{R0,R1}
   \   00000016   083A               SUB         R2,#+8
   \   00000018   03C5               STMIA       R5!,{R0,R1}
    216          
    217          	Y_feedback[0] = F_position[1];
   \   0000001A   251C               MOV         R5,R4
   \   0000001C   1035               ADD         R5,#+16
   \   0000001E   181C               MOV         R0,R3
   \   00000020   0830               ADD         R0,#+8
   \   00000022   03C8               LDMIA       R0!,{R0,R1}
   \   00000024   03C5               STMIA       R5!,{R0,R1}
    218          	Y_feedback[1] = F_velocity[1];//Y
   \   00000026   251C               MOV         R5,R4
   \   00000028   1835               ADD         R5,#+24
   \   0000002A   101C               MOV         R0,R2
   \   0000002C   0830               ADD         R0,#+8
   \   0000002E   03C8               LDMIA       R0!,{R0,R1}
   \   00000030   03C5               STMIA       R5!,{R0,R1}
    219          
    220          	D_feedback[0] = F_position[2];
   \   00000032   251C               MOV         R5,R4
   \   00000034   2035               ADD         R5,#+32
   \   00000036   1033               ADD         R3,#+16
   \   00000038   03CB               LDMIA       R3!,{R0,R1}
   \   0000003A   03C5               STMIA       R5!,{R0,R1}
    221          	D_feedback[1] = F_velocity[2];//D
   \   0000003C   2834               ADD         R4,#+40
   \   0000003E   1032               ADD         R2,#+16
   \   00000040   03CA               LDMIA       R2!,{R0,R1}
   \   00000042   C046               NOP         
   \   00000044                      REQUIRE ?Subroutine15
   \   00000044                      ;; // Fall through to label ?Subroutine15
    222          }
    223          /*
    224          void out_loop_PID_step(const Trajectory * trajectory_t )
    225          {	
    226          	//roll  trajectory_t->com_thetaÊÇÓÃÀ´²úÉúÄÚ»·½×Ô¾ÏìÓ¦ ¿´ÄÚ»·¸ú×ÙÐ§¹û
    227          	roll_commend[0] = trajectory_t->com_theta[0]+PID_step(Y_commend,Y_feedback,out_loop_Y_PID,&Y_limits);
    228          	roll_commend[1] = trajectory_t->com_pqr[0];
    229          	//pitch
    230          	//pitch_commend[0] = PID_step_pitch(X_commend,X_feedback,out_loop_X_PID,&X_limits);
    231              pitch_commend[0] = trajectory_t->com_theta[1]+PID_step(X_commend,X_feedback,out_loop_X_PID,&X_limits);
    232          	pitch_commend[1] = trajectory_t->com_pqr[1];
    233          	//yaw
    234          	yaw_commend[0] = position.heading;//+trajectory_t->yaw_com_theta;  //Ä¿±êº½Ïò½Ç .
    235          	yaw_commend[1] = trajectory_t->com_pqr[2];
    236          
    237          	//out put coll_pwm
    238          	outputs[0] = PID_step(D_commends,D_feedback,out_loop_D_PID,&D_limits);
    239          }
    240          */
    241          //in_loop

   \                                 In segment CODE, align 4, keep-with-next
    242          void in_loop_feedback(const double F_position[3],
    243          					  const double F_velocity[3])
    244          {
   \                     ??in_loop_feedback:
   \   00000000   10B4               PUSH        {R4}
   \   00000002   021C               MOV         R2,R0
   \   00000004   0B1C               MOV         R3,R1
    245          	//roll
    246          	roll_feedback[0] = F_position[0];
   \   00000006   ....               LDR         R4,??DataTable12   ;; outputs
   \   00000008   03CA               LDMIA       R2!,{R0,R1}
   \   0000000A   083A               SUB         R2,#+8
   \   0000000C   2066               STR         R0,[R4, #+96]
   \   0000000E   6166               STR         R1,[R4, #+100]
    247          	roll_feedback[1] = F_velocity[0];
   \   00000010   03CB               LDMIA       R3!,{R0,R1}
   \   00000012   083B               SUB         R3,#+8
   \   00000014   A066               STR         R0,[R4, #+104]
   \   00000016   E166               STR         R1,[R4, #+108]
    248          	//pitch
    249          	pitch_feedback[0] = F_position[1];
   \   00000018   101C               MOV         R0,R2
   \   0000001A   0830               ADD         R0,#+8
   \   0000001C   03C8               LDMIA       R0!,{R0,R1}
   \   0000001E   2067               STR         R0,[R4, #+112]
   \   00000020   6167               STR         R1,[R4, #+116]
    250          	pitch_feedback[1] = F_velocity[1];
   \   00000022   7834               ADD         R4,#+120
   \   00000024   181C               MOV         R0,R3
   \   00000026   0830               ADD         R0,#+8
   \   00000028   03C8               LDMIA       R0!,{R0,R1}
   \   0000002A   03C4               STMIA       R4!,{R0,R1}
    251          	//yaw
    252          	yaw_feedback[0] = F_position[2];
   \   0000002C   ....               LDR         R4,??DataTable30   ;; in_loop_roll_PID
   \   0000002E   1032               ADD         R2,#+16
   \   00000030   03CA               LDMIA       R2!,{R0,R1}
   \   00000032   A064               STR         R0,[R4, #+72]
   \   00000034   E164               STR         R1,[R4, #+76]
    253          	yaw_feedback[1] = F_velocity[2];
   \   00000036   5034               ADD         R4,#+80
   \   00000038   1033               ADD         R3,#+16
   \   0000003A   03CB               LDMIA       R3!,{R0,R1}
   \   0000003C   03C4               STMIA       R4!,{R0,R1}
    254          }
   \   0000003E   10BC               POP         {R4}
   \   00000040   7047               BX          LR                 ;; return
    255          

   \                                 In segment CODE, align 4, keep-with-next
    256          void in_loop_PID_step()
    257          {	
   \                     ??in_loop_PID_step:
   \   00000000   30B5               PUSH        {R4,R5,LR}
    258          	//roll_out rad
    259          	outputs[1] = PID_step(roll_commend,roll_feedback,in_loop_roll_PID,&roll_limits);
   \   00000002   ....               LDR         R4,??DataTable27   ;; outputs
   \   00000004   ....               LDR         R5,??DataTable15   ;; in_loop_roll_PID
   \   00000006   ....               LDR         R3,??DataTable28   ;; roll_limits
   \   00000008   2A1C               MOV         R2,R5
   \   0000000A   211C               MOV         R1,R4
   \   0000000C   6031               ADD         R1,#+96
   \   0000000E   201C               MOV         R0,R4
   \   00000010   3030               ADD         R0,#+48
   \   00000012   ........           BL          ??PID_step
   \   00000016   221C               MOV         R2,R4
   \   00000018   0832               ADD         R2,#+8
   \   0000001A   03C2               STMIA       R2!,{R0,R1}
    260          	//pitch_out rad .NOTE:there is a "-" here
    261          	outputs[2] = -PID_step(pitch_commend,pitch_feedback,in_loop_pitch_PID,&pitch_limits);
   \   0000001C   ....               LDR         R3,??DataTable17   ;; pitch_limits
   \   0000001E   2A1C               MOV         R2,R5
   \   00000020   1832               ADD         R2,#+24
   \   00000022   211C               MOV         R1,R4
   \   00000024   7031               ADD         R1,#+112
   \   00000026   201C               MOV         R0,R4
   \   00000028   4030               ADD         R0,#+64
   \   0000002A   ........           BL          ??PID_step
   \   0000002E   8022               MOV         R2,#+128
   \   00000030   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   00000032   5140               EOR         R1,R2
   \   00000034   221C               MOV         R2,R4
   \   00000036   1032               ADD         R2,#+16
   \   00000038   03C2               STMIA       R2!,{R0,R1}
    262          	//yaw_out rad
    263          	outputs[3] = PID_step(yaw_commend,yaw_feedback,in_loop_yaw_PID,&yaw_limits);
   \   0000003A   ....               LDR         R3,??DataTable18   ;; yaw_limits
   \   0000003C   2A1C               MOV         R2,R5
   \   0000003E   3032               ADD         R2,#+48
   \   00000040   4835               ADD         R5,#+72
   \   00000042   291C               MOV         R1,R5
   \   00000044   201C               MOV         R0,R4
   \   00000046   5030               ADD         R0,#+80
   \   00000048   ........           BL          ??PID_step
   \   0000004C   1834               ADD         R4,#+24
   \   0000004E   ....               B           ?Subroutine17
    264          	
    265          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine17:
   \   00000000   03C4               STMIA       R4!,{R0,R1}
   \   00000002   30BC               POP         {R4,R5}
   \   00000004   01BC               POP         {R0}
   \   00000006   0047               BX          R0                 ;; return
    266          /****************************************************************
    267           *º¯ÊýÃû: void out_loop_PID_step(const Trajectory * trajectory_t )
    268           *
    269           *²ÎÊý: const Trajectory * trajectory_tÎªÂ·¾¶¹æ»®µÄ½á¹¹Ìå
    270           *      	
    271           *¹¦ÄÜ£ºPID¿ØÖÆÆ÷Íâ»·
    272           *				
    273           *·µ»ØÖµ£ºÔÝÎÞ
    274           *
    275           *×÷    Õß£ºÐìÖ¾ºã
    276           *Íê³ÉÈÕÆÚ: 2013-3-29
    277           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    278           void out_loop_PID_step(const Trajectory * trajectory_t )
    279          {	
   \                     ??out_loop_PID_step:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
    280          	//roll
    281          	//roll_commend[0] = trajectory_t->com_theta[0]; //PID_step(Y_commend,Y_feedback,out_loop_Y_PID,&Y_limits);
    282          	
    283          	roll_commend[0] = trajectory_t->com_theta[0] + PID_step(Y_commend,Y_feedback,out_loop_Y_PID,&Y_limits);
   \   00000002   B030               ADD         R0,#+176
   \   00000004   061C               MOV         R6,R0
   \   00000006   ....               LDR         R4,??DataTable27   ;; outputs
   \   00000008   ....               LDR         R7,??DataTable20   ;; X_feedback
   \   0000000A   ....               LDR         R5,??DataTable21   ;; out_loop_X_PID
   \   0000000C   ....               LDR         R3,??DataTable22   ;; Y_limits
   \   0000000E   2A1C               MOV         R2,R5
   \   00000010   1832               ADD         R2,#+24
   \   00000012   391C               MOV         R1,R7
   \   00000014   1031               ADD         R1,#+16
   \   00000016   281C               MOV         R0,R5
   \   00000018   4830               ADD         R0,#+72
   \   0000001A   ........           BL          ??PID_step
   \   0000001E   021C               MOV         R2,R0
   \   00000020   0B1C               MOV         R3,R1
   \   00000022   301C               MOV         R0,R6
   \   00000024   1830               ADD         R0,#+24
   \   00000026   03C8               LDMIA       R0!,{R0,R1}
   \   00000028   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000002C   221C               MOV         R2,R4
   \   0000002E   3032               ADD         R2,#+48
   \   00000030   03C2               STMIA       R2!,{R0,R1}
    284          	roll_commend[1] = trajectory_t->com_pqr[0];
   \   00000032   221C               MOV         R2,R4
   \   00000034   3832               ADD         R2,#+56
   \   00000036   03CE               LDMIA       R6!,{R0,R1}
   \   00000038   083E               SUB         R6,#+8
   \   0000003A   03C2               STMIA       R2!,{R0,R1}
    285          	
    286          	//pitch
    287              //pitch_commend[0] = trajectory_t->com_theta[1]; //PID_step(X_commend,X_feedback,out_loop_X_PID,&X_limits);
    288          	
    289          	pitch_commend[0] = trajectory_t->com_theta[1] + PID_step(X_commend,X_feedback,out_loop_X_PID,&X_limits);
   \   0000003C   ....               LDR         R3,??DataTable23   ;; X_limits
   \   0000003E   2A1C               MOV         R2,R5
   \   00000040   391C               MOV         R1,R7
   \   00000042   201C               MOV         R0,R4
   \   00000044   2030               ADD         R0,#+32
   \   00000046   ........           BL          ??PID_step
   \   0000004A   021C               MOV         R2,R0
   \   0000004C   0B1C               MOV         R3,R1
   \   0000004E   301C               MOV         R0,R6
   \   00000050   2030               ADD         R0,#+32
   \   00000052   03C8               LDMIA       R0!,{R0,R1}
   \   00000054   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000058   2064               STR         R0,[R4, #+64]
   \   0000005A   6164               STR         R1,[R4, #+68]
    290          	pitch_commend[1] = trajectory_t->com_pqr[1];
   \   0000005C   301C               MOV         R0,R6
   \   0000005E   0830               ADD         R0,#+8
   \   00000060   03C8               LDMIA       R0!,{R0,R1}
   \   00000062   A064               STR         R0,[R4, #+72]
   \   00000064   E164               STR         R1,[R4, #+76]
    291          	
    292          	//yaw
    293          	yaw_commend[0] = position.heading;//+trajectory_t->yaw_com_theta;  //Ä¿±êº½Ïò½Ç .
   \   00000066   ....               LDR         R0,??Subroutine16_0  ;; position + 192
   \   00000068   03C8               LDMIA       R0!,{R0,R1}
   \   0000006A   2065               STR         R0,[R4, #+80]
   \   0000006C   6165               STR         R1,[R4, #+84]
    294          	yaw_commend[1] = trajectory_t->com_pqr[2];
   \   0000006E   1036               ADD         R6,#+16
   \   00000070   03CE               LDMIA       R6!,{R0,R1}
   \   00000072   A065               STR         R0,[R4, #+88]
   \   00000074   E165               STR         R1,[R4, #+92]
    295          
    296          	//out put coll_pwm
    297          	outputs[0] = PID_step(D_commends,D_feedback,out_loop_D_PID,&D_limits);
   \   00000076   ....               LDR         R3,??DataTable24   ;; D_limits
   \   00000078   2A1C               MOV         R2,R5
   \   0000007A   3032               ADD         R2,#+48
   \   0000007C   2037               ADD         R7,#+32
   \   0000007E   391C               MOV         R1,R7
   \   00000080   5835               ADD         R5,#+88
   \   00000082   281C               MOV         R0,R5
   \   00000084   ........           BL          ??PID_step
   \   00000088   03C4               STMIA       R4!,{R0,R1}
   \   0000008A   C046               NOP         
    298          }
   \   0000008C                      REQUIRE ?Subroutine16
   \   0000008C                      ;; // Fall through to label ?Subroutine16
    299          
    300          /****************************************************************
    301           *º¯ÊýÃû: LonLQRStep( const double 	commend[2], 
    302           *				  	  const double 	feedback[2],
    303           *				      const double 	LQR_gain[3],   
    304           *				      struct 	   	limits *lim		)
    305           *
    306           *²ÎÊý: const double commend[2]ÎªpitchÏòÄÚ»·¿ØÖÆÁ¿
    307           *		const double feedback[2]ÎªpitchÏòÄÚ»··´À¡Á¿£¨½Ç¶È¡¢½ÇËÙ¶È¡¢»ÓÎè½Ç£©
    308           *      const double LQR_gain[3]ÎªLQR¿ØÖÆÆ÷ÔöÒæ
    309           *		struct limits *lim ÎªÏÞ·ùÖµ½á¹¹Ìå
    310           *
    311           *¹¦ÄÜ£ºPitchÏòLQR¿ØÖÆÆ÷
    312           *			
    313           *·µ»ØÖµ£ºÔÝÎÞ
    314           *
    315           *×÷    Õß£ºÐìÖ¾ºã
    316           *Íê³ÉÈÕÆÚ: 2013-3-29
    317           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    318          double LonLQRStep(const double 	commend[2], 
    319          				  const double 	feedback[2],
    320          				  const double 	LQR_gain[3],   
    321          				  struct 	   	limits *lim)
    322          {
   \                     ??LonLQRStep:
   \   00000000   FCB5               PUSH        {R2-R7,LR}
   \   00000002   84B0               SUB         SP,#+16
   \   00000004   071C               MOV         R7,R0
   \   00000006   0E1C               MOV         R6,R1
    323          	double err, velerr, a1err, result;
    324          	
    325          	err = limit( (commend[0] - feedback[0]), 
    326          				 lim->ProErrorLimits[0], 
    327          				 lim->ProErrorLimits[1]);
   \   00000008   181C               MOV         R0,R3
   \   0000000A   0830               ADD         R0,#+8
   \   0000000C   03C8               LDMIA       R0!,{R0,R1}
   \   0000000E   03B4               PUSH        {R0,R1}
   \   00000010   181C               MOV         R0,R3
   \   00000012   0CC8               LDMIA       R0!,{R2,R3}
   \   00000014   141C               MOV         R4,R2
   \   00000016   1D1C               MOV         R5,R3
   \   00000018   03CF               LDMIA       R7!,{R0,R1}
   \   0000001A   0CCE               LDMIA       R6!,{R2,R3}
   \   0000001C   ........           _BLF        __dSub,??__dSub??rT
   \   00000020   221C               MOV         R2,R4
   \   00000022   2B1C               MOV         R3,R5
   \   00000024   ........           _BLF        ??limit,??limit??rT
   \   00000028   04AA               ADD         R2,SP,#+16
   \   0000002A   03C2               STMIA       R2!,{R0,R1}
    328          
    329          	velerr = limit( (commend[1] - feedback[1]),
    330          				    lim->VelErrorLimits[0], 
    331          					lim->VelErrorLimits[1]);
   \   0000002C   0798               LDR         R0,[SP, #+28]
   \   0000002E   1830               ADD         R0,#+24
   \   00000030   03C8               LDMIA       R0!,{R0,R1}
   \   00000032   03B4               PUSH        {R0,R1}
   \   00000034   0998               LDR         R0,[SP, #+36]
   \   00000036   1030               ADD         R0,#+16
   \   00000038   0CC8               LDMIA       R0!,{R2,R3}
   \   0000003A   141C               MOV         R4,R2
   \   0000003C   1D1C               MOV         R5,R3
   \   0000003E   03CF               LDMIA       R7!,{R0,R1}
   \   00000040   0CCE               LDMIA       R6!,{R2,R3}
   \   00000042   ........           _BLF        __dSub,??__dSub??rT
   \   00000046   221C               MOV         R2,R4
   \   00000048   2B1C               MOV         R3,R5
   \   0000004A   ........           _BLF        ??limit,??limit??rT
   \   0000004E   04AA               ADD         R2,SP,#+16
   \   00000050   03C2               STMIA       R2!,{R0,R1}
    332          
    333          	a1err = (velerr - lastVelerrA1) * Freq / 426.82;
    334          	
    335          	result = 0.0 + LQR_gain[0]*err 
    336          		         + LQR_gain[1]*velerr 
    337          				 + LQR_gain[2]*a1err;
   \   00000052   ....               LDR         R6,??Subroutine14_0  ;; lastVelerrA1
   \   00000054   04A8               ADD         R0,SP,#+16
   \   00000056   03C8               LDMIA       R0!,{R0,R1}
   \   00000058   0CCE               LDMIA       R6!,{R2,R3}
   \   0000005A   083E               SUB         R6,#+8
   \   0000005C   ........           _BLF        __dSub,??__dSub??rT
   \   00000060   0022               MOV         R2,#+0
   \   00000062   ....               LDR         R3,??DataTable25   ;; 0x403e0000
   \   00000064   ........           _BLF        __dMul,??__dMul??rT
   \   00000068   ....               LDR         R2,??Subroutine14_0+0x4  ;; 0xb851eb85
   \   0000006A   ....               LDR         R3,??Subroutine14_0+0x8  ;; 0x407aad1e
   \   0000006C   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000070   021C               MOV         R2,R0
   \   00000072   0B1C               MOV         R3,R1
   \   00000074   0898               LDR         R0,[SP, #+32]
   \   00000076   1030               ADD         R0,#+16
   \   00000078   03C8               LDMIA       R0!,{R0,R1}
   \   0000007A   ........           _BLF        __dMul,??__dMul??rT
   \   0000007E   03B4               PUSH        {R0,R1}
   \   00000080   0A98               LDR         R0,[SP, #+40]
   \   00000082   0830               ADD         R0,#+8
   \   00000084   0CC8               LDMIA       R0!,{R2,R3}
   \   00000086   06A8               ADD         R0,SP,#+24
   \   00000088   03C8               LDMIA       R0!,{R0,R1}
   \   0000008A   ........           _BLF        __dMul,??__dMul??rT
   \   0000008E   041C               MOV         R4,R0
   \   00000090   0D1C               MOV         R5,R1
   \   00000092   0A98               LDR         R0,[SP, #+40]
   \   00000094   0CC8               LDMIA       R0!,{R2,R3}
   \   00000096   08A8               ADD         R0,SP,#+32
   \   00000098   03C8               LDMIA       R0!,{R0,R1}
   \   0000009A   ........           _BLF        __dMul,??__dMul??rT
   \   0000009E   221C               MOV         R2,R4
   \   000000A0   2B1C               MOV         R3,R5
   \   000000A2   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000A6   021C               MOV         R2,R0
   \   000000A8   0B1C               MOV         R3,R1
   \   000000AA   03BC               POP         {R0,R1}
   \   000000AC   ........           _BLF        __dAdd,??__dAdd??rT
    338          	
    339          	lastVelerrA1 = velerr;
   \   000000B0   04AA               ADD         R2,SP,#+16
   \   000000B2   0CCA               LDMIA       R2!,{R2,R3}
   \   000000B4   0CC6               STMIA       R6!,{R2,R3}
    340          	
    341          	return limit(result, 
    342          				 lim->OutErrorLimits[0], 
    343          				 lim->OutErrorLimits[1]);
   \   000000B6   099A               LDR         R2,[SP, #+36]
   \   000000B8   3832               ADD         R2,#+56
   \   000000BA   0CCA               LDMIA       R2!,{R2,R3}
   \   000000BC   0CB4               PUSH        {R2,R3}
   \   000000BE   0B9A               LDR         R2,[SP, #+44]
   \   000000C0   3032               ADD         R2,#+48
   \   000000C2   0CCA               LDMIA       R2!,{R2,R3}
   \   000000C4   ........           _BLF        ??limit,??limit??rT
   \   000000C8   0CB0               ADD         SP,#+48
   \   000000CA   C046               NOP         
   \   000000CC                      REQUIRE ?Subroutine14
   \   000000CC                      ;; // Fall through to label ?Subroutine14
    344          }
    345          
    346          /****************************************************************
    347           *º¯ÊýÃû:double LatLQRStep( const double commend[2], 
    348           *				  			const double feedback[2],
    349           *				  			const double LQR_gain[3],   
    350           *				  			struct limits *lim         )
    351           *
    352           *²ÎÊý£ºconst double commend[2]ÎªrollÏòÄÚ»·¿ØÖÆÁ¿
    353           *		const double feedback[2]ÎªrollÏòÄÚ»··´À¡Á¿£¨½Ç¶È¡¢½ÇËÙ¶È¡¢»ÓÎè½Ç£©
    354           *      const double LQR_gain[3]ÎªLQR¿ØÖÆÆ÷ÔöÒæ
    355           *		struct limits *lim ÎªÏÞ·ùÖµ½á¹¹Ìå
    356           *      
    357           *¹¦ÄÜ£ºrollÏòLQR¿ØÖÆÆ÷
    358           *		
    359           *·µ»ØÖµ£ºÔÝÎÞ
    360           *
    361           *×÷    Õß£ºÐìÖ¾ºã
    362           *Íê³ÉÈÕÆÚ: 2013-3-29
    363           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    364          double LatLQRStep(const double 	commend[2], 
    365          				  const double 	feedback[2],
    366          				  const double 	LQR_gain[3],   
    367          				  struct 	   	limits *lim)
    368          {
   \                     ??LatLQRStep:
   \   00000000   FCB5               PUSH        {R2-R7,LR}
   \   00000002   84B0               SUB         SP,#+16
   \   00000004   071C               MOV         R7,R0
   \   00000006   0E1C               MOV         R6,R1
    369          	double err, velerr, b1err, result;
    370          	
    371          	err = limit( (commend[0] - feedback[0]), 
    372          		  		 lim->ProErrorLimits[0], 
    373          				 lim->ProErrorLimits[1]);
   \   00000008   181C               MOV         R0,R3
   \   0000000A   0830               ADD         R0,#+8
   \   0000000C   03C8               LDMIA       R0!,{R0,R1}
   \   0000000E   03B4               PUSH        {R0,R1}
   \   00000010   181C               MOV         R0,R3
   \   00000012   0CC8               LDMIA       R0!,{R2,R3}
   \   00000014   141C               MOV         R4,R2
   \   00000016   1D1C               MOV         R5,R3
   \   00000018   03CF               LDMIA       R7!,{R0,R1}
   \   0000001A   0CCE               LDMIA       R6!,{R2,R3}
   \   0000001C   ........           _BLF        __dSub,??__dSub??rT
   \   00000020   221C               MOV         R2,R4
   \   00000022   2B1C               MOV         R3,R5
   \   00000024   ........           _BLF        ??limit,??limit??rT
   \   00000028   04AA               ADD         R2,SP,#+16
   \   0000002A   03C2               STMIA       R2!,{R0,R1}
    374          
    375          	velerr = limit( (commend[1] - feedback[1]), 
    376          				  	lim->VelErrorLimits[0], 
    377          					lim->VelErrorLimits[1]);
   \   0000002C   0798               LDR         R0,[SP, #+28]
   \   0000002E   1830               ADD         R0,#+24
   \   00000030   03C8               LDMIA       R0!,{R0,R1}
   \   00000032   03B4               PUSH        {R0,R1}
   \   00000034   0998               LDR         R0,[SP, #+36]
   \   00000036   1030               ADD         R0,#+16
   \   00000038   0CC8               LDMIA       R0!,{R2,R3}
   \   0000003A   141C               MOV         R4,R2
   \   0000003C   1D1C               MOV         R5,R3
   \   0000003E   03CF               LDMIA       R7!,{R0,R1}
   \   00000040   0CCE               LDMIA       R6!,{R2,R3}
   \   00000042   ........           _BLF        __dSub,??__dSub??rT
   \   00000046   221C               MOV         R2,R4
   \   00000048   2B1C               MOV         R3,R5
   \   0000004A   ........           _BLF        ??limit,??limit??rT
   \   0000004E   04AA               ADD         R2,SP,#+16
   \   00000050   03C2               STMIA       R2!,{R0,R1}
    378          
    379          	b1err = (velerr - lastVelerrB1) * Freq / 1338.83;//»ÓÎè½Ç
    380          	
    381          	result = 0.0 + LQR_gain[0]*err 
    382          				 + LQR_gain[1]*velerr 
    383          			     + LQR_gain[2]*b1err;
   \   00000052   1E4E               LDR         R6,??LatLQRStep_1  ;; lastVelerrB1
   \   00000054   04A8               ADD         R0,SP,#+16
   \   00000056   03C8               LDMIA       R0!,{R0,R1}
   \   00000058   0CCE               LDMIA       R6!,{R2,R3}
   \   0000005A   083E               SUB         R6,#+8
   \   0000005C   ........           _BLF        __dSub,??__dSub??rT
   \   00000060   0022               MOV         R2,#+0
   \   00000062   ....               LDR         R3,??DataTable26   ;; 0x403e0000
   \   00000064   ........           _BLF        __dMul,??__dMul??rT
   \   00000068   194A               LDR         R2,??LatLQRStep_1+0x4  ;; 0xeb851eb8
   \   0000006A   1A4B               LDR         R3,??LatLQRStep_1+0x8  ;; 0x4094eb51
   \   0000006C   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000070   021C               MOV         R2,R0
   \   00000072   0B1C               MOV         R3,R1
   \   00000074   0898               LDR         R0,[SP, #+32]
   \   00000076   1030               ADD         R0,#+16
   \   00000078   03C8               LDMIA       R0!,{R0,R1}
   \   0000007A   ........           _BLF        __dMul,??__dMul??rT
   \   0000007E   03B4               PUSH        {R0,R1}
   \   00000080   0A98               LDR         R0,[SP, #+40]
   \   00000082   0830               ADD         R0,#+8
   \   00000084   0CC8               LDMIA       R0!,{R2,R3}
   \   00000086   06A8               ADD         R0,SP,#+24
   \   00000088   03C8               LDMIA       R0!,{R0,R1}
   \   0000008A   ........           _BLF        __dMul,??__dMul??rT
   \   0000008E   041C               MOV         R4,R0
   \   00000090   0D1C               MOV         R5,R1
   \   00000092   0A98               LDR         R0,[SP, #+40]
   \   00000094   0CC8               LDMIA       R0!,{R2,R3}
   \   00000096   08A8               ADD         R0,SP,#+32
   \   00000098   03C8               LDMIA       R0!,{R0,R1}
   \   0000009A   ........           _BLF        __dMul,??__dMul??rT
   \   0000009E   221C               MOV         R2,R4
   \   000000A0   2B1C               MOV         R3,R5
   \   000000A2   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000A6   021C               MOV         R2,R0
   \   000000A8   0B1C               MOV         R3,R1
   \   000000AA   03BC               POP         {R0,R1}
   \   000000AC   ........           _BLF        __dAdd,??__dAdd??rT
    384          	
    385          	lastVelerrB1 = velerr;
   \   000000B0   04AA               ADD         R2,SP,#+16
   \   000000B2   0CCA               LDMIA       R2!,{R2,R3}
   \   000000B4   0CC6               STMIA       R6!,{R2,R3}
    386          	
    387          	return limit(result, 
    388          				 lim->OutErrorLimits[0], 
    389          				 lim->OutErrorLimits[1]);
   \   000000B6   099A               LDR         R2,[SP, #+36]
   \   000000B8   3832               ADD         R2,#+56
   \   000000BA   0CCA               LDMIA       R2!,{R2,R3}
   \   000000BC   0CB4               PUSH        {R2,R3}
   \   000000BE   0B9A               LDR         R2,[SP, #+44]
   \   000000C0   3032               ADD         R2,#+48
   \   000000C2   0CCA               LDMIA       R2!,{R2,R3}
   \   000000C4   ........           _BLF        ??limit,??limit??rT
   \   000000C8   0CB0               ADD         SP,#+48
   \   000000CA   ....               B           ?Subroutine14
   \                     ??LatLQRStep_1:
   \   000000CC   ........           DC32        lastVelerrB1
   \   000000D0   B81E85EB           DC32        0xeb851eb8
   \   000000D4   51EB9440           DC32        0x4094eb51
    390          }
    391          
    392          /****************************************************************
    393           *º¯ÊýÃû: void InLoopLQRStep()
    394           *
    395           *²ÎÊý: ÎÞ
    396           *      
    397           *¹¦ÄÜ£ºÄÚ»·¿ØÖÆÆ÷°üÀ¨Á½¸öPitchºÍRollµÄLQR¿ØÖÆÆ÷ºÍYawÏòµÄPID¿ØÖÆÆ÷
    398           *			
    399           *·µ»ØÖµ£ºÔÝÎÞ
    400           *
    401           *×÷    Õß£ºÐìÖ¾ºã
    402           *Íê³ÉÈÕÆÚ: 2013-3-29
    403           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    404          void InLoopLQRStep()
    405          {	
   \                     ??InLoopLQRStep:
   \   00000000   10B5               PUSH        {R4,LR}
    406          	//roll_out rad
    407          	outputs[1] = -LatLQRStep(roll_commend, 
    408          							 roll_feedback, 
    409          							 LQR_rollGain, 
    410          							 &roll_limits);
   \   00000002   ....               LDR         R4,??DataTable27   ;; outputs
   \   00000004   ....               LDR         R3,??DataTable28   ;; roll_limits
   \   00000006   221C               MOV         R2,R4
   \   00000008   8032               ADD         R2,#+128
   \   0000000A   211C               MOV         R1,R4
   \   0000000C   6031               ADD         R1,#+96
   \   0000000E   201C               MOV         R0,R4
   \   00000010   3030               ADD         R0,#+48
   \   00000012   ........           BL          ??LatLQRStep
   \   00000016   8022               MOV         R2,#+128
   \   00000018   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   0000001A   5140               EOR         R1,R2
   \   0000001C   221C               MOV         R2,R4
   \   0000001E   0832               ADD         R2,#+8
   \   00000020   03C2               STMIA       R2!,{R0,R1}
    411          	
    412          	//pitch_out rad .NOTE:there is a "-" here
    413          	outputs[2] = -LonLQRStep(pitch_commend,
    414          							 pitch_feedback,
    415          							 LQR_pitchGain,
    416          							 &pitch_limits);
   \   00000022   ....               LDR         R3,??DataTable35   ;; pitch_limits
   \   00000024   221C               MOV         R2,R4
   \   00000026   9832               ADD         R2,#+152
   \   00000028   211C               MOV         R1,R4
   \   0000002A   7031               ADD         R1,#+112
   \   0000002C   201C               MOV         R0,R4
   \   0000002E   4030               ADD         R0,#+64
   \   00000030   ........           BL          ??LonLQRStep
   \   00000034   8022               MOV         R2,#+128
   \   00000036   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   00000038   5140               EOR         R1,R2
   \   0000003A   221C               MOV         R2,R4
   \   0000003C   1032               ADD         R2,#+16
   \   0000003E   03C2               STMIA       R2!,{R0,R1}
    417          	//yaw_out rad
    418          	outputs[3] = PID_step(yaw_commend, 
    419          						  yaw_feedback, 
    420          						  in_loop_yaw_PID, 
    421          						  &yaw_limits);
   \   00000040   ....               LDR         R1,??DataTable30   ;; in_loop_roll_PID
   \   00000042   ....               LDR         R3,??DataTable31   ;; yaw_limits
   \   00000044   0A1C               MOV         R2,R1
   \   00000046   3032               ADD         R2,#+48
   \   00000048   4831               ADD         R1,#+72
   \   0000004A   201C               MOV         R0,R4
   \   0000004C   5030               ADD         R0,#+80
   \   0000004E   ........           BL          ??PID_step
   \   00000052   1834               ADD         R4,#+24
   \   00000054   03C4               STMIA       R4!,{R0,R1}
    422          	
    423          }
   \   00000056   10BC               POP         {R4}
   \   00000058   01BC               POP         {R0}
   \   0000005A   0047               BX          R0                 ;; return
    424          
    425          /*
    426          void controller_step(	const Trajectory * trajectory_t,
    427                               	const double pos_body[3],
    428          		     			const double vel_body[3],
    429          		   	 			const double  theta[3],
    430          		     			const double pqr[3]				)
    431          {	
    432          	//step 0 ,set the commends.usually before entering controller.by default,
    433          	// hover target.but also need the target_heading.
    434              out_loop_commend(trajectory_t->com_position, trajectory_t->com_velocity );
    435          
    436          	//step 1, set the outloop feedbacks.
    437          	out_loop_feedback(pos_body,vel_body);
    438          	//step 2, outloop PID 
    439          	out_loop_PID_step(trajectory_t);
    440                  
    441          	//step 3, set the inloop feedbacks
    442          	in_loop_feedback(theta,pqr);
    443          	//step 4, inloop PID
    444          	in_loop_PID_step();
    445          
    446          }
    447          */
    448          /****************************************************************
    449           *º¯ÊýÃû: void LQRControllerStep( const	Trajectory * trajectory_t, 
    450           *							  	  const double pos_body[3],
    451           *		    					  const double vel_body[3],
    452           *		    			  		  const double theta[3],
    453           *		     					  const double pqr[3]				)
    454           *
    455           *²ÎÊý: const	Trajectory * trajectory_tÎªÂ·¾¶¹æ»®½á¹¹Ìå
    456           * 		const double pos_body[3]Îª»úÌå×ø±ê
    457           *		const double vel_body[3]Îª»úÌåËÙ¶È
    458           *		const double theta[3]Îª×ËÌ¬½Ç£¨Pitch¡¢Roll¡¢Yaw)
    459           *		const double pqr[3]Îª½ÇËÙ¶È
    460           *
    461           *¹¦ÄÜ£º¸üÐÂÍâ»·¿ØÖÆÁ¿
    462           *		¸üÐÂÍâ»··´À¡Á¿
    463           *		Íâ»·PID¿ØÖÆÆ÷ÇÒ¸üÐÂÄÚ»·¿ØÖÆÁ¿
    464           *		¸üÐÂÍâ»··´À¡Á¿
    465           *		ÄÚ»·PitchºÍRollÏòLQR¿ØÖÆÆ÷ºÍYawÏòPID¿ØÖÆÆ÷
    466           *
    467           *·µ»ØÖµ£ºÔÝÎÞ
    468           *
    469           *×÷    Õß£ºÐìÖ¾ºã
    470           *Íê³ÉÈÕÆÚ: 2013-3-29
    471           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    472          void LQRControllerStep( const 		 Trajectory * trajectory_t,
    473          						const double pos_body[3],
    474          		    			const double vel_body[3],
    475          		    			const double theta[3],
    476          		     			const double pqr[3])
    477          //LQRControllerStep(&trajectory,input_xyz, input_uvw, theta, filter_pqr);
    478          {
   \                     ??LQRControllerStep:
   \   00000000   F2B5               PUSH        {R1,R4-R7,LR}
   \   00000002   041C               MOV         R4,R0
   \   00000004   151C               MOV         R5,R2
   \   00000006   1E1C               MOV         R6,R3
   \   00000008   069F               LDR         R7,[SP, #+24]
    479          	out_loop_commend(trajectory_t->com_position, trajectory_t->com_velocity );
   \   0000000A   011C               MOV         R1,R0
   \   0000000C   8031               ADD         R1,#+128
   \   0000000E   9830               ADD         R0,#+152
   \   00000010   ........           BL          ??out_loop_commend
    480          	//step 1, set the outloop feedbacks.
    481          	out_loop_feedback(pos_body, vel_body);
   \   00000014   291C               MOV         R1,R5
   \   00000016   0098               LDR         R0,[SP, #+0]
   \   00000018   ........           BL          ??out_loop_feedback
    482          	//step 2, outloop PID 
    483          	out_loop_PID_step(trajectory_t);
   \   0000001C   201C               MOV         R0,R4
   \   0000001E   ........           BL          ??out_loop_PID_step
    484          	
    485          	in_loop_feedback(theta,pqr);
   \   00000022   391C               MOV         R1,R7
   \   00000024   301C               MOV         R0,R6
   \   00000026   ........           BL          ??in_loop_feedback
    486          	
    487          	InLoopLQRStep();
   \   0000002A   ........           BL          ??InLoopLQRStep
    488          }
   \   0000002E   F8BC               POP         {R3-R7}
   \   00000030   01BC               POP         {R0}
   \   00000032   0047               BX          R0                 ;; return
    489          

   \                                 In segment CODE, align 4, keep-with-next
    490          void PID_control(const double theta[3], const double pqr[3])
    491          {
   \                     ??PID_control:
   \   00000000   30B5               PUSH        {R4,R5,LR}
    492              in_loop_feedback(theta, pqr);    
   \   00000002   ........           BL          ??in_loop_feedback
    493              //roll_out rad
    494              outputs[1] = PID_step(roll_commend,roll_feedback,in_loop_roll_PID,&roll_limits);
   \   00000006   ....               LDR         R4,??DataTable32   ;; outputs
   \   00000008   ....               LDR         R5,??DataTable33   ;; in_loop_roll_PID
   \   0000000A   ....               LDR         R3,??DataTable34   ;; roll_limits
   \   0000000C   2A1C               MOV         R2,R5
   \   0000000E   211C               MOV         R1,R4
   \   00000010   6031               ADD         R1,#+96
   \   00000012   201C               MOV         R0,R4
   \   00000014   3030               ADD         R0,#+48
   \   00000016   ........           BL          ??PID_step
   \   0000001A   221C               MOV         R2,R4
   \   0000001C   0832               ADD         R2,#+8
   \   0000001E   03C2               STMIA       R2!,{R0,R1}
    495              //pitch_out rad
    496              outputs[2] = PID_step(pitch_commend,pitch_feedback,in_loop_pitch_PID,&pitch_limits);
   \   00000020   ....               LDR         R3,??DataTable35   ;; pitch_limits
   \   00000022   1835               ADD         R5,#+24
   \   00000024   2A1C               MOV         R2,R5
   \   00000026   211C               MOV         R1,R4
   \   00000028   7031               ADD         R1,#+112
   \   0000002A   201C               MOV         R0,R4
   \   0000002C   4030               ADD         R0,#+64
   \   0000002E   ........           BL          ??PID_step
   \   00000032   1034               ADD         R4,#+16
   \   00000034                      REQUIRE ?Subroutine17
   \   00000034                      ;; // Fall through to label ?Subroutine17
    497          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable0:
   \   00000000   ........           DC32        X_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32        Y_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   ........           DC32        D_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   ........           DC32        roll_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   ........           DC32        outputs

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable15:
   \   00000000   ........           DC32        in_loop_roll_PID

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable17:
   \   00000000   ........           DC32        pitch_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable18:
   \   00000000   ........           DC32        yaw_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable20:
   \   00000000   ........           DC32        X_feedback

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable21:
   \   00000000   ........           DC32        out_loop_X_PID

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable22:
   \   00000000   ........           DC32        Y_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable23:
   \   00000000   ........           DC32        X_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable24:
   \   00000000   ........           DC32        D_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable25:
   \   00000000   00003E40           DC32        0x403e0000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable26:
   \   00000000   00003E40           DC32        0x403e0000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32        outputs

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   ........           DC32        roll_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable30:
   \   00000000   ........           DC32        in_loop_roll_PID

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable31:
   \   00000000   ........           DC32        yaw_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable32:
   \   00000000   ........           DC32        outputs

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable33:
   \   00000000   ........           DC32        in_loop_roll_PID

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable34:
   \   00000000   ........           DC32        roll_limits

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable35:
   \   00000000   ........           DC32        pitch_limits

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for outputs>`:
   \   00000000   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000010   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for X_commend>`:
   \   00000020   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for roll_commend>`:
   \   00000030   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for pitch_commend>`:
   \   00000040   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for yaw_commend>`:
   \   00000050   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for roll_feedback>`:
   \   00000060   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for pitch_feedback>`:
   \   00000070   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for LQR_rollGain>`:
   \   00000080   6891ED7C3F35       DC32 7CED9168H, 3FEA353FH, 3126E979H, 3F7CAC08H, 0A9FBE76DH, 3FF1D2F1H
   \              EA3F79E92631
   \              08AC7C3F6DE7
   \              FBA9F1D2F13F
   \                     `?<Initializer for LQR_pitchGain>`:
   \   00000098   EC51B81E85EB       DC32 1EB851ECH, 3FE5EB85H, 0C8B43958H, 3F9FBE76H, 4189375H, 3FE10E56H
   \              E53F5839B4C8
   \              76BE9F3F7593
   \              1804560EE13F
    498          

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     InLoopLQRStep()                    8
     LQRControllerStep(Trajectory const *, double const *, double const *, double const *, double const *)
                                       24
     LatLQRStep(double const *, double const *, double const *, limits *)
                                       68
     LonLQRStep(double const *, double const *, double const *, limits *)
                                       68
     PID_control(double const *, double const *)
                                       12
     PID_step(double const *, double const *, double const *, limits *)
                                       84
     in_loop_PID_step()                12
     in_loop_feedback(double const *, double const *)
                                        4
     out_loop_PID_step(Trajectory const *)
                                       20
     out_loop_commend(double const *, double const *)
                                        8
     out_loop_feedback(double const *, double const *)
                                        8
     reset_controller()                20
     set_init_state()                   0
     set_limits()                      16


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     lastVelerrA1                      8
     lastVelerrB1                      8
     out_loop_X_PID                  104
     X_feedback                       48
     in_loop_roll_PID                 88
     X_limits                         72
     Y_limits                         72
     D_limits                         72
     roll_limits                      72
     pitch_limits                     72
     yaw_limits                       72
     outputs                         176
     PID_step(double const *, double const *, double const *, limits *)
                                     248
     ?Subroutine14                    20
     set_limits()                    480
     set_init_state()                 56
     reset_controller()              240
     ?Subroutine16                    12
     out_loop_commend(double const *, double const *)
                                      68
     ?Subroutine15                     6
     out_loop_feedback(double const *, double const *)
                                      68
     in_loop_feedback(double const *, double const *)
                                      66
     in_loop_PID_step()               80
     ?Subroutine17                     8
     out_loop_PID_step(Trajectory const *)
                                     140
     LonLQRStep(double const *, double const *, double const *, limits *)
                                     204
     LatLQRStep(double const *, double const *, double const *, limits *)
                                     216
     InLoopLQRStep()                  92
     LQRControllerStep(Trajectory const *, double const *, double const *, double const *, double const *)
                                      52
     PID_control(double const *, double const *)
                                      52
     ??DataTable0                      4
     ??DataTable1                      4
     ??DataTable2                      4
     ??DataTable3                      4
     ??DataTable12                     4
     ??DataTable15                     4
     ??DataTable17                     4
     ??DataTable18                     4
     ??DataTable20                     4
     ??DataTable21                     4
     ??DataTable22                     4
     ??DataTable23                     4
     ??DataTable24                     4
     ??DataTable25                     4
     ??DataTable26                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable30                     4
     ??DataTable31                     4
     ??DataTable32                     4
     ??DataTable33                     4
     ??DataTable34                     4
     ??DataTable35                     4
     ?<Initializer for outputs>      176
      Others                         216

 
 2 392 bytes in segment CODE
   176 bytes in segment DATA_I
   176 bytes in segment DATA_ID
   688 bytes in segment DATA_Z
    24 bytes in segment INITTAB
 
 2 200 bytes of CODE  memory (+ 216 bytes shared)
   176 bytes of CONST memory
   864 bytes of DATA  memory

Errors: none
Warnings: none
