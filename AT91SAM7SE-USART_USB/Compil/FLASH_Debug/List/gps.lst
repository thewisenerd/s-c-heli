##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.31A/W32 EVALUATION    07/Jan/2016  22:41:04 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\kalman\gps.c                                #
#    Command line    =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\kalman\gps.c -lC                            #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\ -o H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6- #
#                       27ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»® #
#                       +LQR_2014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Deb #
#                       ug\Obj\ -z9 --debug --cpu_mode thumb --endian        #
#                       little --cpu ARM7TDMI --stack_align 4 --interwork    #
#                       -e --fpu None --ec++ --dlib_config                   #
#                       D:\IAREWE431\ARM\LIB\dl4tptinl8n.h -I                #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\srcIAR\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\src\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\ -I       #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\kalman\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pcm\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\spi\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\timer\ #
#                        -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27 #
#                       ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+L #
#                       QR_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pid\  #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\avcs\  #
#                       -I D:\IAREWE431\ARM\INC\                             #
#    List file       =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\gps.lst                                            #
#    Object file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Obj #
#                       \gps.r79                                             #
#                                                                            #
#                                                                            #
##############################################################################

H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2014_7_31\kalman\gps.c
      1          #include <includs.h>

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code16?? __code __interwork __atpcs char *index(char *, int)
   \                     ??index:
   \                     ??index_1:
   \   00000000   0278               LDRB        R2,[R0, #+0]
   \   00000002   8A42               CMP         R2,R1
   \   00000004   05D0               BEQ         ??index_2
   \   00000006   021C               MOV         R2,R0
   \   00000008   401C               ADD         R0,R0,#+1
   \   0000000A   1278               LDRB        R2,[R2, #+0]
   \   0000000C   002A               CMP         R2,#+0
   \   0000000E   F7D1               BNE         ??index_1
   \   00000010   0020               MOV         R0,#+0
   \                     ??index_2:
   \   00000012   00B0               ADD         SP,#+0
   \   00000014   7047               BX          LR                 ;; return
      2          
      3          #define FILTER_LEN 3
      4          
      5               
      6          int  gps_update_flag ;

   \                                 In segment DATA_Z, align 4, align-sorted
      7          double input_xyz[3];
   \                     input_xyz:
   \   00000000                      DS8 24

   \                                 In segment DATA_Z, align 4, align-sorted
      8          double input_yaw=0;
      9          double input_uvw[3];
     10          char  zero_flag = 0;
     11          //double current_vel[3]; 
     12          double last_raw_current_xyz[3] = {0};
   \                     last_raw_current_xyz:
   \   00000000                      DS8 24
   \                     input_uvw:
   \   00000018                      DS8 24
   \                     input_yaw:
   \   00000030                      DS8 8

   \                                 In segment DATA_Z, align 4, align-sorted
     13          double last_raw_current_uvw[3] = {0};
   \                     last_raw_current_uvw:
   \   00000000                      DS8 24

   \                                 In segment DATA_Z, align 1, align-sorted
     14          char abnormal_limit_flag = 0;
   \                     abnormal_limit_flag:
   \   00000000                      DS8 1
     15          double zero_position0= 23.0419933*C_DEG2RAD,//23.1565516*C_DEG2RAD  //0.404671487796//
     16                 zero_position1= 113.40246*C_DEG2RAD,//113.341556*C_DEG2RAD
     17                 zero_position2= 38.0;
     18          
     19          	double gps_gga_time;
     20          	double gps_gga_latitude;
     21          	double gps_gga_longitude;
     22          	int gps_gga_quality;
     23          	int gps_gga_num_sats;
     24                  int last_gps_gga_num_sats;
     25          	double gps_gga_hdop;
     26          	double gps_gga_altitude;
     27          	double gps_gga_wgs_alt;
     28          
     29          	double gps_vtg_course;
     30          	double gps_vtg_speed;
     31          
     32          
     33          double f,e,zero_position_ECEF[3];
     34          double Re2t[3][3];
     35          /*---------------------------------------------------------------------------------*/     
     36          inline  double sqr(double	x)
     37          {
     38          	return x * x;
     39          }         
     40          

   \                                 In segment CODE, align 4, keep-with-next
     41          void ned2bf2(const double v_in[3],
     42                        const double theta,
     43                        double v_out[3])
     44          {
   \                     ??ned2bf2:
   \   00000000   F1B5               PUSH        {R0,R4-R7,LR}
   \   00000002   0E1C               MOV         R6,R1
   \   00000004   171C               MOV         R7,R2
   \   00000006   1D1C               MOV         R5,R3
     45            static double     cos_theta   =   1.0;
     46            static  double    sin_theta   =   0.0;
     47            static  double    last_theta  =   0.0;
     48            if( last_theta != theta)
   \   00000008   284C               LDR         R4,??ned2bf2_1     ;; ??cos_theta
   \   0000000A   201C               MOV         R0,R4
   \   0000000C   1030               ADD         R0,#+16
   \   0000000E   03C8               LDMIA       R0!,{R0,R1}
   \   00000010   321C               MOV         R2,R6
   \   00000012   3B1C               MOV         R3,R7
   \   00000014   ........           _BLF        __dNotEqual,??__dNotEqual??rT
   \   00000018   0028               CMP         R0,#+0
   \   0000001A   11D0               BEQ         ??ned2bf2_2
     49            {
     50                last_theta   =   theta;
   \   0000001C   201C               MOV         R0,R4
   \   0000001E   1030               ADD         R0,#+16
   \   00000020   C0C0               STMIA       R0!,{R6,R7}
     51                cos_theta    =   cos(theta) ;
   \   00000022   0122               MOV         R2,#+1
   \   00000024   301C               MOV         R0,R6
   \   00000026   391C               MOV         R1,R7
   \   00000028   ........           _BLF        _Sin,??_Sin??rT
   \   0000002C   03C4               STMIA       R4!,{R0,R1}
   \   0000002E   083C               SUB         R4,#+8
     52                sin_theta    =   sin(theta) ;
   \   00000030   0022               MOV         R2,#+0
   \   00000032   301C               MOV         R0,R6
   \   00000034   391C               MOV         R1,R7
   \   00000036   ........           _BLF        _Sin,??_Sin??rT
   \   0000003A   221C               MOV         R2,R4
   \   0000003C   0832               ADD         R2,#+8
   \   0000003E   03C2               STMIA       R2!,{R0,R1}
   \                     ??ned2bf2_2:
   \   00000040   0098               LDR         R0,[SP, #+0]
   \   00000042   0830               ADD         R0,#+8
   \   00000044   03C8               LDMIA       R0!,{R0,R1}
   \   00000046   221C               MOV         R2,R4
   \   00000048   0832               ADD         R2,#+8
   \   0000004A   0CCA               LDMIA       R2!,{R2,R3}
   \   0000004C   ........           _BLF        __dMul,??__dMul??rT
   \   00000050   061C               MOV         R6,R0
   \   00000052   0F1C               MOV         R7,R1
   \   00000054   0098               LDR         R0,[SP, #+0]
   \   00000056   0CC8               LDMIA       R0!,{R2,R3}
   \   00000058   03CC               LDMIA       R4!,{R0,R1}
   \   0000005A   083C               SUB         R4,#+8
   \   0000005C   ........           _BLF        __dMul,??__dMul??rT
   \   00000060   321C               MOV         R2,R6
   \   00000062   3B1C               MOV         R3,R7
   \   00000064   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000068   03C5               STMIA       R5!,{R0,R1}
   \   0000006A   083D               SUB         R5,#+8
     53            }
     54            
     55            v_out[0]  = v_in[0] * cos_theta + v_in[1] * sin_theta ;
     56            v_out[1]  = v_in[1] * cos_theta - v_in[0] * sin_theta ;     
   \   0000006C   2A1C               MOV         R2,R5
   \   0000006E   0832               ADD         R2,#+8
   \   00000070   04B4               PUSH        {R2}
   \   00000072   0198               LDR         R0,[SP, #+4]
   \   00000074   0CC8               LDMIA       R0!,{R2,R3}
   \   00000076   201C               MOV         R0,R4
   \   00000078   0830               ADD         R0,#+8
   \   0000007A   03C8               LDMIA       R0!,{R0,R1}
   \   0000007C   ........           _BLF        __dMul,??__dMul??rT
   \   00000080   061C               MOV         R6,R0
   \   00000082   0F1C               MOV         R7,R1
   \   00000084   0198               LDR         R0,[SP, #+4]
   \   00000086   0830               ADD         R0,#+8
   \   00000088   0CC8               LDMIA       R0!,{R2,R3}
   \   0000008A   03CC               LDMIA       R4!,{R0,R1}
   \   0000008C   ........           _BLF        __dMul,??__dMul??rT
   \   00000090   321C               MOV         R2,R6
   \   00000092   3B1C               MOV         R3,R7
   \   00000094   ........           _BLF        __dSub,??__dSub??rT
   \   00000098   04BC               POP         {R2}
   \   0000009A   03C2               STMIA       R2!,{R0,R1}
     57            v_out[2]  = v_in[2] ;
   \   0000009C   1035               ADD         R5,#+16
   \   0000009E   0098               LDR         R0,[SP, #+0]
   \   000000A0   1030               ADD         R0,#+16
   \   000000A2   03C8               LDMIA       R0!,{R0,R1}
   \   000000A4   03C5               STMIA       R5!,{R0,R1}
     58          }
   \   000000A6   F8BC               POP         {R3-R7}
   \   000000A8   01BC               POP         {R0}
   \   000000AA   0047               BX          R0                 ;; return
   \                     ??ned2bf2_1:
   \   000000AC   ........           DC32        ??cos_theta
     59          
     60          
     61          /*---------------------------------------------------------------------------------*/

   \                                 In segment CODE, align 4, keep-with-next
     62          int strntol(
     63          	char *			line,
     64          	size_t			len,
     65          	char **			line_out,
     66          	int			base
     67          )
     68          {
   \                     ??strntol:
   \   00000000   F3B5               PUSH        {R0,R1,R4-R7,LR}
   \   00000002   041C               MOV         R4,R0
   \   00000004   0F1C               MOV         R7,R1
   \   00000006   151C               MOV         R5,R2
   \   00000008   1E1C               MOV         R6,R3
     69          	char			buf[ 8 ];
     70          	if( len > 8 )
   \   0000000A   0929               CMP         R1,#+9
   \   0000000C   00D3               BCC         ??strntol_1
     71          		len = 8;
   \   0000000E   0827               MOV         R7,#+8
     72          
     73          	strncpy( buf, line, len );
   \                     ??strntol_1:
   \   00000010   3A1C               MOV         R2,R7
   \   00000012   211C               MOV         R1,R4
   \   00000014   6846               MOV         R0,SP
   \   00000016   ........           _BLF        strncpy,??strncpy??rT
     74          
     75          	buf[len] = '\0';
   \   0000001A   6846               MOV         R0,SP
   \   0000001C   0021               MOV         R1,#+0
   \   0000001E   C155               STRB        R1,[R0, R7]
     76          
     77          	if( line_out )
   \   00000020   002D               CMP         R5,#+0
   \   00000022   01D0               BEQ         ??strntol_2
     78          		*line_out = line + len;
   \   00000024   E019               ADD         R0,R4,R7
   \   00000026   2860               STR         R0,[R5, #+0]
     79          
     80          	return strtol( buf, 0, base );
   \                     ??strntol_2:
   \   00000028   321C               MOV         R2,R6
   \   0000002A   6846               MOV         R0,SP
   \   0000002C   ........           _BLF        strtol,??strtol??rT
   \   00000030   FCBC               POP         {R2-R7}
   \   00000032   02BC               POP         {R1}
   \   00000034   0847               BX          R1                 ;; return
     81          }
     82          /*---------------------------------------------------------------------------------*/
     83          /********************************************************
     84          * º¯ÊýËµÃ÷£º * gpsÊý¾Ý³õÊ¼»¯
     85                         È¡µÚ10×éÓÐÐ§µÄGPSÐÅÏ¢£¬³õÊ¼»¯NEDÔ­µãµÄ¾­Î³¶ÈºÍº£°Î
     86                         ÀûÓÃÕâ¸ö³õÊ¼NEDÔ­µã£¬»ñµÃECEF×ª»»µ½NEDµÄ×ø±ê×ª»»¾ØÕóRe2t
     87          * Èë¿Ú²ÎÊý£º * ÎÞ 
     88          * ·µ»Ø²ÎÊý£º * ÎÞ
     89          * ÊäÈëÊý¾ÝÊ¾Àý£º  
     90          * ×îºóÐÞ¸Ä£º * ³ÂÓÂ£¬2009-03-26
     91          * ±¸    ×¢£º * ÎÞ
     92          ********************************************************/ 

   \                                 In segment CODE, align 4, keep-with-next
     93          void gps_date_init(void)
     94          {
   \                     ??gps_date_init:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   88B0               SUB         SP,#+32
     95              static unsigned char first_entry = 1 ;
     96              if( first_entry == 100)/////100
   \   00000004   ....               LDR         R4,??DataTable0    ;; zero_flag
   \   00000006   6078               LDRB        R0,[R4, #+1]
   \   00000008   6428               CMP         R0,#+100
   \   0000000A   ....               BEQ         .+5
   \   0000000C   2CE1               B           ??gps_date_init_1
   \   0000000E   251C               MOV         R5,R4
   \   00000010   1C35               ADD         R5,#+28
   \   00000012   201C               MOV         R0,R4
   \   00000014   3C30               ADD         R0,#+60
   \   00000016   0CC8               LDMIA       R0!,{R2,R3}
   \   00000018   ....               LDR         R0,??DataTable3    ;; 0xa2529d39
   \   0000001A   ....               LDR         R1,??DataTable4    ;; 0x3f91df46
   \   0000001C   ........           _BLF        __dMul,??__dMul??rT
   \   00000020   03C5               STMIA       R5!,{R0,R1}
   \   00000022   251C               MOV         R5,R4
   \   00000024   2435               ADD         R5,#+36
   \   00000026   626C               LDR         R2,[R4, #+68]
   \   00000028   A36C               LDR         R3,[R4, #+72]
   \   0000002A   ....               LDR         R0,??DataTable3    ;; 0xa2529d39
   \   0000002C   ....               LDR         R1,??DataTable4    ;; 0x3f91df46
   \   0000002E   ........           _BLF        __dMul,??__dMul??rT
   \   00000032   03C5               STMIA       R5!,{R0,R1}
   \   00000034   251C               MOV         R5,R4
   \   00000036   2C35               ADD         R5,#+44
   \   00000038   626D               LDR         R2,[R4, #+84]
   \   0000003A   A36D               LDR         R3,[R4, #+88]
   \   0000003C   E06D               LDR         R0,[R4, #+92]
   \   0000003E   216E               LDR         R1,[R4, #+96]
   \   00000040   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000044   03C5               STMIA       R5!,{R0,R1}
     97              {
     98                   zero_position0 = gps_gga_latitude*C_DEG2RAD;
     99                   zero_position1 = gps_gga_longitude*C_DEG2RAD;
    100                   zero_position2 = gps_gga_altitude+gps_gga_wgs_alt;//×¢ÒâÊÇ¸Ã¼õ»¹ÊÇ¼Ó????????????????
    101                   
    102                   f = ((C_WGS84_a - C_WGS84_b) / C_WGS84_a);
   \   00000046   8D48               LDR         R0,??gps_date_init_2  ;; 0x85ed1bbc
   \   00000048   8D49               LDR         R1,??gps_date_init_2+0x4  ;; 0x3f6b775a
   \   0000004A   6066               STR         R0,[R4, #+100]
   \   0000004C   A166               STR         R1,[R4, #+104]
    103                   e = sqrt( 2*f - f*f );
   \   0000004E   8D48               LDR         R0,??gps_date_init_2+0x8  ;; 0xf2f6f999
   \   00000050   8D49               LDR         R1,??gps_date_init_2+0xC  ;; 0x3f7b6b90
   \   00000052   ........           _BLF        sqrt,??sqrt??rT
   \   00000056   E066               STR         R0,[R4, #+108]
   \   00000058   2167               STR         R1,[R4, #+112]
    104                   double N = C_WGS84_a/sqrt( 1 - e*e*sqr(sin(zero_position0)));
   \   0000005A   0022               MOV         R2,#+0
   \   0000005C   201C               MOV         R0,R4
   \   0000005E   1C30               ADD         R0,#+28
   \   00000060   03C8               LDMIA       R0!,{R0,R1}
   \   00000062   ........           _BLF        _Sin,??_Sin??rT
   \   00000066   061C               MOV         R6,R0
   \   00000068   0F1C               MOV         R7,R1
   \   0000006A   06AD               ADD         R5,SP,#+24
   \   0000006C   E26E               LDR         R2,[R4, #+108]
   \   0000006E   236F               LDR         R3,[R4, #+112]
   \   00000070   101C               MOV         R0,R2
   \   00000072   191C               MOV         R1,R3
   \   00000074   ........           _BLF        __dMul,??__dMul??rT
   \   00000078   03C5               STMIA       R5!,{R0,R1}
   \   0000007A   321C               MOV         R2,R6
   \   0000007C   3B1C               MOV         R3,R7
   \   0000007E   301C               MOV         R0,R6
   \   00000080   391C               MOV         R1,R7
   \   00000082   ........           _BLF        __dMul,??__dMul??rT
   \   00000086   06AA               ADD         R2,SP,#+24
   \   00000088   0CCA               LDMIA       R2!,{R2,R3}
   \   0000008A   ........           _BLF        __dMul,??__dMul??rT
   \   0000008E   021C               MOV         R2,R0
   \   00000090   0B1C               MOV         R3,R1
   \   00000092   0020               MOV         R0,#+0
   \   00000094   ....               LDR         R1,??DataTable6    ;; 0x3ff00000
   \   00000096   ........           _BLF        __dSub,??__dSub??rT
   \   0000009A   ........           _BLF        sqrt,??sqrt??rT
   \   0000009E   021C               MOV         R2,R0
   \   000000A0   0B1C               MOV         R3,R1
   \   000000A2   8020               MOV         R0,#+128
   \   000000A4   C005               LSL         R0,R0,#+23         ;; #+1073741824
   \   000000A6   7949               LDR         R1,??gps_date_init_2+0x10  ;; 0x415854a6
   \   000000A8   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000AC   04AA               ADD         R2,SP,#+16
   \   000000AE   03C2               STMIA       R2!,{R0,R1}
    105                   zero_position_ECEF[0]=(N + zero_position2) * cos(zero_position0) * cos(zero_position1);
   \   000000B0   0122               MOV         R2,#+1
   \   000000B2   201C               MOV         R0,R4
   \   000000B4   1C30               ADD         R0,#+28
   \   000000B6   03C8               LDMIA       R0!,{R0,R1}
   \   000000B8   ........           _BLF        _Sin,??_Sin??rT
   \   000000BC   6A46               MOV         R2,SP
   \   000000BE   03C2               STMIA       R2!,{R0,R1}
   \   000000C0   02AD               ADD         R5,SP,#+8
   \   000000C2   04A8               ADD         R0,SP,#+16
   \   000000C4   03C8               LDMIA       R0!,{R0,R1}
   \   000000C6   221C               MOV         R2,R4
   \   000000C8   2C32               ADD         R2,#+44
   \   000000CA   0CCA               LDMIA       R2!,{R2,R3}
   \   000000CC   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000D0   03C5               STMIA       R5!,{R0,R1}
   \   000000D2   0122               MOV         R2,#+1
   \   000000D4   201C               MOV         R0,R4
   \   000000D6   2430               ADD         R0,#+36
   \   000000D8   03C8               LDMIA       R0!,{R0,R1}
   \   000000DA   ........           _BLF        _Sin,??_Sin??rT
   \   000000DE   061C               MOV         R6,R0
   \   000000E0   0F1C               MOV         R7,R1
   \   000000E2   02A8               ADD         R0,SP,#+8
   \   000000E4   0CC8               LDMIA       R0!,{R2,R3}
   \   000000E6   6846               MOV         R0,SP
   \   000000E8   03C8               LDMIA       R0!,{R0,R1}
   \   000000EA   ........           _BLF        __dMul,??__dMul??rT
   \   000000EE   321C               MOV         R2,R6
   \   000000F0   3B1C               MOV         R3,R7
   \   000000F2   ........           _BLF        __dMul,??__dMul??rT
   \   000000F6   221D               ADD         R2,R4,#+4
   \   000000F8   03C2               STMIA       R2!,{R0,R1}
    106                   zero_position_ECEF[1]=(N + zero_position2) * cos(zero_position0) * sin(zero_position1);
   \   000000FA   0122               MOV         R2,#+1
   \   000000FC   201C               MOV         R0,R4
   \   000000FE   1C30               ADD         R0,#+28
   \   00000100   03C8               LDMIA       R0!,{R0,R1}
   \   00000102   ........           _BLF        _Sin,??_Sin??rT
   \   00000106   6A46               MOV         R2,SP
   \   00000108   03C2               STMIA       R2!,{R0,R1}
   \   0000010A   0022               MOV         R2,#+0
   \   0000010C   201C               MOV         R0,R4
   \   0000010E   2430               ADD         R0,#+36
   \   00000110   03C8               LDMIA       R0!,{R0,R1}
   \   00000112   ........           _BLF        _Sin,??_Sin??rT
   \   00000116   061C               MOV         R6,R0
   \   00000118   0F1C               MOV         R7,R1
   \   0000011A   02A8               ADD         R0,SP,#+8
   \   0000011C   0CC8               LDMIA       R0!,{R2,R3}
   \   0000011E   6846               MOV         R0,SP
   \   00000120   03C8               LDMIA       R0!,{R0,R1}
   \   00000122   ........           _BLF        __dMul,??__dMul??rT
   \   00000126   321C               MOV         R2,R6
   \   00000128   3B1C               MOV         R3,R7
   \   0000012A   ........           _BLF        __dMul,??__dMul??rT
   \   0000012E   221C               MOV         R2,R4
   \   00000130   0C32               ADD         R2,#+12
   \   00000132   03C2               STMIA       R2!,{R0,R1}
    107                   zero_position_ECEF[2]=(N*(1-e*e) + zero_position2) * sin(zero_position0);
   \   00000134   0022               MOV         R2,#+0
   \   00000136   201C               MOV         R0,R4
   \   00000138   1C30               ADD         R0,#+28
   \   0000013A   03C8               LDMIA       R0!,{R0,R1}
   \   0000013C   ........           _BLF        _Sin,??_Sin??rT
   \   00000140   061C               MOV         R6,R0
   \   00000142   0F1C               MOV         R7,R1
   \   00000144   0020               MOV         R0,#+0
   \   00000146   ....               LDR         R1,??DataTable6    ;; 0x3ff00000
   \   00000148   06AA               ADD         R2,SP,#+24
   \   0000014A   0CCA               LDMIA       R2!,{R2,R3}
   \   0000014C   ........           _BLF        __dSub,??__dSub??rT
   \   00000150   021C               MOV         R2,R0
   \   00000152   0B1C               MOV         R3,R1
   \   00000154   04A8               ADD         R0,SP,#+16
   \   00000156   03C8               LDMIA       R0!,{R0,R1}
   \   00000158   ........           _BLF        __dMul,??__dMul??rT
   \   0000015C   021C               MOV         R2,R0
   \   0000015E   0B1C               MOV         R3,R1
   \   00000160   201C               MOV         R0,R4
   \   00000162   2C30               ADD         R0,#+44
   \   00000164   03C8               LDMIA       R0!,{R0,R1}
   \   00000166   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000016A   321C               MOV         R2,R6
   \   0000016C   3B1C               MOV         R3,R7
   \   0000016E   ........           _BLF        __dMul,??__dMul??rT
   \   00000172   221C               MOV         R2,R4
   \   00000174   1432               ADD         R2,#+20
   \   00000176   03C2               STMIA       R2!,{R0,R1}
    108          		 //---------------------------
    109              
    110              double		clat = cos(zero_position0);
   \   00000178   0122               MOV         R2,#+1
   \   0000017A   201C               MOV         R0,R4
   \   0000017C   1C30               ADD         R0,#+28
   \   0000017E   03C8               LDMIA       R0!,{R0,R1}
   \   00000180   ........           _BLF        _Sin,??_Sin??rT
   \   00000184   061C               MOV         R6,R0
   \   00000186   0F1C               MOV         R7,R1
    111              double		clon = cos(zero_position1);
   \   00000188   0122               MOV         R2,#+1
   \   0000018A   201C               MOV         R0,R4
   \   0000018C   2430               ADD         R0,#+36
   \   0000018E   03C8               LDMIA       R0!,{R0,R1}
   \   00000190   ........           _BLF        _Sin,??_Sin??rT
   \   00000194   6A46               MOV         R2,SP
   \   00000196   03C2               STMIA       R2!,{R0,R1}
    112              double		slat = sin(zero_position0);
   \   00000198   0022               MOV         R2,#+0
   \   0000019A   201C               MOV         R0,R4
   \   0000019C   1C30               ADD         R0,#+28
   \   0000019E   03C8               LDMIA       R0!,{R0,R1}
   \   000001A0   ........           _BLF        _Sin,??_Sin??rT
   \   000001A4   02AA               ADD         R2,SP,#+8
   \   000001A6   03C2               STMIA       R2!,{R0,R1}
    113              double		slon = sin(zero_position1);
   \   000001A8   0022               MOV         R2,#+0
   \   000001AA   201C               MOV         R0,R4
   \   000001AC   2430               ADD         R0,#+36
   \   000001AE   03C8               LDMIA       R0!,{R0,R1}
   \   000001B0   ........           _BLF        _Sin,??_Sin??rT
   \   000001B4   04AA               ADD         R2,SP,#+16
   \   000001B6   03C2               STMIA       R2!,{R0,R1}
    114          
    115          	Re2t[0][0] = -slat*clon;
   \   000001B8   354D               LDR         R5,??gps_date_init_2+0x14  ;; Re2t
   \   000001BA   02A8               ADD         R0,SP,#+8
   \   000001BC   03C8               LDMIA       R0!,{R0,R1}
   \   000001BE   021C               MOV         R2,R0
   \   000001C0   0B1C               MOV         R3,R1
   \   000001C2   6846               MOV         R0,SP
   \   000001C4   03C8               LDMIA       R0!,{R0,R1}
   \   000001C6   ........           _BLF        __dMul,??__dMul??rT
   \   000001CA   8022               MOV         R2,#+128
   \   000001CC   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   000001CE   5140               EOR         R1,R2
   \   000001D0   03C5               STMIA       R5!,{R0,R1}
   \   000001D2   083D               SUB         R5,#+8
    116          	Re2t[0][1] = -slat*slon;
   \   000001D4   2A1C               MOV         R2,R5
   \   000001D6   0832               ADD         R2,#+8
   \   000001D8   04B4               PUSH        {R2}
   \   000001DA   03A8               ADD         R0,SP,#+12
   \   000001DC   03C8               LDMIA       R0!,{R0,R1}
   \   000001DE   021C               MOV         R2,R0
   \   000001E0   0B1C               MOV         R3,R1
   \   000001E2   05A8               ADD         R0,SP,#+20
   \   000001E4   03C8               LDMIA       R0!,{R0,R1}
   \   000001E6   ........           _BLF        __dMul,??__dMul??rT
   \   000001EA   8022               MOV         R2,#+128
   \   000001EC   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   000001EE   5140               EOR         R1,R2
   \   000001F0   04BC               POP         {R2}
   \   000001F2   03C2               STMIA       R2!,{R0,R1}
    117          	Re2t[0][2] =  clat;
   \   000001F4   281C               MOV         R0,R5
   \   000001F6   1030               ADD         R0,#+16
   \   000001F8   C0C0               STMIA       R0!,{R6,R7}
    118          
    119          	Re2t[1][0] = -slon;
   \   000001FA   2A1C               MOV         R2,R5
   \   000001FC   1832               ADD         R2,#+24
   \   000001FE   04A8               ADD         R0,SP,#+16
   \   00000200   03C8               LDMIA       R0!,{R0,R1}
   \   00000202   8023               MOV         R3,#+128
   \   00000204   1B06               LSL         R3,R3,#+24         ;; #-2147483648
   \   00000206   5940               EOR         R1,R3
   \   00000208   03C2               STMIA       R2!,{R0,R1}
    120          	Re2t[1][1] =  clon;
   \   0000020A   2A1C               MOV         R2,R5
   \   0000020C   2032               ADD         R2,#+32
   \   0000020E   6846               MOV         R0,SP
   \   00000210   03C8               LDMIA       R0!,{R0,R1}
   \   00000212   03C2               STMIA       R2!,{R0,R1}
    121          	Re2t[1][2] =  0.0;
   \   00000214   2A1C               MOV         R2,R5
   \   00000216   2832               ADD         R2,#+40
   \   00000218   0020               MOV         R0,#+0
   \   0000021A   0021               MOV         R1,#+0
   \   0000021C   03C2               STMIA       R2!,{R0,R1}
    122          
    123          	Re2t[2][0] = -clat*clon;
   \   0000021E   2A1C               MOV         R2,R5
   \   00000220   3032               ADD         R2,#+48
   \   00000222   04B4               PUSH        {R2}
   \   00000224   01A8               ADD         R0,SP,#+4
   \   00000226   03C8               LDMIA       R0!,{R0,R1}
   \   00000228   321C               MOV         R2,R6
   \   0000022A   3B1C               MOV         R3,R7
   \   0000022C   ........           _BLF        __dMul,??__dMul??rT
   \   00000230   8022               MOV         R2,#+128
   \   00000232   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   00000234   5140               EOR         R1,R2
   \   00000236   04BC               POP         {R2}
   \   00000238   03C2               STMIA       R2!,{R0,R1}
    124          	Re2t[2][1] = -clat*slon;
   \   0000023A   2A1C               MOV         R2,R5
   \   0000023C   3832               ADD         R2,#+56
   \   0000023E   04B4               PUSH        {R2}
   \   00000240   321C               MOV         R2,R6
   \   00000242   3B1C               MOV         R3,R7
   \   00000244   05A8               ADD         R0,SP,#+20
   \   00000246   03C8               LDMIA       R0!,{R0,R1}
   \   00000248   ........           _BLF        __dMul,??__dMul??rT
   \   0000024C   8022               MOV         R2,#+128
   \   0000024E   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   00000250   5140               EOR         R1,R2
   \   00000252   04BC               POP         {R2}
   \   00000254   03C2               STMIA       R2!,{R0,R1}
    125          	Re2t[2][2] = -slat;//ÎªÊ²Ã´Ö»¸ø¾ØÕó¸³ÖµÒ»´Î£¿£¿£¿syc
   \   00000256   4035               ADD         R5,#+64
   \   00000258   02A8               ADD         R0,SP,#+8
   \   0000025A   03C8               LDMIA       R0!,{R0,R1}
   \   0000025C   8022               MOV         R2,#+128
   \   0000025E   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   00000260   5140               EOR         R1,R2
   \   00000262   03C5               STMIA       R5!,{R0,R1}
    126              zero_flag = 1;  //È·¶¨Î»ÖÃÁãµãÖ®ºó ½øÐÐgpsÌø±äÏÞÖÆ
   \   00000264   0120               MOV         R0,#+1
   \   00000266   2070               STRB        R0,[R4, #+0]
    127             }
    128             
    129              first_entry ++ ;
   \                     ??gps_date_init_1:
   \   00000268   6078               LDRB        R0,[R4, #+1]
   \   0000026A   401C               ADD         R0,R0,#+1
    130              if(first_entry >=200)
   \   0000026C   0006               LSL         R0,R0,#+24
   \   0000026E   000E               LSR         R0,R0,#+24
   \   00000270   C828               CMP         R0,#+200
   \   00000272   00D3               BCC         ??gps_date_init_3
    131          	{
    132          		first_entry = 150;
   \   00000274   9620               MOV         R0,#+150
   \                     ??gps_date_init_3:
   \   00000276   6070               STRB        R0,[R4, #+1]
    133          	}
    134          
    135          }
   \   00000278   08B0               ADD         SP,#+32
   \   0000027A   ....               B           ?Subroutine12
   \                     ??gps_date_init_2:
   \   0000027C   BC1BED85           DC32        0x85ed1bbc
   \   00000280   5A776B3F           DC32        0x3f6b775a
   \   00000284   99F9F6F2           DC32        0xf2f6f999
   \   00000288   906B7B3F           DC32        0x3f7b6b90
   \   0000028C   A6545841           DC32        0x415854a6
   \   00000290   ........           DC32        Re2t

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine12:
   \   00000000   F0BC               POP         {R4-R7}
   \   00000002   01BC               POP         {R0}
   \   00000004   0047               BX          R0                 ;; return
   \   00000006   C046               NOP         
   \                     ??Subroutine12_0:
   \   00000008   ........           DC32        gga_save_line
   \   0000000C   0088C340           DC32        0x40c38800
   \   00000010   10270000           DC32        0x2710
   \   00000014   0000C842           DC32        0x42c80000
   \   00000018   00004E40           DC32        0x404e0000
   \   0000001C   0000F0BF           DC32        0xbff00000
   \   00000020   00004E40           DC32        0x404e0000
   \   00000024   0000F0BF           DC32        0xbff00000
   \   00000028   00003440           DC32        0x40340000
   \   0000002C   000034C0           DC32        0xc0340000

   \                                 In segment DATA_I, align 4, align-sorted
   \                     zero_flag:
   \   00000000                      DS8 1
   \   00000001                      REQUIRE `?<Initializer for zero_flag>`
   \   00000001                      DS8 1
   \   00000002                      REQUIRE `?<Initializer for first_entry>`
   \   00000002                      DS8 2
   \                     zero_position_ECEF:
   \   00000004                      DS8 24
   \   0000001C                      REQUIRE `?<Initializer for zero_position_ECEF>`
   \                     zero_position0:
   \   0000001C                      DS8 8
   \   00000024                      REQUIRE `?<Initializer for zero_position0>`
   \                     zero_position1:
   \   00000024                      DS8 8
   \   0000002C                      REQUIRE `?<Initializer for zero_position1>`
   \                     zero_position2:
   \   0000002C                      DS8 8
   \   00000034                      REQUIRE `?<Initializer for zero_position2>`
   \                     gps_gga_time:
   \   00000034                      DS8 8
   \   0000003C                      REQUIRE `?<Initializer for gps_gga_time>`
   \                     gps_gga_latitude:
   \   0000003C                      DS8 8
   \   00000044                      REQUIRE `?<Initializer for gps_gga_latitude>`
   \                     gps_gga_longitude:
   \   00000044                      DS8 8
   \   0000004C                      REQUIRE `?<Initializer for gps_gga_longitude>`
   \                     gps_gga_hdop:
   \   0000004C                      DS8 8
   \   00000054                      REQUIRE `?<Initializer for gps_gga_hdop>`
   \                     gps_gga_altitude:
   \   00000054                      DS8 8
   \   0000005C                      REQUIRE `?<Initializer for gps_gga_altitude>`
   \                     gps_gga_wgs_alt:
   \   0000005C                      DS8 8
   \   00000064                      REQUIRE `?<Initializer for gps_gga_wgs_alt>`
   \                     f:
   \   00000064                      DS8 8
   \   0000006C                      REQUIRE `?<Initializer for f>`
   \                     e:
   \   0000006C                      DS8 8
   \   00000074                      REQUIRE `?<Initializer for e>`
   \                     gps_update_flag:
   \   00000074                      DS8 4
   \   00000078                      REQUIRE `?<Initializer for gps_update_flag>`
   \                     gps_gga_quality:
   \   00000078                      DS8 4
   \   0000007C                      REQUIRE `?<Initializer for gps_gga_quality>`
   \                     gps_gga_num_sats:
   \   0000007C                      DS8 4
   \   00000080                      REQUIRE `?<Initializer for gps_gga_num_sats>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ??cos_theta:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for cos_theta>`
   \   00000008                      DS8 8
   \   00000010                      REQUIRE `?<Initializer for sin_theta>`
   \   00000010                      DS8 8
   \   00000018                      REQUIRE `?<Initializer for last_theta>`
    136          
    137          /*-------------------------------»»Ëã³ÉECEF--------------------------------------------*/     

   \                                 In segment CODE, align 4, keep-with-next
    138          inline void llh2ECEF( double *llh)
    139          {
   \                     ??llh2ECEF:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   8CB0               SUB         SP,#+48
   \   00000004   041C               MOV         R4,R0
    140          	double value[3];
    141          	double	N = C_WGS84_a/sqrt( 1 - e*e*sqr(sin(llh[0])));
   \   00000006   0022               MOV         R2,#+0
   \   00000008   03CC               LDMIA       R4!,{R0,R1}
   \   0000000A   083C               SUB         R4,#+8
   \   0000000C   ........           _BLF        _Sin,??_Sin??rT
   \   00000010   061C               MOV         R6,R0
   \   00000012   0F1C               MOV         R7,R1
   \   00000014   4C48               LDR         R0,??llh2ECEF_1    ;; zero_flag
   \   00000016   04AD               ADD         R5,SP,#+16
   \   00000018   C26E               LDR         R2,[R0, #+108]
   \   0000001A   036F               LDR         R3,[R0, #+112]
   \   0000001C   6C30               ADD         R0,#+108
   \   0000001E   03C8               LDMIA       R0!,{R0,R1}
   \   00000020   ........           _BLF        __dMul,??__dMul??rT
   \   00000024   03C5               STMIA       R5!,{R0,R1}
   \   00000026   321C               MOV         R2,R6
   \   00000028   3B1C               MOV         R3,R7
   \   0000002A   301C               MOV         R0,R6
   \   0000002C   391C               MOV         R1,R7
   \   0000002E   ........           _BLF        __dMul,??__dMul??rT
   \   00000032   04AA               ADD         R2,SP,#+16
   \   00000034   0CCA               LDMIA       R2!,{R2,R3}
   \   00000036   ........           _BLF        __dMul,??__dMul??rT
   \   0000003A   021C               MOV         R2,R0
   \   0000003C   0B1C               MOV         R3,R1
   \   0000003E   0020               MOV         R0,#+0
   \   00000040   4249               LDR         R1,??llh2ECEF_1+0x4  ;; 0x3ff00000
   \   00000042   ........           _BLF        __dSub,??__dSub??rT
   \   00000046   ........           _BLF        sqrt,??sqrt??rT
   \   0000004A   021C               MOV         R2,R0
   \   0000004C   0B1C               MOV         R3,R1
   \   0000004E   8020               MOV         R0,#+128
   \   00000050   C005               LSL         R0,R0,#+23         ;; #+1073741824
   \   00000052   3F49               LDR         R1,??llh2ECEF_1+0x8  ;; 0x415854a6
   \   00000054   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000058   02AA               ADD         R2,SP,#+8
   \   0000005A   03C2               STMIA       R2!,{R0,R1}
    142          
    143          	value[0]= (N + llh[2]) * cos(llh[0]) * cos(llh[1]);
   \   0000005C   0122               MOV         R2,#+1
   \   0000005E   03CC               LDMIA       R4!,{R0,R1}
   \   00000060   083C               SUB         R4,#+8
   \   00000062   ........           _BLF        _Sin,??_Sin??rT
   \   00000066   6A46               MOV         R2,SP
   \   00000068   03C2               STMIA       R2!,{R0,R1}
   \   0000006A   0122               MOV         R2,#+1
   \   0000006C   201C               MOV         R0,R4
   \   0000006E   0830               ADD         R0,#+8
   \   00000070   03C8               LDMIA       R0!,{R0,R1}
   \   00000072   ........           _BLF        _Sin,??_Sin??rT
   \   00000076   061C               MOV         R6,R0
   \   00000078   0F1C               MOV         R7,R1
   \   0000007A   02A8               ADD         R0,SP,#+8
   \   0000007C   0CC8               LDMIA       R0!,{R2,R3}
   \   0000007E   201C               MOV         R0,R4
   \   00000080   1030               ADD         R0,#+16
   \   00000082   03C8               LDMIA       R0!,{R0,R1}
   \   00000084   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000088   021C               MOV         R2,R0
   \   0000008A   0B1C               MOV         R3,R1
   \   0000008C   6846               MOV         R0,SP
   \   0000008E   03C8               LDMIA       R0!,{R0,R1}
   \   00000090   ........           _BLF        __dMul,??__dMul??rT
   \   00000094   321C               MOV         R2,R6
   \   00000096   3B1C               MOV         R3,R7
   \   00000098   ........           _BLF        __dMul,??__dMul??rT
   \   0000009C   06AA               ADD         R2,SP,#+24
   \   0000009E   03C2               STMIA       R2!,{R0,R1}
    144                  value[1]= (N + llh[2]) * cos(llh[0]) * sin(llh[1]);
   \   000000A0   0122               MOV         R2,#+1
   \   000000A2   03CC               LDMIA       R4!,{R0,R1}
   \   000000A4   083C               SUB         R4,#+8
   \   000000A6   ........           _BLF        _Sin,??_Sin??rT
   \   000000AA   6A46               MOV         R2,SP
   \   000000AC   03C2               STMIA       R2!,{R0,R1}
   \   000000AE   0022               MOV         R2,#+0
   \   000000B0   201C               MOV         R0,R4
   \   000000B2   0830               ADD         R0,#+8
   \   000000B4   03C8               LDMIA       R0!,{R0,R1}
   \   000000B6   ........           _BLF        _Sin,??_Sin??rT
   \   000000BA   061C               MOV         R6,R0
   \   000000BC   0F1C               MOV         R7,R1
   \   000000BE   02A8               ADD         R0,SP,#+8
   \   000000C0   0CC8               LDMIA       R0!,{R2,R3}
   \   000000C2   201C               MOV         R0,R4
   \   000000C4   1030               ADD         R0,#+16
   \   000000C6   03C8               LDMIA       R0!,{R0,R1}
   \   000000C8   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000CC   021C               MOV         R2,R0
   \   000000CE   0B1C               MOV         R3,R1
   \   000000D0   6846               MOV         R0,SP
   \   000000D2   03C8               LDMIA       R0!,{R0,R1}
   \   000000D4   ........           _BLF        __dMul,??__dMul??rT
   \   000000D8   321C               MOV         R2,R6
   \   000000DA   3B1C               MOV         R3,R7
   \   000000DC   ........           _BLF        __dMul,??__dMul??rT
   \   000000E0   06AA               ADD         R2,SP,#+24
   \   000000E2   0832               ADD         R2,#+8
   \   000000E4   03C2               STMIA       R2!,{R0,R1}
    145          	value[2]= (N*(1-e*e) + llh[2]) * sin(llh[0]);
   \   000000E6   0022               MOV         R2,#+0
   \   000000E8   03CC               LDMIA       R4!,{R0,R1}
   \   000000EA   083C               SUB         R4,#+8
   \   000000EC   ........           _BLF        _Sin,??_Sin??rT
   \   000000F0   061C               MOV         R6,R0
   \   000000F2   0F1C               MOV         R7,R1
   \   000000F4   0020               MOV         R0,#+0
   \   000000F6   1549               LDR         R1,??llh2ECEF_1+0x4  ;; 0x3ff00000
   \   000000F8   04AA               ADD         R2,SP,#+16
   \   000000FA   0CCA               LDMIA       R2!,{R2,R3}
   \   000000FC   ........           _BLF        __dSub,??__dSub??rT
   \   00000100   021C               MOV         R2,R0
   \   00000102   0B1C               MOV         R3,R1
   \   00000104   02A8               ADD         R0,SP,#+8
   \   00000106   03C8               LDMIA       R0!,{R0,R1}
   \   00000108   ........           _BLF        __dMul,??__dMul??rT
   \   0000010C   021C               MOV         R2,R0
   \   0000010E   0B1C               MOV         R3,R1
   \   00000110   201C               MOV         R0,R4
   \   00000112   1030               ADD         R0,#+16
   \   00000114   03C8               LDMIA       R0!,{R0,R1}
   \   00000116   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000011A   321C               MOV         R2,R6
   \   0000011C   3B1C               MOV         R3,R7
   \   0000011E   ........           _BLF        __dMul,??__dMul??rT
   \   00000122   06AA               ADD         R2,SP,#+24
   \   00000124   1032               ADD         R2,#+16
   \   00000126   03C2               STMIA       R2!,{R0,R1}
    146                  llh[0] = value[0];
   \   00000128   06AA               ADD         R2,SP,#+24
   \   0000012A   0CCA               LDMIA       R2!,{R2,R3}
   \   0000012C   0CC4               STMIA       R4!,{R2,R3}
   \   0000012E   083C               SUB         R4,#+8
    147                  llh[1] = value[1];
   \   00000130   251C               MOV         R5,R4
   \   00000132   0835               ADD         R5,#+8
   \   00000134   06AA               ADD         R2,SP,#+24
   \   00000136   0832               ADD         R2,#+8
   \   00000138   0CCA               LDMIA       R2!,{R2,R3}
   \   0000013A   0CC5               STMIA       R5!,{R2,R3}
    148                  llh[2] = value[2];
   \   0000013C   1034               ADD         R4,#+16
   \   0000013E   03C4               STMIA       R4!,{R0,R1}
    149          	return ;
   \   00000140   0CB0               ADD         SP,#+48
   \   00000142   F0BC               POP         {R4-R7}
   \   00000144   01BC               POP         {R0}
   \   00000146   0047               BX          R0                 ;; return
   \                     ??llh2ECEF_1:
   \   00000148   ........           DC32        zero_flag
   \   0000014C   0000F03F           DC32        0x3ff00000
   \   00000150   A6545841           DC32        0x415854a6
    150          }
    151          /*-------------------------------»»Ëã³ÉNED--------------------------------------------*/

   \                                 In segment CODE, align 4, keep-with-next
    152          inline void ECEF2Tangent(double *ECFF)
    153          {
   \                     ??ECEF2Tangent:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   88B0               SUB         SP,#+32
   \   00000004   041C               MOV         R4,R0
    154          	double value[3];
    155                  
    156                  value[0] = Re2t[0][0]*ECFF[0]+Re2t[0][1]*ECFF[1]+Re2t[0][2]*ECFF[2];
   \   00000006   404D               LDR         R5,??ECEF2Tangent_1  ;; Re2t
   \   00000008   02AA               ADD         R2,SP,#+8
   \   0000000A   04B4               PUSH        {R2}
   \   0000000C   281C               MOV         R0,R5
   \   0000000E   1030               ADD         R0,#+16
   \   00000010   0CC8               LDMIA       R0!,{R2,R3}
   \   00000012   201C               MOV         R0,R4
   \   00000014   1030               ADD         R0,#+16
   \   00000016   03C8               LDMIA       R0!,{R0,R1}
   \   00000018   ........           _BLF        __dMul,??__dMul??rT
   \   0000001C   03B4               PUSH        {R0,R1}
   \   0000001E   281C               MOV         R0,R5
   \   00000020   0830               ADD         R0,#+8
   \   00000022   0CC8               LDMIA       R0!,{R2,R3}
   \   00000024   201C               MOV         R0,R4
   \   00000026   0830               ADD         R0,#+8
   \   00000028   03C8               LDMIA       R0!,{R0,R1}
   \   0000002A   ........           _BLF        __dMul,??__dMul??rT
   \   0000002E   061C               MOV         R6,R0
   \   00000030   0F1C               MOV         R7,R1
   \   00000032   0CCD               LDMIA       R5!,{R2,R3}
   \   00000034   083D               SUB         R5,#+8
   \   00000036   03CC               LDMIA       R4!,{R0,R1}
   \   00000038   083C               SUB         R4,#+8
   \   0000003A   ........           _BLF        __dMul,??__dMul??rT
   \   0000003E   321C               MOV         R2,R6
   \   00000040   3B1C               MOV         R3,R7
   \   00000042   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000046   0CBC               POP         {R2,R3}
   \   00000048   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000004C   04BC               POP         {R2}
   \   0000004E   03C2               STMIA       R2!,{R0,R1}
    157                  value[1] = Re2t[1][0]*ECFF[0]+Re2t[1][1]*ECFF[1]+Re2t[1][2]*ECFF[2];
   \   00000050   6A46               MOV         R2,SP
   \   00000052   04B4               PUSH        {R2}
   \   00000054   281C               MOV         R0,R5
   \   00000056   2830               ADD         R0,#+40
   \   00000058   0CC8               LDMIA       R0!,{R2,R3}
   \   0000005A   201C               MOV         R0,R4
   \   0000005C   1030               ADD         R0,#+16
   \   0000005E   03C8               LDMIA       R0!,{R0,R1}
   \   00000060   ........           _BLF        __dMul,??__dMul??rT
   \   00000064   03B4               PUSH        {R0,R1}
   \   00000066   281C               MOV         R0,R5
   \   00000068   2030               ADD         R0,#+32
   \   0000006A   0CC8               LDMIA       R0!,{R2,R3}
   \   0000006C   201C               MOV         R0,R4
   \   0000006E   0830               ADD         R0,#+8
   \   00000070   03C8               LDMIA       R0!,{R0,R1}
   \   00000072   ........           _BLF        __dMul,??__dMul??rT
   \   00000076   061C               MOV         R6,R0
   \   00000078   0F1C               MOV         R7,R1
   \   0000007A   281C               MOV         R0,R5
   \   0000007C   1830               ADD         R0,#+24
   \   0000007E   0CC8               LDMIA       R0!,{R2,R3}
   \   00000080   03CC               LDMIA       R4!,{R0,R1}
   \   00000082   083C               SUB         R4,#+8
   \   00000084   ........           _BLF        __dMul,??__dMul??rT
   \   00000088   321C               MOV         R2,R6
   \   0000008A   3B1C               MOV         R3,R7
   \   0000008C   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000090   0CBC               POP         {R2,R3}
   \   00000092   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000096   04BC               POP         {R2}
   \   00000098   03C2               STMIA       R2!,{R0,R1}
   \   0000009A   02AA               ADD         R2,SP,#+8
   \   0000009C   0832               ADD         R2,#+8
   \   0000009E   6846               MOV         R0,SP
   \   000000A0   03C8               LDMIA       R0!,{R0,R1}
   \   000000A2   03C2               STMIA       R2!,{R0,R1}
    158                  value[2] = Re2t[2][0]*ECFF[0]+Re2t[2][1]*ECFF[1]+Re2t[2][2]*ECFF[2];
   \   000000A4   286C               LDR         R0,[R5, #+64]
   \   000000A6   696C               LDR         R1,[R5, #+68]
   \   000000A8   221C               MOV         R2,R4
   \   000000AA   1032               ADD         R2,#+16
   \   000000AC   0CCA               LDMIA       R2!,{R2,R3}
   \   000000AE   ........           _BLF        __dMul,??__dMul??rT
   \   000000B2   03B4               PUSH        {R0,R1}
   \   000000B4   281C               MOV         R0,R5
   \   000000B6   3830               ADD         R0,#+56
   \   000000B8   0CC8               LDMIA       R0!,{R2,R3}
   \   000000BA   201C               MOV         R0,R4
   \   000000BC   0830               ADD         R0,#+8
   \   000000BE   03C8               LDMIA       R0!,{R0,R1}
   \   000000C0   ........           _BLF        __dMul,??__dMul??rT
   \   000000C4   061C               MOV         R6,R0
   \   000000C6   0F1C               MOV         R7,R1
   \   000000C8   3035               ADD         R5,#+48
   \   000000CA   0CCD               LDMIA       R5!,{R2,R3}
   \   000000CC   03CC               LDMIA       R4!,{R0,R1}
   \   000000CE   083C               SUB         R4,#+8
   \   000000D0   ........           _BLF        __dMul,??__dMul??rT
   \   000000D4   321C               MOV         R2,R6
   \   000000D6   3B1C               MOV         R3,R7
   \   000000D8   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000DC   0CBC               POP         {R2,R3}
   \   000000DE   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000E2   02AA               ADD         R2,SP,#+8
   \   000000E4   1032               ADD         R2,#+16
   \   000000E6   03C2               STMIA       R2!,{R0,R1}
    159                  
    160                  ECFF[0] = value[0];
   \   000000E8   02AA               ADD         R2,SP,#+8
   \   000000EA   0CCA               LDMIA       R2!,{R2,R3}
   \   000000EC   0CC4               STMIA       R4!,{R2,R3}
   \   000000EE   083C               SUB         R4,#+8
    161                  ECFF[1] = value[1];
   \   000000F0   251C               MOV         R5,R4
   \   000000F2   0835               ADD         R5,#+8
   \   000000F4   6A46               MOV         R2,SP
   \   000000F6   0CCA               LDMIA       R2!,{R2,R3}
   \   000000F8   0CC5               STMIA       R5!,{R2,R3}
    162                  ECFF[2] = value[2];
   \   000000FA   1034               ADD         R4,#+16
   \   000000FC   03C4               STMIA       R4!,{R0,R1}
    163                  //value[0]=(Re2t*ECEF)[0];value[1]=(Re2t*ECEF)[1];value[2]=(Re2t*ECEF)[2];
    164          	return ;
   \   000000FE   08B0               ADD         SP,#+32
   \   00000100   F0BC               POP         {R4-R7}
   \   00000102   01BC               POP         {R0}
   \   00000104   0047               BX          R0                 ;; return
   \   00000106   C046               NOP         
   \                     ??ECEF2Tangent_1:
   \   00000108   ........           DC32        Re2t
    165          }          
    166                    
    167          /*---------------------------------------------------------------------------------*/
    168          
    169          //--------------------------------------------------------------
    170          /********************************************************
    171          * º¯ÊýËµÃ÷£º * ½«GPSÊý¾ÝÖÐµÄGGA²¿·Ö½âÎö³öÀ´
    172                         È«¾Ö±äÁ¿gps_gga_time£¬gps_gga_latitude£¬gps_gga_longitude
    173                         gps_gga_quality£¬gps_gga_num_sats£¬gps_gga_hdop£¬ gps_gga_altitude
    174                         gps_gga_wgs_alt ¸üÐÂ
    175          * Èë¿Ú²ÎÊý£º * ÎÞ 
    176          * ·µ»Ø²ÎÊý£º * ÎÞ
    177          * ÊäÈëÊý¾ÝÊ¾Àý£º * $GPGGA,102134.00,1306.9847,N,11402.2986,W,2,5,1.0,50.3,M,-16.27,M,,*61\r\n  
    178          * ×îºóÐÞ¸Ä£º * ³ÂÓÂ£¬2009-03-26
    179          * ±¸    ×¢£º * ÎÞ
    180          ********************************************************/ 

   \                                 In segment CODE, align 4, keep-with-next
    181          void gpgga_update(void)
    182          {
   \                     ??gpgga_update:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   85B0               SUB         SP,#+20
    183                   int lat = 0 ;
    184                   double lat_min = 0.0;
    185                   double temp;
    186                   char * line ;
    187                   line = index(gga_save_line,',');
   \   00000004   2C21               MOV         R1,#+44
   \   00000006   ....               LDR         R0,??Subroutine12_0  ;; gga_save_line
   \   00000008   ........           _BLF        ??index,??index??rT
   \   0000000C   0090               STR         R0,[SP, #+0]
    188                   
    189                   line++; 
   \   0000000E   401C               ADD         R0,R0,#+1
   \   00000010   0090               STR         R0,[SP, #+0]
    190                  gps_gga_time =  strtod(line,&line);
   \   00000012   ....               LDR         R4,??DataTable13   ;; zero_flag
   \   00000014   0022               MOV         R2,#+0
   \   00000016   6946               MOV         R1,SP
   \   00000018   ........           _BLF        _Stod,??_Stod??rT
   \   0000001C   221C               MOV         R2,R4
   \   0000001E   3432               ADD         R2,#+52
   \   00000020   03C2               STMIA       R2!,{R0,R1}
    191                  int hour = (int)(gps_gga_time/10000.0);
   \   00000022   201C               MOV         R0,R4
   \   00000024   3430               ADD         R0,#+52
   \   00000026   C0C8               LDMIA       R0!,{R6,R7}
   \   00000028   301C               MOV         R0,R6
   \   0000002A   391C               MOV         R1,R7
   \   0000002C   0022               MOV         R2,#+0
   \   0000002E   ....               LDR         R3,??Subroutine12_0+0x4  ;; 0x40c38800
   \   00000030   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000034   ........           _BLF        __doubleToLong,??__doubleToLong??rT
   \   00000038   021C               MOV         R2,R0
    192                  int min = (int)((gps_gga_time-hour*10000)/100.0);
   \   0000003A   ....               LDR         R0,??Subroutine12_0+0x8  ;; 0x2710
   \   0000003C   5043               MUL         R0,R2
   \   0000003E   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   00000042   021C               MOV         R2,R0
   \   00000044   0B1C               MOV         R3,R1
   \   00000046   301C               MOV         R0,R6
   \   00000048   391C               MOV         R1,R7
   \   0000004A   ........           _BLF        __dSub,??__dSub??rT
   \   0000004E   061C               MOV         R6,R0
   \   00000050   0F1C               MOV         R7,R1
   \   00000052   0022               MOV         R2,#+0
   \   00000054   ....               LDR         R3,??DataTable11   ;; 0x40590000
   \   00000056   ........           _BLF        __dDiv,??__dDiv??rT
   \   0000005A   ........           _BLF        __doubleToLong,??__doubleToLong??rT
   \   0000005E   051C               MOV         R5,R0
    193                  float sec   = gps_gga_time-hour*10000-min*100;
    194                   gps_gga_time =  (min * 60 + sec)*100;  //µ¥Î»ÊÇ0.01s(10ms),´Ó×îºóÁ½Î»¿ÉÒÔÖªµÀGPS½ÓÊÕÖÜÆÚ
   \   00000060   221C               MOV         R2,R4
   \   00000062   3432               ADD         R2,#+52
   \   00000064   04B4               PUSH        {R2}
   \   00000066   6420               MOV         R0,#+100
   \   00000068   6843               MUL         R0,R5
   \   0000006A   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   0000006E   021C               MOV         R2,R0
   \   00000070   0B1C               MOV         R3,R1
   \   00000072   301C               MOV         R0,R6
   \   00000074   391C               MOV         R1,R7
   \   00000076   ........           _BLF        __dSub,??__dSub??rT
   \   0000007A   ........           _BLF        __doubleToFloat,??__doubleToFloat??rT
   \   0000007E   061C               MOV         R6,R0
   \   00000080   3C20               MOV         R0,#+60
   \   00000082   6843               MUL         R0,R5
   \   00000084   ........           _BLF        __longToFloat,??__longToFloat??rT
   \   00000088   011C               MOV         R1,R0
   \   0000008A   301C               MOV         R0,R6
   \   0000008C   ........           _BLF        __fAdd,??__fAdd??rT
   \   00000090   ....               LDR         R1,??Subroutine12_0+0xC  ;; 0x42c80000
   \   00000092   ........           _BLF        __fMul,??__fMul??rT
   \   00000096   ........           _BLF        __floatToDouble,??__floatToDouble??rT
   \   0000009A   04BC               POP         {R2}
   \   0000009C   03C2               STMIA       R2!,{R0,R1}
    195                  
    196                  //------Î³¶È---- 
    197                  line++;
   \   0000009E   0098               LDR         R0,[SP, #+0]
   \   000000A0   401C               ADD         R0,R0,#+1
   \   000000A2   0090               STR         R0,[SP, #+0]
    198                  gps_gga_latitude     = strtod( line, &line);
   \   000000A4   0022               MOV         R2,#+0
   \   000000A6   6946               MOV         R1,SP
   \   000000A8   ........           _BLF        _Stod,??_Stod??rT
   \   000000AC   221C               MOV         R2,R4
   \   000000AE   3C32               ADD         R2,#+60
   \   000000B0   03C2               STMIA       R2!,{R0,R1}
   \   000000B2   201C               MOV         R0,R4
   \   000000B4   3C30               ADD         R0,#+60
   \   000000B6   03C8               LDMIA       R0!,{R0,R1}
   \   000000B8   0022               MOV         R2,#+0
   \   000000BA   ....               LDR         R3,??DataTable11   ;; 0x40590000
   \   000000BC   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000C0   ........           _BLF        __doubleToLong,??__doubleToLong??rT
    199                  lat = (int)(gps_gga_latitude/100.0);
    200                  lat_min = gps_gga_latitude - lat*100.0;
    201                  gps_gga_latitude = lat + lat_min / 60.0;
   \   000000C4   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   000000C8   061C               MOV         R6,R0
   \   000000CA   0F1C               MOV         R7,R1
   \   000000CC   0020               MOV         R0,#+0
   \   000000CE   ....               LDR         R1,??DataTable11   ;; 0x40590000
   \   000000D0   321C               MOV         R2,R6
   \   000000D2   3B1C               MOV         R3,R7
   \   000000D4   ........           _BLF        __dMul,??__dMul??rT
   \   000000D8   021C               MOV         R2,R0
   \   000000DA   0B1C               MOV         R3,R1
   \   000000DC   201C               MOV         R0,R4
   \   000000DE   3C30               ADD         R0,#+60
   \   000000E0   03C8               LDMIA       R0!,{R0,R1}
   \   000000E2   ........           _BLF        __dSub,??__dSub??rT
   \   000000E6   0022               MOV         R2,#+0
   \   000000E8   ....               LDR         R3,??Subroutine12_0+0x10  ;; 0x404e0000
   \   000000EA   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000EE   321C               MOV         R2,R6
   \   000000F0   3B1C               MOV         R3,R7
   \   000000F2   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000F6   021C               MOV         R2,R0
   \   000000F8   0B1C               MOV         R3,R1
   \   000000FA   201C               MOV         R0,R4
   \   000000FC   3C30               ADD         R0,#+60
   \   000000FE   0CC0               STMIA       R0!,{R2,R3}
    202                  
    203                  
    204                  
    205                 
    206          	line++;
   \   00000100   0098               LDR         R0,[SP, #+0]
   \   00000102   401C               ADD         R0,R0,#+1
   \   00000104   0090               STR         R0,[SP, #+0]
    207          	if( *line == 'S' )      // Find the sign for the lattitude.  South is negative
   \   00000106   0078               LDRB        R0,[R0, #+0]
   \   00000108   5328               CMP         R0,#+83
   \   0000010A   06D1               BNE         ??gpgga_update_1
    208          	  gps_gga_latitude *= -1;
   \   0000010C   251C               MOV         R5,R4
   \   0000010E   3C35               ADD         R5,#+60
   \   00000110   0020               MOV         R0,#+0
   \   00000112   ....               LDR         R1,??Subroutine12_0+0x14  ;; 0xbff00000
   \   00000114   ........           _BLF        __dMul,??__dMul??rT
   \   00000118   03C5               STMIA       R5!,{R0,R1}
    209          	line = index(line,',');               // Skip ,S,
   \                     ??gpgga_update_1:
   \   0000011A   2C21               MOV         R1,#+44
   \   0000011C   0098               LDR         R0,[SP, #+0]
   \   0000011E   ........           _BLF        ??index,??index??rT
   \   00000122   0090               STR         R0,[SP, #+0]
    210                  
    211                  //------¾­¶È---- 
    212                  line++;
   \   00000124   401C               ADD         R0,R0,#+1
   \   00000126   0090               STR         R0,[SP, #+0]
    213                  gps_gga_longitude = strtod( line, &line);
   \   00000128   0022               MOV         R2,#+0
   \   0000012A   6946               MOV         R1,SP
   \   0000012C   ........           _BLF        _Stod,??_Stod??rT
   \   00000130   6064               STR         R0,[R4, #+68]
   \   00000132   A164               STR         R1,[R4, #+72]
    214          	lat= (int)(gps_gga_longitude/100.0);
   \   00000134   061C               MOV         R6,R0
   \   00000136   0F1C               MOV         R7,R1
   \   00000138   0022               MOV         R2,#+0
   \   0000013A   ....               LDR         R3,??DataTable11   ;; 0x40590000
   \   0000013C   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000140   ........           _BLF        __doubleToLong,??__doubleToLong??rT
   \   00000144   051C               MOV         R5,R0
    215          	lat_min= gps_gga_longitude - lat*100 ;
    216          	gps_gga_longitude = lat + lat_min / 60.0;
   \   00000146   6420               MOV         R0,#+100
   \   00000148   6843               MUL         R0,R5
   \   0000014A   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   0000014E   021C               MOV         R2,R0
   \   00000150   0B1C               MOV         R3,R1
   \   00000152   301C               MOV         R0,R6
   \   00000154   391C               MOV         R1,R7
   \   00000156   ........           _BLF        __dSub,??__dSub??rT
   \   0000015A   0022               MOV         R2,#+0
   \   0000015C   ....               LDR         R3,??Subroutine12_0+0x18  ;; 0x404e0000
   \   0000015E   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000162   061C               MOV         R6,R0
   \   00000164   0F1C               MOV         R7,R1
   \   00000166   281C               MOV         R0,R5
   \   00000168   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   0000016C   321C               MOV         R2,R6
   \   0000016E   3B1C               MOV         R3,R7
   \   00000170   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000174   6064               STR         R0,[R4, #+68]
   \   00000176   A164               STR         R1,[R4, #+72]
    217          	
    218                  line++;
   \   00000178   009A               LDR         R2,[SP, #+0]
   \   0000017A   521C               ADD         R2,R2,#+1
   \   0000017C   0092               STR         R2,[SP, #+0]
    219          	if( *line == 'W' )
   \   0000017E   1278               LDRB        R2,[R2, #+0]
   \   00000180   572A               CMP         R2,#+87
   \   00000182   05D1               BNE         ??gpgga_update_2
    220          	   gps_gga_longitude *= -1;
   \   00000184   0022               MOV         R2,#+0
   \   00000186   ....               LDR         R3,??Subroutine12_0+0x1C  ;; 0xbff00000
   \   00000188   ........           _BLF        __dMul,??__dMul??rT
   \   0000018C   6064               STR         R0,[R4, #+68]
   \   0000018E   A164               STR         R1,[R4, #+72]
    221          	line = index(line,',');
   \                     ??gpgga_update_2:
   \   00000190   2C21               MOV         R1,#+44
   \   00000192   0098               LDR         R0,[SP, #+0]
   \   00000194   ........           _BLF        ??index,??index??rT
   \   00000198   0090               STR         R0,[SP, #+0]
    222          	
    223                  //----²î·Ö×´Ì¬
    224                  line++;
   \   0000019A   401C               ADD         R0,R0,#+1
   \   0000019C   0090               STR         R0,[SP, #+0]
    225          	gps_gga_quality = strtol( line, &line, 10 );
   \   0000019E   0A22               MOV         R2,#+10
   \   000001A0   6946               MOV         R1,SP
   \   000001A2   ........           _BLF        strtol,??strtol??rT
   \   000001A6   A067               STR         R0,[R4, #+120]
    226          	line++;		// Skip ,
   \   000001A8   0098               LDR         R0,[SP, #+0]
   \   000001AA   401C               ADD         R0,R0,#+1
   \   000001AC   0090               STR         R0,[SP, #+0]
    227                  //-------ÐÇÊý
    228          	gps_gga_num_sats = strtol( line, &line, 10 );
   \   000001AE   0A22               MOV         R2,#+10
   \   000001B0   6946               MOV         R1,SP
   \   000001B2   ........           _BLF        strtol,??strtol??rT
   \   000001B6   E067               STR         R0,[R4, #+124]
    229          	line++;		// Skip ,
   \   000001B8   0098               LDR         R0,[SP, #+0]
   \   000001BA   401C               ADD         R0,R0,#+1
   \   000001BC   0090               STR         R0,[SP, #+0]
    230                  
    231          	gps_gga_hdop = strtod( line, &line );
   \   000001BE   0022               MOV         R2,#+0
   \   000001C0   6946               MOV         R1,SP
   \   000001C2   ........           _BLF        _Stod,??_Stod??rT
   \   000001C6   E064               STR         R0,[R4, #+76]
   \   000001C8   2165               STR         R1,[R4, #+80]
    232          	line++;		// Skip ,
   \   000001CA   0098               LDR         R0,[SP, #+0]
   \   000001CC   401C               ADD         R0,R0,#+1
   \   000001CE   0090               STR         R0,[SP, #+0]
    233          //----------------º£°ÎÈ¥³ýÌøÖµ--------------//	
    234          	temp = gps_gga_altitude;
   \   000001D0   01AA               ADD         R2,SP,#+4
   \   000001D2   606D               LDR         R0,[R4, #+84]
   \   000001D4   A16D               LDR         R1,[R4, #+88]
   \   000001D6   03C2               STMIA       R2!,{R0,R1}
    235          	gps_gga_altitude = strtod( line, &line );  //º£°Î
   \   000001D8   0022               MOV         R2,#+0
   \   000001DA   6946               MOV         R1,SP
   \   000001DC   0098               LDR         R0,[SP, #+0]
   \   000001DE   ........           _BLF        _Stod,??_Stod??rT
   \   000001E2   03AA               ADD         R2,SP,#+12
   \   000001E4   03C2               STMIA       R2!,{R0,R1}
    236          	if (temp > 0)
   \   000001E6   01A8               ADD         R0,SP,#+4
   \   000001E8   03C8               LDMIA       R0!,{R0,R1}
   \   000001EA   0122               MOV         R2,#+1
   \   000001EC   0023               MOV         R3,#+0
   \   000001EE   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   000001F2   0028               CMP         R0,#+0
   \   000001F4   19D0               BEQ         ??gpgga_update_3
    237          	{
    238          		if ((gps_gga_altitude - temp) > 20 || (gps_gga_altitude - temp) < -20)
   \   000001F6   03A8               ADD         R0,SP,#+12
   \   000001F8   03C8               LDMIA       R0!,{R0,R1}
   \   000001FA   01AA               ADD         R2,SP,#+4
   \   000001FC   0CCA               LDMIA       R2!,{R2,R3}
   \   000001FE   ........           _BLF        __dSub,??__dSub??rT
   \   00000202   061C               MOV         R6,R0
   \   00000204   0F1C               MOV         R7,R1
   \   00000206   0122               MOV         R2,#+1
   \   00000208   ....               LDR         R3,??Subroutine12_0+0x20  ;; 0x40340000
   \   0000020A   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   0000020E   0028               CMP         R0,#+0
   \   00000210   07D1               BNE         ??gpgga_update_4
   \   00000212   301C               MOV         R0,R6
   \   00000214   391C               MOV         R1,R7
   \   00000216   0022               MOV         R2,#+0
   \   00000218   ....               LDR         R3,??Subroutine12_0+0x24  ;; 0xc0340000
   \   0000021A   ........           _BLF        __dLess,??__dLess??rT
   \   0000021E   0028               CMP         R0,#+0
   \   00000220   03D0               BEQ         ??gpgga_update_3
    239          		{
    240          			gps_gga_altitude = temp;
   \                     ??gpgga_update_4:
   \   00000222   03AA               ADD         R2,SP,#+12
   \   00000224   01A8               ADD         R0,SP,#+4
   \   00000226   03C8               LDMIA       R0!,{R0,R1}
   \   00000228   03C2               STMIA       R2!,{R0,R1}
   \                     ??gpgga_update_3:
   \   0000022A   03A8               ADD         R0,SP,#+12
   \   0000022C   03C8               LDMIA       R0!,{R0,R1}
   \   0000022E   6065               STR         R0,[R4, #+84]
   \   00000230   A165               STR         R1,[R4, #+88]
    241          		}
    242          	}
    243          //----------------------------------------//
    244          	line += 3;	// Skip ,M,
   \   00000232   0098               LDR         R0,[SP, #+0]
   \   00000234   C01C               ADD         R0,R0,#+3
   \   00000236   0090               STR         R0,[SP, #+0]
    245           
    246          
    247               //   line++;   Ìø¹ýÁËºóÃæ¸ß¶È²îµÄ·ûºÅÏî
    248          	gps_gga_wgs_alt = strtod( line, &line );  //´óµØË®Æ½ÃæÓëµØÇòÍÖÔ²Ãæ¸ß¶È²î
   \   00000238   0022               MOV         R2,#+0
   \   0000023A   6946               MOV         R1,SP
   \   0000023C   ........           _BLF        _Stod,??_Stod??rT
   \   00000240   5C34               ADD         R4,#+92
   \   00000242   03C4               STMIA       R4!,{R0,R1}
    249          	line += 3;	// Skip ,M,
    250                  return;
   \   00000244   05B0               ADD         SP,#+20
   \   00000246   C046               NOP         
   \   00000248                      REQUIRE ?Subroutine12
   \   00000248                      ;; // Fall through to label ?Subroutine12
    251          }
    252          
    253          /*---------------------------------------------------------------------------------*/     
    254                    
    255                    
    256          /*---------------------------------------------------------------------------------*/

   \                                 In segment CODE, align 4, keep-with-next
    257          void gpvtg_update(void)
    258          {
   \                     ??gpvtg_update:
   \   00000000   11B5               PUSH        {R0,R4,LR}
    259            char * line=NULL ; 
   \   00000002   0020               MOV         R0,#+0
   \   00000004   0090               STR         R0,[SP, #+0]
    260            line = index(vtg_save_line,',');
   \   00000006   2C21               MOV         R1,#+44
   \   00000008   1448               LDR         R0,??gpvtg_update_1  ;; vtg_save_line
   \   0000000A   ........           _BLF        ??index,??index??rT
   \   0000000E   0090               STR         R0,[SP, #+0]
    261            if(!line)
   \   00000010   0028               CMP         R0,#+0
   \   00000012   1FD0               BEQ         ??gpvtg_update_2
    262                return ;
    263            line++;//skip ,
   \   00000014   401C               ADD         R0,R0,#+1
   \   00000016   0090               STR         R0,[SP, #+0]
    264            gps_vtg_course = strtod( line, &line );
   \   00000018   ....               LDR         R4,??DataTable18   ;; gps_vtg_course
   \   0000001A   0022               MOV         R2,#+0
   \   0000001C   6946               MOV         R1,SP
   \   0000001E   ........           _BLF        _Stod,??_Stod??rT
   \   00000022   03C4               STMIA       R4!,{R0,R1}
   \   00000024   083C               SUB         R4,#+8
    265            line = index(line,'N');
   \   00000026   4E21               MOV         R1,#+78
   \   00000028   0098               LDR         R0,[SP, #+0]
   \   0000002A   ........           _BLF        ??index,??index??rT
   \   0000002E   0090               STR         R0,[SP, #+0]
    266            if(!line)
   \   00000030   0028               CMP         R0,#+0
   \   00000032   0FD0               BEQ         ??gpvtg_update_2
    267                return;
    268            line += 2;
   \   00000034   801C               ADD         R0,R0,#+2
   \   00000036   0090               STR         R0,[SP, #+0]
    269            gps_vtg_speed = strtod( line, &line ) * 1000.0 / 3600.0;//µ¥Î»m/s
   \   00000038   0022               MOV         R2,#+0
   \   0000003A   6946               MOV         R1,SP
   \   0000003C   ........           _BLF        _Stod,??_Stod??rT
   \   00000040   0022               MOV         R2,#+0
   \   00000042   074B               LDR         R3,??gpvtg_update_1+0x4  ;; 0x408f4000
   \   00000044   ........           _BLF        __dMul,??__dMul??rT
   \   00000048   0022               MOV         R2,#+0
   \   0000004A   064B               LDR         R3,??gpvtg_update_1+0x8  ;; 0x40ac2000
   \   0000004C   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000050   0834               ADD         R4,#+8
   \   00000052   03C4               STMIA       R4!,{R0,R1}
    270            return;
   \                     ??gpvtg_update_2:
   \   00000054   18BC               POP         {R3,R4}
   \   00000056   01BC               POP         {R0}
   \   00000058   0047               BX          R0                 ;; return
   \   0000005A   C046               NOP         
   \                     ??gpvtg_update_1:
   \   0000005C   ........           DC32        vtg_save_line
   \   00000060   00408F40           DC32        0x408f4000
   \   00000064   0020AC40           DC32        0x40ac2000
    271          }
    272          
    273            
    274                    
    275          /*---------------------------------------------------------------------------------*/
    276          
    277          /*---------------------------------------------------------------------------------*/

   \                                 In segment CODE, align 4, keep-with-next
    278          void gps2xyz(double *llh)
    279          {
   \                     ??gps2xyz:
   \   00000000   70B5               PUSH        {R4-R6,LR}
   \   00000002   041C               MOV         R4,R0
    280          
    281            llh[0] = gps_gga_latitude*C_DEG2RAD;
   \   00000004   ....               LDR         R5,??DataTable13   ;; zero_flag
   \   00000006   281C               MOV         R0,R5
   \   00000008   3C30               ADD         R0,#+60
   \   0000000A   0CC8               LDMIA       R0!,{R2,R3}
   \   0000000C   ....               LDR         R0,??DataTable21   ;; 0xa2529d39
   \   0000000E   ....               LDR         R1,??DataTable22   ;; 0x3f91df46
   \   00000010   ........           _BLF        __dMul,??__dMul??rT
   \   00000014   03C4               STMIA       R4!,{R0,R1}
   \   00000016   083C               SUB         R4,#+8
    282            llh[1] = gps_gga_longitude*C_DEG2RAD;
   \   00000018   261C               MOV         R6,R4
   \   0000001A   0836               ADD         R6,#+8
   \   0000001C   6A6C               LDR         R2,[R5, #+68]
   \   0000001E   AB6C               LDR         R3,[R5, #+72]
   \   00000020   ....               LDR         R0,??DataTable21   ;; 0xa2529d39
   \   00000022   ....               LDR         R1,??DataTable22   ;; 0x3f91df46
   \   00000024   ........           _BLF        __dMul,??__dMul??rT
   \   00000028   03C6               STMIA       R6!,{R0,R1}
    283            llh[2] = gps_gga_altitude+gps_gga_wgs_alt;//×¢ÒâÊÇ¸Ã¼õ»¹ÊÇ¼Ó
   \   0000002A   261C               MOV         R6,R4
   \   0000002C   1036               ADD         R6,#+16
   \   0000002E   6A6D               LDR         R2,[R5, #+84]
   \   00000030   AB6D               LDR         R3,[R5, #+88]
   \   00000032   E86D               LDR         R0,[R5, #+92]
   \   00000034   296E               LDR         R1,[R5, #+96]
   \   00000036   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000003A   03C6               STMIA       R6!,{R0,R1}
    284            llh2ECEF( llh );
   \   0000003C   201C               MOV         R0,R4
   \   0000003E   ........           _BLF        ??llh2ECEF,??llh2ECEF??rT
    285          
    286            llh[0] = llh[0] - zero_position_ECEF[0];
   \   00000042   03CC               LDMIA       R4!,{R0,R1}
   \   00000044   083C               SUB         R4,#+8
   \   00000046   2A1D               ADD         R2,R5,#+4
   \   00000048   0CCA               LDMIA       R2!,{R2,R3}
   \   0000004A   ........           _BLF        __dSub,??__dSub??rT
   \   0000004E   03C4               STMIA       R4!,{R0,R1}
   \   00000050   083C               SUB         R4,#+8
    287            llh[1] = llh[1] - zero_position_ECEF[1];
   \   00000052   261C               MOV         R6,R4
   \   00000054   0836               ADD         R6,#+8
   \   00000056   201C               MOV         R0,R4
   \   00000058   0830               ADD         R0,#+8
   \   0000005A   03C8               LDMIA       R0!,{R0,R1}
   \   0000005C   2A1C               MOV         R2,R5
   \   0000005E   0C32               ADD         R2,#+12
   \   00000060   0CCA               LDMIA       R2!,{R2,R3}
   \   00000062   ........           _BLF        __dSub,??__dSub??rT
   \   00000066   03C6               STMIA       R6!,{R0,R1}
    288            llh[2] = llh[2] - zero_position_ECEF[2];
   \   00000068   261C               MOV         R6,R4
   \   0000006A   1036               ADD         R6,#+16
   \   0000006C   201C               MOV         R0,R4
   \   0000006E   1030               ADD         R0,#+16
   \   00000070   03C8               LDMIA       R0!,{R0,R1}
   \   00000072   1435               ADD         R5,#+20
   \   00000074   0CCD               LDMIA       R5!,{R2,R3}
   \   00000076   ........           _BLF        __dSub,??__dSub??rT
   \   0000007A   03C6               STMIA       R6!,{R0,R1}
    289            
    290            ECEF2Tangent(llh);
   \   0000007C   201C               MOV         R0,R4
   \   0000007E   ........           _BLF        ??ECEF2Tangent,??ECEF2Tangent??rT
    291            
    292            /*static double window_z[FILTER_LEN] = {0.0,0.0} ;
    293            double sum_z =0 ;     
    294            for( char i =FILTER_LEN-1 ; i != 0 ; --i )
    295            {
    296                window_z[i] = window_z[i-1];
    297                sum_z += window_z[i];
    298             }
    299            
    300             window_z[0] = gps_gga_altitude ;//³ÂÓÂÎªÊ²Ã´ÒªÓÃº£°ÎÖµ?
    301             sum_z += window_z[0] ;
    302             llh[2] = sum_z/FILTER_LEN ;   // º£°Î¼ÓÒ»¸öÆ½¾ùÖµÂË²¨ */
    303          }
   \   00000082   70BC               POP         {R4-R6}
   \   00000084   01BC               POP         {R0}
   \   00000086   0047               BX          R0                 ;; return
    304          
    305          /*---------------------------------------------------------------------------------*/     
    306          

   \                                 In segment CODE, align 4, keep-with-next
    307           void gps2uvw(double *vel_NED)
    308          {
   \                     ??gps2uvw:
   \   00000000   F1B5               PUSH        {R0,R4-R7,LR}
   \   00000002   82B0               SUB         SP,#+8
    309              static double last_Z = 0.0;               
    310              double vel_z_current =0.0 ;
    311               
    312              vel_NED[0] = gps_vtg_speed * cos( gps_vtg_course * C_DEG2RAD );
   \   00000004   ....               LDR         R4,??DataTable18   ;; gps_vtg_course
   \   00000006   0CCC               LDMIA       R4!,{R2,R3}
   \   00000008   083C               SUB         R4,#+8
   \   0000000A   ....               LDR         R0,??DataTable21   ;; 0xa2529d39
   \   0000000C   ....               LDR         R1,??DataTable22   ;; 0x3f91df46
   \   0000000E   ........           _BLF        __dMul,??__dMul??rT
   \   00000012   0122               MOV         R2,#+1
   \   00000014   ........           _BLF        _Sin,??_Sin??rT
   \   00000018   221C               MOV         R2,R4
   \   0000001A   0832               ADD         R2,#+8
   \   0000001C   0CCA               LDMIA       R2!,{R2,R3}
   \   0000001E   ........           _BLF        __dMul,??__dMul??rT
   \   00000022   029A               LDR         R2,[SP, #+8]
   \   00000024   03C2               STMIA       R2!,{R0,R1}
    313              vel_NED[1]  = gps_vtg_speed * sin( gps_vtg_course * C_DEG2RAD );//±ØÐëÓÃgpsµÄº½¼£½Ç
   \   00000026   0022               MOV         R2,#+0
   \   00000028   151C               MOV         R5,R2
   \   0000002A   0CCC               LDMIA       R4!,{R2,R3}
   \   0000002C   083C               SUB         R4,#+8
   \   0000002E   ....               LDR         R0,??DataTable21   ;; 0xa2529d39
   \   00000030   ....               LDR         R1,??DataTable22   ;; 0x3f91df46
   \   00000032   ........           _BLF        __dMul,??__dMul??rT
   \   00000036   2A1C               MOV         R2,R5
   \   00000038   ........           _BLF        _Sin,??_Sin??rT
   \   0000003C   221C               MOV         R2,R4
   \   0000003E   0832               ADD         R2,#+8
   \   00000040   0CCA               LDMIA       R2!,{R2,R3}
   \   00000042   ........           _BLF        __dMul,??__dMul??rT
   \   00000046   029A               LDR         R2,[SP, #+8]
   \   00000048   0832               ADD         R2,#+8
   \   0000004A   03C2               STMIA       R2!,{R0,R1}
   \   0000004C   1C48               LDR         R0,??gps2uvw_1     ;; zero_flag + 124
   \   0000004E   0068               LDR         R0,[R0, #+0]
   \   00000050   ....               LDR         R5,??DataTable23   ;; position
   \   00000052   216B               LDR         R1,[R4, #+48]
   \   00000054   8142               CMP         R1,R0
   \   00000056   01D0               BEQ         ??gps2uvw_2
    314              if(last_gps_gga_num_sats != gps_gga_num_sats)
    315              {
    316                 last_gps_gga_num_sats = gps_gga_num_sats;
   \   00000058   2063               STR         R0,[R4, #+48]
    317                 last_Z = position.current_xyz[2];
   \   0000005A   2AE0               B           ??gps2uvw_3
    318                 return ;
    319              }
    320              vel_z_current = (position.current_xyz[2] - last_Z)*GPS_FREQ ;
   \                     ??gps2uvw_2:
   \   0000005C   6E46               MOV         R6,SP
   \   0000005E   281C               MOV         R0,R5
   \   00000060   1030               ADD         R0,#+16
   \   00000062   03C8               LDMIA       R0!,{R0,R1}
   \   00000064   221C               MOV         R2,R4
   \   00000066   1032               ADD         R2,#+16
   \   00000068   0CCA               LDMIA       R2!,{R2,R3}
   \   0000006A   ........           _BLF        __dSub,??__dSub??rT
   \   0000006E   0022               MOV         R2,#+0
   \   00000070   144B               LDR         R3,??gps2uvw_1+0x4  ;; 0x40140000
   \   00000072   ........           _BLF        __dMul,??__dMul??rT
   \   00000076   03C6               STMIA       R6!,{R0,R1}
    321              
    322              float sum_vel_z =0.0; 
   \   00000078   0026               MOV         R6,#+0
    323              static float window_vel_z[FILTER_LEN] = {0.0,0.0} ;  // zÏòËÙ¶È¼Ó2µÄÆ½¾ùÖµÂË²¨
    324              
    325              for( char i =FILTER_LEN-1 ; i != 0 ; --i )
   \   0000007A   0227               MOV         R7,#+2
    326              {
    327                  window_vel_z[i] = window_vel_z[i-1];
   \                     ??gps2uvw_4:
   \   0000007C   B800               LSL         R0,R7,#+2
   \   0000007E   2118               ADD         R1,R4,R0
   \   00000080   086B               LDR         R0,[R1, #+48]
   \   00000082   4863               STR         R0,[R1, #+52]
    328                  sum_vel_z += window_vel_z[i];
   \   00000084   311C               MOV         R1,R6
   \   00000086   ........           _BLF        __fAdd,??__fAdd??rT
   \   0000008A   061C               MOV         R6,R0
    329               }
   \   0000008C   7F1E               SUB         R7,R7,#+1
   \   0000008E   3806               LSL         R0,R7,#+24
   \   00000090   F4D1               BNE         ??gps2uvw_4
    330              
    331               window_vel_z[0] = vel_z_current ;
   \   00000092   6846               MOV         R0,SP
   \   00000094   03C8               LDMIA       R0!,{R0,R1}
   \   00000096   ........           _BLF        __doubleToFloat,??__doubleToFloat??rT
   \   0000009A   6063               STR         R0,[R4, #+52]
    332               sum_vel_z += window_vel_z[0] ;
    333                vel_NED[2] = sum_vel_z/FILTER_LEN ;        
   \   0000009C   029F               LDR         R7,[SP, #+8]
   \   0000009E   1037               ADD         R7,#+16
   \   000000A0   311C               MOV         R1,R6
   \   000000A2   ........           _BLF        __fAdd,??__fAdd??rT
   \   000000A6   0849               LDR         R1,??gps2uvw_1+0x8  ;; 0x40400000
   \   000000A8   ........           _BLF        __fDiv,??__fDiv??rT
   \   000000AC   ........           _BLF        __floatToDouble,??__floatToDouble??rT
   \   000000B0   03C7               STMIA       R7!,{R0,R1}
    334           
    335              last_Z = position.current_xyz[2];
   \                     ??gps2uvw_3:
   \   000000B2   1034               ADD         R4,#+16
   \   000000B4   1035               ADD         R5,#+16
   \   000000B6   03CD               LDMIA       R5!,{R0,R1}
   \   000000B8   03C4               STMIA       R4!,{R0,R1}
    336               
    337              return ;   
   \   000000BA   FEBC               POP         {R1-R7}
   \   000000BC   01BC               POP         {R0}
   \   000000BE   0047               BX          R0                 ;; return
   \                     ??gps2uvw_1:
   \   000000C0   ........           DC32        zero_flag + 124
   \   000000C4   00001440           DC32        0x40140000
   \   000000C8   00004040           DC32        0x40400000
    338            
    339          }
    340          

   \                                 In segment CODE, align 4, keep-with-next
    341          void xyz_transform(double input_xyz[3], Position * position_t,Trajectory * trajectory_t)
    342          {   
   \                     ??xyz_transform:
   \   00000000   F1B5               PUSH        {R0,R4-R7,LR}
   \   00000002   8EB0               SUB         SP,#+56
    343          	//-------------------------×ª»»¾ØÕó-------------------------//
    344              /*Znb[0][0] =  cos(ahrs_theta[1])*cos(ahrs_theta[2]);
    345              Znb[0][1] =  cos(ahrs_theta[1])*sin(ahrs_theta[2]);
    346              Znb[0][2] = -sin(ahrs_theta[1]);
    347              
    348              Znb[1][0] = -cos(ahrs_theta[0])*sin(ahrs_theta[2]) + sin(ahrs_theta[0])*sin(ahrs_theta[1])*cos(ahrs_theta[2]);
    349              Znb[1][1] =  cos(ahrs_theta[0])*cos(ahrs_theta[2]) + sin(ahrs_theta[0])*sin(ahrs_theta[1])*sin(ahrs_theta[2]);
    350              Znb[1][2] =  sin(ahrs_theta[0])*cos(ahrs_theta[1]);
    351              
    352              Znb[2][0] =  sin(ahrs_theta[0])*sin(ahrs_theta[2]) + cos(ahrs_theta[0])*sin(ahrs_theta[1])*cos(ahrs_theta[2]);
    353              Znb[2][1] =  cos(ahrs_theta[0])*sin(ahrs_theta[1])*sin(ahrs_theta[2]) - sin(ahrs_theta[0])*cos(ahrs_theta[2]);
    354              Znb[2][2] =  cos(ahrs_theta[0])*cos(ahrs_theta[1]); 
    355          	*/
    356              double offset_xyz[3] = {0},sy,cy;
   \   00000004   08A8               ADD         R0,SP,#+32
   \   00000006   0022               MOV         R2,#+0
   \   00000008   1823               MOV         R3,#+24
   \                     ??xyz_transform_1:
   \   0000000A   1B1F               SUB         R3,R3,#+4
   \   0000000C   C250               STR         R2,[R0, R3]
   \   0000000E   FCD1               BNE         ??xyz_transform_1
    357              offset_xyz[0]=position_t->raw_current_xyz[0]-position_t->current_target[0];
   \   00000010   4831               ADD         R1,#+72
   \   00000012   0C1C               MOV         R4,R1
   \   00000014   08AD               ADD         R5,SP,#+32
   \   00000016   03CC               LDMIA       R4!,{R0,R1}
   \   00000018   083C               SUB         R4,#+8
   \   0000001A   226E               LDR         R2,[R4, #+96]
   \   0000001C   636E               LDR         R3,[R4, #+100]
   \   0000001E   ........           _BLF        __dSub,??__dSub??rT
   \   00000022   03C5               STMIA       R5!,{R0,R1}
    358              offset_xyz[1]=position_t->raw_current_xyz[1]-position_t->current_target[1];
   \   00000024   04AD               ADD         R5,SP,#+16
   \   00000026   201C               MOV         R0,R4
   \   00000028   0830               ADD         R0,#+8
   \   0000002A   03C8               LDMIA       R0!,{R0,R1}
   \   0000002C   A26E               LDR         R2,[R4, #+104]
   \   0000002E   E36E               LDR         R3,[R4, #+108]
   \   00000030   ........           _BLF        __dSub,??__dSub??rT
   \   00000034   03C5               STMIA       R5!,{R0,R1}
   \   00000036   08AA               ADD         R2,SP,#+32
   \   00000038   0832               ADD         R2,#+8
   \   0000003A   04A8               ADD         R0,SP,#+16
   \   0000003C   03C8               LDMIA       R0!,{R0,R1}
   \   0000003E   03C2               STMIA       R2!,{R0,R1}
    359              offset_xyz[2]=position_t->raw_current_xyz[2]-position_t->current_target[2];
   \   00000040   201C               MOV         R0,R4
   \   00000042   1030               ADD         R0,#+16
   \   00000044   03C8               LDMIA       R0!,{R0,R1}
   \   00000046   226F               LDR         R2,[R4, #+112]
   \   00000048   636F               LDR         R3,[R4, #+116]
   \   0000004A   ........           _BLF        __dSub,??__dSub??rT
   \   0000004E   03C5               STMIA       R5!,{R0,R1}
   \   00000050   08AA               ADD         R2,SP,#+32
   \   00000052   1032               ADD         R2,#+16
   \   00000054   06A8               ADD         R0,SP,#+24
   \   00000056   03C8               LDMIA       R0!,{R0,R1}
   \   00000058   03C2               STMIA       R2!,{R0,R1}
    360              sy = sin(input_yaw);
   \   0000005A   3A4D               LDR         R5,??xyz_transform_2  ;; last_raw_current_xyz
   \   0000005C   281C               MOV         R0,R5
   \   0000005E   3030               ADD         R0,#+48
   \   00000060   C0C8               LDMIA       R0!,{R6,R7}
   \   00000062   0022               MOV         R2,#+0
   \   00000064   301C               MOV         R0,R6
   \   00000066   391C               MOV         R1,R7
   \   00000068   ........           _BLF        _Sin,??_Sin??rT
   \   0000006C   6A46               MOV         R2,SP
   \   0000006E   03C2               STMIA       R2!,{R0,R1}
    361              cy = cos(input_yaw);
   \   00000070   0122               MOV         R2,#+1
   \   00000072   301C               MOV         R0,R6
   \   00000074   391C               MOV         R1,R7
   \   00000076   ........           _BLF        _Sin,??_Sin??rT
   \   0000007A   02AA               ADD         R2,SP,#+8
   \   0000007C   03C2               STMIA       R2!,{R0,R1}
    362              
    363              input_xyz[0] = (offset_xyz[0])*cy  + (offset_xyz[1])*sy ; 		   //ÔÚgpsÃ¿´Î¸üÐÂÊ±ÒÑ¾­²¹³¥	
   \   0000007E   0E9A               LDR         R2,[SP, #+56]
   \   00000080   04B4               PUSH        {R2}
   \   00000082   05A8               ADD         R0,SP,#+20
   \   00000084   0CC8               LDMIA       R0!,{R2,R3}
   \   00000086   01A8               ADD         R0,SP,#+4
   \   00000088   03C8               LDMIA       R0!,{R0,R1}
   \   0000008A   ........           _BLF        __dMul,??__dMul??rT
   \   0000008E   061C               MOV         R6,R0
   \   00000090   0F1C               MOV         R7,R1
   \   00000092   09A8               ADD         R0,SP,#+36
   \   00000094   0CC8               LDMIA       R0!,{R2,R3}
   \   00000096   03A8               ADD         R0,SP,#+12
   \   00000098   03C8               LDMIA       R0!,{R0,R1}
   \   0000009A   ........           _BLF        __dMul,??__dMul??rT
   \   0000009E   321C               MOV         R2,R6
   \   000000A0   3B1C               MOV         R3,R7
   \   000000A2   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000A6   04BC               POP         {R2}
   \   000000A8   03C2               STMIA       R2!,{R0,R1}
    364              input_xyz[1] = (offset_xyz[0])*-sy + (offset_xyz[1])*cy ;    
   \   000000AA   0E9A               LDR         R2,[SP, #+56]
   \   000000AC   0832               ADD         R2,#+8
   \   000000AE   04B4               PUSH        {R2}
   \   000000B0   09A8               ADD         R0,SP,#+36
   \   000000B2   0CC8               LDMIA       R0!,{R2,R3}
   \   000000B4   01A8               ADD         R0,SP,#+4
   \   000000B6   03C8               LDMIA       R0!,{R0,R1}
   \   000000B8   ........           _BLF        __dMul,??__dMul??rT
   \   000000BC   061C               MOV         R6,R0
   \   000000BE   0F1C               MOV         R7,R1
   \   000000C0   05A8               ADD         R0,SP,#+20
   \   000000C2   0CC8               LDMIA       R0!,{R2,R3}
   \   000000C4   03A8               ADD         R0,SP,#+12
   \   000000C6   03C8               LDMIA       R0!,{R0,R1}
   \   000000C8   ........           _BLF        __dMul,??__dMul??rT
   \   000000CC   321C               MOV         R2,R6
   \   000000CE   3B1C               MOV         R3,R7
   \   000000D0   ........           _BLF        __dSub,??__dSub??rT
   \   000000D4   04BC               POP         {R2}
   \   000000D6   03C2               STMIA       R2!,{R0,R1}
    365              input_xyz[2] =  offset_xyz[2];    
   \   000000D8   0E9A               LDR         R2,[SP, #+56]
   \   000000DA   1032               ADD         R2,#+16
   \   000000DC   06A8               ADD         R0,SP,#+24
   \   000000DE   03C8               LDMIA       R0!,{R0,R1}
   \   000000E0   03C2               STMIA       R2!,{R0,R1}
    366              input_uvw[0] = (position_t->raw_current_uvw[0])*cy  + (position_t->raw_current_uvw[1])*sy; 	//ÔÚgpsÃ¿´Î¸üÐÂÊ±ÒÑ¾­²¹³¥	            
   \   000000E2   2A1C               MOV         R2,R5
   \   000000E4   1832               ADD         R2,#+24
   \   000000E6   04B4               PUSH        {R2}
   \   000000E8   201C               MOV         R0,R4
   \   000000EA   2030               ADD         R0,#+32
   \   000000EC   0CC8               LDMIA       R0!,{R2,R3}
   \   000000EE   01A8               ADD         R0,SP,#+4
   \   000000F0   03C8               LDMIA       R0!,{R0,R1}
   \   000000F2   ........           _BLF        __dMul,??__dMul??rT
   \   000000F6   061C               MOV         R6,R0
   \   000000F8   0F1C               MOV         R7,R1
   \   000000FA   201C               MOV         R0,R4
   \   000000FC   1830               ADD         R0,#+24
   \   000000FE   0CC8               LDMIA       R0!,{R2,R3}
   \   00000100   03A8               ADD         R0,SP,#+12
   \   00000102   03C8               LDMIA       R0!,{R0,R1}
   \   00000104   ........           _BLF        __dMul,??__dMul??rT
   \   00000108   321C               MOV         R2,R6
   \   0000010A   3B1C               MOV         R3,R7
   \   0000010C   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000110   04BC               POP         {R2}
   \   00000112   03C2               STMIA       R2!,{R0,R1}
    367              input_uvw[1] = (position_t->raw_current_uvw[0])*-sy + (position_t->raw_current_uvw[1])*cy; 
   \   00000114   2035               ADD         R5,#+32
   \   00000116   201C               MOV         R0,R4
   \   00000118   1830               ADD         R0,#+24
   \   0000011A   03C8               LDMIA       R0!,{R0,R1}
   \   0000011C   6A46               MOV         R2,SP
   \   0000011E   0CCA               LDMIA       R2!,{R2,R3}
   \   00000120   ........           _BLF        __dMul,??__dMul??rT
   \   00000124   061C               MOV         R6,R0
   \   00000126   0F1C               MOV         R7,R1
   \   00000128   2034               ADD         R4,#+32
   \   0000012A   0CCC               LDMIA       R4!,{R2,R3}
   \   0000012C   02A8               ADD         R0,SP,#+8
   \   0000012E   03C8               LDMIA       R0!,{R0,R1}
   \   00000130   ........           _BLF        __dMul,??__dMul??rT
   \   00000134   321C               MOV         R2,R6
   \   00000136   3B1C               MOV         R3,R7
   \   00000138   ........           _BLF        __dSub,??__dSub??rT
   \   0000013C   03C5               STMIA       R5!,{R0,R1}
    368          	
    369          
    370          }    
   \   0000013E   0FB0               ADD         SP,#+60
   \   00000140   ....               B           ?Subroutine12
   \   00000142   C046               NOP         
   \                     ??xyz_transform_2:
   \   00000144   ........           DC32        last_raw_current_xyz

   \                                 In segment CODE, align 4, keep-with-next
    371          void uvw_transform(double input_uvw[3], Position * position_t)
    372          {   
    373          	//ËÙ¶È×ª»»º¯Êý---Èô²»ÓÃ±ê×¼»úÌåÏÂµÄËÙ¶È ¿ÉÒÔÔÚ´Ë×÷±ä¶¯
    374              /*input_uvw[0] =  position.current_uvw[0]*cos(ahrs_theta[1])*cos(ahrs_theta[2])+position.current_uvw[1]*cos(ahrs_theta[1])*sin(ahrs_theta[2])-position.current_uvw[2]*sin(ahrs_theta[1]); 		   
    375              input_uvw[1] = -position.current_uvw[0]*sin(ahrs_theta[2])*cos(ahrs_theta[0])+position.current_uvw[1]*cos(ahrs_theta[2])*cos(ahrs_theta[0])+position.current_uvw[2]*sin(ahrs_theta[0]);    
    376              input_uvw[2] =  position.current_uvw[0]*(abs(sin(ahrs_theta[1])))*cos(ahrs_theta[2])
    377                              +position.current_uvw[1]*(abs(sin(ahrs_theta[1])))*sin(ahrs_theta[2])
    378                              +position.current_uvw[2]*cos(ahrs_theta[1]);*/
    379              //input_uvw[0]=Cnb[0][0]*position_t->current_uvw[0]+Cnb[0][1]*position_t->current_uvw[1]+Cnb[0][2]*position_t->current_uvw[2];
    380              //input_uvw[1]=Cnb[1][0]*position_t->current_uvw[0]+Cnb[1][1]*position_t->current_uvw[1]+Cnb[1][2]*position_t->current_uvw[2];   
    381              //input_uvw[2]=Cnb[2][0]*position_t->current_uvw[0]+Cnb[2][1]*position_t->current_uvw[1]+Cnb[2][2]*position_t->current_uvw[2];  
    382          }
   \                     ??uvw_transform:
   \   00000000   7047               BX          LR                 ;; return
    383          
    384             
    385                    
    386          /*---------------------------------------------------------------------------------*/
    387          

   \                                 In segment CODE, align 4, keep-with-next
    388          double yaw_convert(const double yaw, const double t_head)
    389          {
   \                     ??yaw_convert:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   041C               MOV         R4,R0
   \   00000004   0D1C               MOV         R5,R1
   \   00000006   161C               MOV         R6,R2
   \   00000008   1F1C               MOV         R7,R3
    390             if(t_head > PI/2)
   \   0000000A   101C               MOV         R0,R2
   \   0000000C   191C               MOV         R1,R3
   \   0000000E   164A               LDR         R2,??yaw_convert_1  ;; 0x53c8d4f2
   \   00000010   164B               LDR         R3,??yaw_convert_1+0x4  ;; 0x3ff921fb
   \   00000012   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000016   0028               CMP         R0,#+0
   \   00000018   0ED0               BEQ         ??yaw_convert_2
    391                 if(yaw < -PI/2)
   \   0000001A   201C               MOV         R0,R4
   \   0000001C   291C               MOV         R1,R5
   \   0000001E   144A               LDR         R2,??yaw_convert_1+0x8  ;; 0x53c8d4f1
   \   00000020   144B               LDR         R3,??yaw_convert_1+0xC  ;; 0xbff921fb
   \   00000022   ........           _BLF        __dLess,??__dLess??rT
   \   00000026   0028               CMP         R0,#+0
   \   00000028   06D0               BEQ         ??yaw_convert_2
    392                 return yaw+2*PI;
   \   0000002A   1148               LDR         R0,??yaw_convert_1+0x8  ;; 0x53c8d4f1
   \   0000002C   1249               LDR         R1,??yaw_convert_1+0x10  ;; 0x401921fb
   \                     ??yaw_convert_3:
   \   0000002E   221C               MOV         R2,R4
   \   00000030   2B1C               MOV         R3,R5
   \   00000032   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000036   14E0               B           ??yaw_convert_4
    393             if(t_head < -PI/2)
   \                     ??yaw_convert_2:
   \   00000038   301C               MOV         R0,R6
   \   0000003A   391C               MOV         R1,R7
   \   0000003C   0C4A               LDR         R2,??yaw_convert_1+0x8  ;; 0x53c8d4f1
   \   0000003E   0D4B               LDR         R3,??yaw_convert_1+0xC  ;; 0xbff921fb
   \   00000040   ........           _BLF        __dLess,??__dLess??rT
   \   00000044   0028               CMP         R0,#+0
   \   00000046   0AD0               BEQ         ??yaw_convert_5
    394                 if(yaw >  PI/2)
   \   00000048   201C               MOV         R0,R4
   \   0000004A   291C               MOV         R1,R5
   \   0000004C   064A               LDR         R2,??yaw_convert_1  ;; 0x53c8d4f2
   \   0000004E   074B               LDR         R3,??yaw_convert_1+0x4  ;; 0x3ff921fb
   \   00000050   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000054   0028               CMP         R0,#+0
   \   00000056   02D0               BEQ         ??yaw_convert_5
    395                 return yaw-2*PI;
   \   00000058   0548               LDR         R0,??yaw_convert_1+0x8  ;; 0x53c8d4f1
   \   0000005A   0849               LDR         R1,??yaw_convert_1+0x14  ;; 0xc01921fb
   \   0000005C   E7E7               B           ??yaw_convert_3
    396             return yaw; 
   \                     ??yaw_convert_5:
   \   0000005E   201C               MOV         R0,R4
   \   00000060   291C               MOV         R1,R5
   \                     ??yaw_convert_4:
   \   00000062   F0BC               POP         {R4-R7}
   \   00000064   04BC               POP         {R2}
   \   00000066   1047               BX          R2                 ;; return
   \                     ??yaw_convert_1:
   \   00000068   F2D4C853           DC32        0x53c8d4f2
   \   0000006C   FB21F93F           DC32        0x3ff921fb
   \   00000070   F1D4C853           DC32        0x53c8d4f1
   \   00000074   FB21F9BF           DC32        0xbff921fb
   \   00000078   FB211940           DC32        0x401921fb
   \   0000007C   FB2119C0           DC32        0xc01921fb
    397          } 
    398          /*---------------------------------------------------------------------------------*/     
    399                    
    400                    
    401          
    402          
    403          /*---------------------------------------------------------------------------------*/     
    404                    
    405                    
    406          
    407          

   \                                 In segment CODE, align 4, keep-with-next
    408          void gps_monitor()
    409          {
   \                     ??gps_monitor:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
    410              static double last_vtg_course ,
    411                            last_vtg_speed  ,
    412                            last_gga_time   ;
    413              
    414              static int speed_flag = 0,
    415                         course_flag = 0,
    416                         time_flag = 0;
    417                  
    418              if(last_vtg_course == gps_vtg_course )
   \   00000002   ....               LDR         R6,??DataTable24   ;; gps_vtg_course
   \   00000004   30CE               LDMIA       R6!,{R4,R5}
   \   00000006   083E               SUB         R6,#+8
   \   00000008   301C               MOV         R0,R6
   \   0000000A   1830               ADD         R0,#+24
   \   0000000C   03C8               LDMIA       R0!,{R0,R1}
   \   0000000E   221C               MOV         R2,R4
   \   00000010   2B1C               MOV         R3,R5
   \   00000012   ........           _BLF        __dEqual,??__dEqual??rT
   \   00000016   0028               CMP         R0,#+0
   \   00000018   02D0               BEQ         ??gps_monitor_1
    419                 course_flag ++;
   \   0000001A   706C               LDR         R0,[R6, #+68]
   \   0000001C   401C               ADD         R0,R0,#+1
   \   0000001E   00E0               B           ??gps_monitor_2
    420              else 
    421                 course_flag = 0 ;
   \                     ??gps_monitor_1:
   \   00000020   0020               MOV         R0,#+0
   \                     ??gps_monitor_2:
   \   00000022   7064               STR         R0,[R6, #+68]
    422              last_vtg_course = gps_vtg_course;
   \   00000024   301C               MOV         R0,R6
   \   00000026   1830               ADD         R0,#+24
   \   00000028   30C0               STMIA       R0!,{R4,R5}
    423              
    424              if(last_vtg_speed == gps_vtg_speed )
   \   0000002A   301C               MOV         R0,R6
   \   0000002C   0830               ADD         R0,#+8
   \   0000002E   30C8               LDMIA       R0!,{R4,R5}
   \   00000030   301C               MOV         R0,R6
   \   00000032   2030               ADD         R0,#+32
   \   00000034   03C8               LDMIA       R0!,{R0,R1}
   \   00000036   221C               MOV         R2,R4
   \   00000038   2B1C               MOV         R3,R5
   \   0000003A   ........           _BLF        __dEqual,??__dEqual??rT
   \   0000003E   0028               CMP         R0,#+0
   \   00000040   02D0               BEQ         ??gps_monitor_3
    425                 speed_flag ++;
   \   00000042   306C               LDR         R0,[R6, #+64]
   \   00000044   401C               ADD         R0,R0,#+1
   \   00000046   00E0               B           ??gps_monitor_4
    426              else 
    427                 speed_flag = 0 ;
   \                     ??gps_monitor_3:
   \   00000048   0020               MOV         R0,#+0
   \                     ??gps_monitor_4:
   \   0000004A   3064               STR         R0,[R6, #+64]
    428              last_vtg_speed = gps_vtg_speed ;
   \   0000004C   301C               MOV         R0,R6
   \   0000004E   2030               ADD         R0,#+32
   \   00000050   30C0               STMIA       R0!,{R4,R5}
    429              
    430              
    431              if(last_gga_time == gps_gga_time)
   \   00000052   ....               LDR         R7,??DataTable25   ;; zero_flag
   \   00000054   381C               MOV         R0,R7
   \   00000056   3430               ADD         R0,#+52
   \   00000058   30C8               LDMIA       R0!,{R4,R5}
   \   0000005A   301C               MOV         R0,R6
   \   0000005C   2830               ADD         R0,#+40
   \   0000005E   03C8               LDMIA       R0!,{R0,R1}
   \   00000060   221C               MOV         R2,R4
   \   00000062   2B1C               MOV         R3,R5
   \   00000064   ........           _BLF        __dEqual,??__dEqual??rT
   \   00000068   0028               CMP         R0,#+0
   \   0000006A   02D0               BEQ         ??gps_monitor_5
    432                 time_flag ++;
   \   0000006C   B06C               LDR         R0,[R6, #+72]
   \   0000006E   401C               ADD         R0,R0,#+1
   \   00000070   00E0               B           ??gps_monitor_6
    433              else
    434                 time_flag =0 ;
   \                     ??gps_monitor_5:
   \   00000072   0020               MOV         R0,#+0
   \                     ??gps_monitor_6:
   \   00000074   B064               STR         R0,[R6, #+72]
    435              last_gga_time = gps_gga_time ;
   \   00000076   301C               MOV         R0,R6
   \   00000078   2830               ADD         R0,#+40
   \   0000007A   30C0               STMIA       R0!,{R4,R5}
    436              
    437              if(course_flag >=30 && speed_flag >= 30 && time_flag >=30 )  //30¸ö¿ØÖÆÖÜÆÚÄÚÃ»ÓÐ¸üÐÂgpsÖµ
   \   0000007C   706C               LDR         R0,[R6, #+68]
   \   0000007E   1E28               CMP         R0,#+30
   \   00000080   07DB               BLT         ??gps_monitor_7
   \   00000082   306C               LDR         R0,[R6, #+64]
   \   00000084   1E28               CMP         R0,#+30
   \   00000086   04DB               BLT         ??gps_monitor_7
   \   00000088   B06C               LDR         R0,[R6, #+72]
   \   0000008A   1E28               CMP         R0,#+30
   \   0000008C   01DB               BLT         ??gps_monitor_7
    438              {   
    439                  gps_update_flag = 2;        //gpsÐÅºÅÖÐ¶Ï
   \   0000008E   0220               MOV         R0,#+2
   \   00000090   7867               STR         R0,[R7, #+116]
    440                  /*trajectory.reset();         // ********´¦ÀígpsÖÐ¶ÏµÄÇé¿ö************
    441                  position.current_uvw[0]= 0;
    442                  position.current_uvw[1]= 0;
    443                  position.current_uvw[2]= 0;
    444                  trajectory.heli_step = 1;   //ÊÖ¿Ø×´Ì¬ÎÞÓ°Ïì*/
    445              }   
    446          }
   \                     ??gps_monitor_7:
   \   00000092   ....               B           ?Subroutine12

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     gps_vtg_course:
   \   00000000                      DS8 8
   \                     gps_vtg_speed:
   \   00000008                      DS8 8
   \   00000010                      DS8 8
   \   00000018                      DS8 8
   \   00000020                      DS8 8
   \   00000028                      DS8 8
   \                     last_gps_gga_num_sats:
   \   00000030                      DS8 4
   \   00000034                      DS8 12
   \   00000040                      DS8 4
   \   00000044                      DS8 4
   \   00000048                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     Re2t:
   \   00000000                      DS8 72
    447          

   \                                 In segment CODE, align 4, keep-with-next
    448          void gps_update()
    449          {
   \                     ??gps_update:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   8AB0               SUB         SP,#+40
    450          //    static double output_xyz[3],output_uvw[3];
    451              
    452              bool gps_sample = false;
    453              
    454              
    455               if(gga_update_flag==true ) // ½ÓÊÕµ½Ò»´®Êý¾Ý
   \   00000004   974C               LDR         R4,??gps_update_1  ;; gga_update_flag
   \   00000006   2078               LDRB        R0,[R4, #+0]
   \   00000008   0028               CMP         R0,#+0
   \   0000000A   03D0               BEQ         ??gps_update_2
    456               {
    457                   gpgga_update();
   \   0000000C   ........           BL          ??gpgga_update
    458                   gga_update_flag=false;    
   \   00000010   0020               MOV         R0,#+0
   \   00000012   2070               STRB        R0,[R4, #+0]
    459               }
    460              if(vtg_update_flag==true && (gps_gga_quality!=0))   // in interrupt_usart.c
   \                     ??gps_update_2:
   \   00000014   944C               LDR         R4,??gps_update_1+0x4  ;; vtg_update_flag
   \   00000016   2078               LDRB        R0,[R4, #+0]
   \   00000018   0028               CMP         R0,#+0
   \   0000001A   02D0               BEQ         ??gps_update_3
   \   0000001C   ....               LDR         R5,??DataTable26   ;; zero_flag
   \   0000001E   A86F               LDR         R0,[R5, #+120]
   \   00000020   0028               CMP         R0,#+0
   \                     ??gps_update_3:
   \   00000022   ....               BNE         .+5
   \   00000024   1CE1               B           ??gps_update_4
    461               {
    462                  gpvtg_update();
   \   00000026   ........           BL          ??gpvtg_update
    463                  vtg_update_flag = false;
   \   0000002A   0020               MOV         R0,#+0
   \   0000002C   2070               STRB        R0,[R4, #+0]
    464                  gps_sample = true;
    465               } 
    466               
    467               
    468               if(gps_sample==true)
    469               {
    470                   gps_sample = false;
    471                   if((gps_gga_quality==1 ||gps_gga_quality==2 || gps_gga_quality ==5 ) &&
    472                      (gps_gga_num_sats>=4))
   \   0000002E   A86F               LDR         R0,[R5, #+120]
   \   00000030   ....               LDR         R4,??DataTable27   ;; position
   \   00000032   211C               MOV         R1,R4
   \   00000034   8031               ADD         R1,#+128
   \   00000036   0091               STR         R1,[SP, #+0]
   \   00000038   0126               MOV         R6,#+1
   \   0000003A   0128               CMP         R0,#+1
   \   0000003C   04D0               BEQ         ??gps_update_5
   \   0000003E   0228               CMP         R0,#+2
   \   00000040   02D0               BEQ         ??gps_update_5
   \   00000042   0528               CMP         R0,#+5
   \   00000044   ....               BEQ         .+5
   \   00000046   E2E0               B           ??gps_update_6
   \                     ??gps_update_5:
   \   00000048   E86F               LDR         R0,[R5, #+124]
   \   0000004A   0428               CMP         R0,#+4
   \   0000004C   ....               BGE         .+5
   \   0000004E   DEE0               B           ??gps_update_6
    473                   {
    474                       gps_update_flag = 1;
   \   00000050   6E67               STR         R6,[R5, #+116]
    475                       gps_date_init();
   \   00000052   ........           BL          ??gps_date_init
    476                       gps2xyz(position.first_raw_current_xyz);    //update current_xyz£¬Ë³Ðò²»ÄÜ·´
   \   00000056   201C               MOV         R0,R4
   \   00000058   7830               ADD         R0,#+120
   \   0000005A   ........           BL          ??gps2xyz
   \   0000005E   8348               LDR         R0,??gps_update_1+0x8  ;; last_raw_current_xyz + 48
   \   00000060   C0C8               LDMIA       R0!,{R6,R7}
   \   00000062   0122               MOV         R2,#+1
   \   00000064   301C               MOV         R0,R6
   \   00000066   391C               MOV         R1,R7
   \   00000068   ........           _BLF        _Sin,??_Sin??rT
   \   0000006C   804A               LDR         R2,??gps_update_1+0xC  ;; 0x47ae147b
   \   0000006E   814B               LDR         R3,??gps_update_1+0x10  ;; 0x3fb47ae1
   \   00000070   ........           _BLF        __dMul,??__dMul??rT
   \   00000074   A26F               LDR         R2,[R4, #+120]
   \   00000076   E36F               LDR         R3,[R4, #+124]
   \   00000078   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000007C   A067               STR         R0,[R4, #+120]
   \   0000007E   E167               STR         R1,[R4, #+124]
    477                       position.first_raw_current_xyz[0] = position.first_raw_current_xyz[0] + cos(input_yaw) * 0.08;//0.23»úÌåÖØÐÄÏà¶ÔgpsÆ«ÒÆÁ¿
    478                       position.first_raw_current_xyz[1] = position.first_raw_current_xyz[1] + sin(input_yaw) * 0.08;  
   \   00000080   0022               MOV         R2,#+0
   \   00000082   301C               MOV         R0,R6
   \   00000084   391C               MOV         R1,R7
   \   00000086   ........           _BLF        _Sin,??_Sin??rT
   \   0000008A   794A               LDR         R2,??gps_update_1+0xC  ;; 0x47ae147b
   \   0000008C   794B               LDR         R3,??gps_update_1+0x10  ;; 0x3fb47ae1
   \   0000008E   ........           _BLF        __dMul,??__dMul??rT
   \   00000092   021C               MOV         R2,R0
   \   00000094   0B1C               MOV         R3,R1
   \   00000096   0098               LDR         R0,[SP, #+0]
   \   00000098   03C8               LDMIA       R0!,{R0,R1}
   \   0000009A   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000009E   009A               LDR         R2,[SP, #+0]
   \   000000A0   03C2               STMIA       R2!,{R0,R1}
    479                       
    480          //           gps2uvw(position.first_raw_current_uvw);    //update speed
    481                       double old_raw_current_x = position.raw_current_xyz[0];
   \   000000A2   06AA               ADD         R2,SP,#+24
   \   000000A4   A06C               LDR         R0,[R4, #+72]
   \   000000A6   E16C               LDR         R1,[R4, #+76]
   \   000000A8   03C2               STMIA       R2!,{R0,R1}
    482                       double old_raw_current_y = position.raw_current_xyz[1];
   \   000000AA   206D               LDR         R0,[R4, #+80]
   \   000000AC   616D               LDR         R1,[R4, #+84]
   \   000000AE   03C2               STMIA       R2!,{R0,R1}
   \   000000B0   02AA               ADD         R2,SP,#+8
   \   000000B2   206E               LDR         R0,[R4, #+96]
   \   000000B4   616E               LDR         R1,[R4, #+100]
   \   000000B6   03C2               STMIA       R2!,{R0,R1}
   \   000000B8   A06E               LDR         R0,[R4, #+104]
   \   000000BA   E16E               LDR         R1,[R4, #+108]
   \   000000BC   03C2               STMIA       R2!,{R0,R1}
    483                       double old_raw_current_u = position.raw_current_uvw[0];
    484                       double old_raw_current_v = position.raw_current_uvw[1];
    485                       
    486                        if(zero_flag == 1)
   \   000000BE   2878               LDRB        R0,[R5, #+0]
   \   000000C0   0128               CMP         R0,#+1
   \   000000C2   42D1               BNE         ??gps_update_7
    487                            {
    488                              for(int i=0;i<2;i++)
   \   000000C4   0026               MOV         R6,#+0
    489                                  {
    490                                     position.raw_current_xyz[i] +=  position.raw_current_uvw[i] * 0.1;//Ô¤²â
   \                     ??gps_update_8:
   \   000000C6   F500               LSL         R5,R6,#+3
   \   000000C8   201C               MOV         R0,R4
   \   000000CA   4830               ADD         R0,#+72
   \   000000CC   4019               ADD         R0,R0,R5
   \   000000CE   0190               STR         R0,[SP, #+4]
   \   000000D0   071C               MOV         R7,R0
   \   000000D2   201C               MOV         R0,R4
   \   000000D4   6030               ADD         R0,#+96
   \   000000D6   4019               ADD         R0,R0,R5
   \   000000D8   03C8               LDMIA       R0!,{R0,R1}
   \   000000DA   021C               MOV         R2,R0
   \   000000DC   0B1C               MOV         R3,R1
   \   000000DE   6648               LDR         R0,??gps_update_1+0x14  ;; 0x9999999a
   \   000000E0   6649               LDR         R1,??gps_update_1+0x18  ;; 0x3fb99999
   \   000000E2   ........           _BLF        __dMul,??__dMul??rT
   \   000000E6   021C               MOV         R2,R0
   \   000000E8   0B1C               MOV         R3,R1
   \   000000EA   0198               LDR         R0,[SP, #+4]
   \   000000EC   03C8               LDMIA       R0!,{R0,R1}
   \   000000EE   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000F2   03C7               STMIA       R7!,{R0,R1}
    491                                     position.raw_current_xyz[i] = abnormal_limit(position.first_raw_current_xyz[i], last_raw_current_xyz[i], &position.raw_current_xyz[i], 1.0);//5m/s
   \   000000F4   201C               MOV         R0,R4
   \   000000F6   7830               ADD         R0,#+120
   \   000000F8   4719               ADD         R7,R0,R5
   \   000000FA   6148               LDR         R0,??gps_update_1+0x1C  ;; last_raw_current_xyz
   \   000000FC   4519               ADD         R5,R0,R5
   \   000000FE   0020               MOV         R0,#+0
   \   00000100   ....               LDR         R1,??DataTable28   ;; 0x3ff00000
   \   00000102   03B4               PUSH        {R0,R1}
   \   00000104   0398               LDR         R0,[SP, #+12]
   \   00000106   01B4               PUSH        {R0}
   \   00000108   0CCD               LDMIA       R5!,{R2,R3}
   \   0000010A   083D               SUB         R5,#+8
   \   0000010C   03CF               LDMIA       R7!,{R0,R1}
   \   0000010E   083F               SUB         R7,#+8
   \   00000110   ........           _BLF        ??abnormal_limit,??abnormal_limit??rT
   \   00000114   049A               LDR         R2,[SP, #+16]
   \   00000116   03C2               STMIA       R2!,{R0,R1}
    492                                     last_raw_current_xyz[i] = position.first_raw_current_xyz[i];
   \   00000118   03CF               LDMIA       R7!,{R0,R1}
   \   0000011A   03C5               STMIA       R5!,{R0,R1}
    493          //                           position.raw_current_uvw[i] = abnormal_limit(position.first_raw_current_uvw[i], last_raw_current_uvw[i],&output_uvw[i], 4);//×¢ÒâÏÞ·ùÖµ´óÐ¡
    494          //                           last_raw_current_uvw[i] = position.first_raw_current_uvw[i];
    495                                  }
   \   0000011C   761C               ADD         R6,R6,#+1
   \   0000011E   03B0               ADD         SP,#+12
   \   00000120   022E               CMP         R6,#+2
   \   00000122   D0DB               BLT         ??gps_update_8
    496                                  position.raw_current_xyz[2] = abnormal_limit(position.first_raw_current_xyz[2], last_raw_current_xyz[2], &last_raw_current_xyz[2], 100);
   \   00000124   0020               MOV         R0,#+0
   \   00000126   ....               LDR         R1,??DataTable29   ;; 0x40590000
   \   00000128   03B4               PUSH        {R0,R1}
   \   0000012A   5648               LDR         R0,??gps_update_1+0x20  ;; last_raw_current_xyz + 16
   \   0000012C   01B4               PUSH        {R0}
   \   0000012E   0CC8               LDMIA       R0!,{R2,R3}
   \   00000130   0398               LDR         R0,[SP, #+12]
   \   00000132   0830               ADD         R0,#+8
   \   00000134   03C8               LDMIA       R0!,{R0,R1}
   \   00000136   ........           _BLF        ??abnormal_limit,??abnormal_limit??rT
   \   0000013A   A065               STR         R0,[R4, #+88]
   \   0000013C   E165               STR         R1,[R4, #+92]
    497                                  last_raw_current_xyz[2] = position.first_raw_current_xyz[2];
   \   0000013E   514A               LDR         R2,??gps_update_1+0x20  ;; last_raw_current_xyz + 16
   \   00000140   0398               LDR         R0,[SP, #+12]
   \   00000142   0830               ADD         R0,#+8
   \   00000144   03C8               LDMIA       R0!,{R0,R1}
   \   00000146   03C2               STMIA       R2!,{R0,R1}
   \   00000148   03B0               ADD         SP,#+12
    498          //                        position.raw_current_uvw[2] = abnormal_limit(position.first_raw_current_uvw[2], last_raw_current_uvw[2], &output_uvw[2], 20);//¸ß¶ÈÏîÓÐÃ»ÓÐ±ØÒªÏÞ£¿£¿
    499          //                        last_raw_current_uvw[2] = position.first_raw_current_uvw[2];
    500                            }
    501          
    502          
    503                            
    504                            position.raw_current_uvw[0] = (position.raw_current_xyz[0] - old_raw_current_x) / 0.1;
   \                     ??gps_update_7:
   \   0000014A   A66C               LDR         R6,[R4, #+72]
   \   0000014C   E76C               LDR         R7,[R4, #+76]
   \   0000014E   301C               MOV         R0,R6
   \   00000150   391C               MOV         R1,R7
   \   00000152   06AA               ADD         R2,SP,#+24
   \   00000154   0CCA               LDMIA       R2!,{R2,R3}
   \   00000156   ........           _BLF        __dSub,??__dSub??rT
   \   0000015A   474A               LDR         R2,??gps_update_1+0x14  ;; 0x9999999a
   \   0000015C   474B               LDR         R3,??gps_update_1+0x18  ;; 0x3fb99999
   \   0000015E   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000162   2066               STR         R0,[R4, #+96]
   \   00000164   6166               STR         R1,[R4, #+100]
    505                            if(position.raw_current_uvw[0] == 0.0 && abs(old_raw_current_u - position.raw_current_uvw[0]) > 1.8)
   \   00000166   021C               MOV         R2,R0
   \   00000168   0B1C               MOV         R3,R1
   \   0000016A   0020               MOV         R0,#+0
   \   0000016C   0021               MOV         R1,#+0
   \   0000016E   ........           _BLF        __dEqual,??__dEqual??rT
   \   00000172   0028               CMP         R0,#+0
   \   00000174   19D0               BEQ         ??gps_update_9
   \   00000176   02A8               ADD         R0,SP,#+8
   \   00000178   03C8               LDMIA       R0!,{R0,R1}
   \   0000017A   4900               LSL         R1,R1,#+1
   \   0000017C   4908               LSR         R1,R1,#+1
   \   0000017E   424A               LDR         R2,??gps_update_1+0x24  ;; 0xccccccce
   \   00000180   424B               LDR         R3,??gps_update_1+0x28  ;; 0x3ffccccc
   \   00000182   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000186   0028               CMP         R0,#+0
   \   00000188   0FD0               BEQ         ??gps_update_9
    506                            {
    507                              position.raw_current_uvw[0] = old_raw_current_u;
   \   0000018A   02A8               ADD         R0,SP,#+8
   \   0000018C   03C8               LDMIA       R0!,{R0,R1}
   \   0000018E   2066               STR         R0,[R4, #+96]
   \   00000190   6166               STR         R1,[R4, #+100]
    508                              position.raw_current_xyz[0] +=  position.raw_current_uvw[0] * 0.1;
   \   00000192   021C               MOV         R2,R0
   \   00000194   0B1C               MOV         R3,R1
   \   00000196   3848               LDR         R0,??gps_update_1+0x14  ;; 0x9999999a
   \   00000198   3849               LDR         R1,??gps_update_1+0x18  ;; 0x3fb99999
   \   0000019A   ........           _BLF        __dMul,??__dMul??rT
   \   0000019E   321C               MOV         R2,R6
   \   000001A0   3B1C               MOV         R3,R7
   \   000001A2   ........           _BLF        __dAdd,??__dAdd??rT
   \   000001A6   A064               STR         R0,[R4, #+72]
   \   000001A8   E164               STR         R1,[R4, #+76]
    509                            }
    510          //                  double abs_e = abs(old_raw_current_u - position.raw_current_uvw[0]);
    511          //                  if(abs_e < 0.1);
    512          //                  else if(abs_e < 0.2)
    513          //                    position.raw_current_uvw[0] = 0.1*old_raw_current_u + 0.9*position.raw_current_uvw[0];  
    514          //                  else if(abs_e < 0.3)
    515          //                    position.raw_current_uvw[0] = 0.2*old_raw_current_u + 0.8*position.raw_current_uvw[0];
    516          //                  else if(abs_e < 0.5)
    517          //                    position.raw_current_uvw[0] = 0.5*old_raw_current_u + 0.5*position.raw_current_uvw[0];
    518          //                  else if(abs_e < 1.0)
    519          //                    position.raw_current_uvw[0] = 0.75*old_raw_current_u + 0.25*position.raw_current_uvw[0];
    520          //                  else
    521          //                    position.raw_current_uvw[0] = 0.85*old_raw_current_u + 0.15*position.raw_current_uvw[0];
    522                            
    523                            
    524                            position.raw_current_uvw[1] = (position.raw_current_xyz[1] - old_raw_current_y) / 0.1;
   \                     ??gps_update_9:
   \   000001AA   266D               LDR         R6,[R4, #+80]
   \   000001AC   676D               LDR         R7,[R4, #+84]
   \   000001AE   301C               MOV         R0,R6
   \   000001B0   391C               MOV         R1,R7
   \   000001B2   08AA               ADD         R2,SP,#+32
   \   000001B4   0CCA               LDMIA       R2!,{R2,R3}
   \   000001B6   ........           _BLF        __dSub,??__dSub??rT
   \   000001BA   2F4A               LDR         R2,??gps_update_1+0x14  ;; 0x9999999a
   \   000001BC   2F4B               LDR         R3,??gps_update_1+0x18  ;; 0x3fb99999
   \   000001BE   ........           _BLF        __dDiv,??__dDiv??rT
   \   000001C2   A066               STR         R0,[R4, #+104]
   \   000001C4   E166               STR         R1,[R4, #+108]
    525                            if(position.raw_current_uvw[1] == 0.0 && abs(old_raw_current_v - position.raw_current_uvw[1]) > 1.8)
   \   000001C6   021C               MOV         R2,R0
   \   000001C8   0B1C               MOV         R3,R1
   \   000001CA   0020               MOV         R0,#+0
   \   000001CC   0021               MOV         R1,#+0
   \   000001CE   ........           _BLF        __dEqual,??__dEqual??rT
   \   000001D2   0028               CMP         R0,#+0
   \   000001D4   44D0               BEQ         ??gps_update_4
   \   000001D6   04A8               ADD         R0,SP,#+16
   \   000001D8   03C8               LDMIA       R0!,{R0,R1}
   \   000001DA   4900               LSL         R1,R1,#+1
   \   000001DC   4908               LSR         R1,R1,#+1
   \   000001DE   2A4A               LDR         R2,??gps_update_1+0x24  ;; 0xccccccce
   \   000001E0   2A4B               LDR         R3,??gps_update_1+0x28  ;; 0x3ffccccc
   \   000001E2   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   000001E6   0028               CMP         R0,#+0
   \   000001E8   3AD0               BEQ         ??gps_update_4
    526                            {
    527                            position.raw_current_uvw[1] = old_raw_current_v;
   \   000001EA   04A8               ADD         R0,SP,#+16
   \   000001EC   03C8               LDMIA       R0!,{R0,R1}
   \   000001EE   A066               STR         R0,[R4, #+104]
   \   000001F0   E166               STR         R1,[R4, #+108]
    528                            position.raw_current_xyz[1] +=  position.raw_current_uvw[1] * 0.1;
   \   000001F2   201C               MOV         R0,R4
   \   000001F4   6830               ADD         R0,#+104
   \   000001F6   03C8               LDMIA       R0!,{R0,R1}
   \   000001F8   1F4A               LDR         R2,??gps_update_1+0x14  ;; 0x9999999a
   \   000001FA   204B               LDR         R3,??gps_update_1+0x18  ;; 0x3fb99999
   \   000001FC   ........           _BLF        __dMul,??__dMul??rT
   \   00000200   321C               MOV         R2,R6
   \   00000202   3B1C               MOV         R3,R7
   \   00000204   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000208   2065               STR         R0,[R4, #+80]
   \   0000020A   6165               STR         R1,[R4, #+84]
   \   0000020C   28E0               B           ??gps_update_4
    529                            }  
    530          //                  abs_e = abs(old_raw_current_v - position.raw_current_uvw[1]);
    531          //                  if(abs_e < 0.1);
    532          //                  else if(abs_e < 0.2)
    533          //                    position.raw_current_uvw[1] = 0.1*old_raw_current_v + 0.9*position.raw_current_uvw[1];  
    534          //                  else if(abs_e < 0.3)
    535          //                    position.raw_current_uvw[1] = 0.2*old_raw_current_v + 0.8*position.raw_current_uvw[1];
    536          //                  else if(abs_e < 0.5)
    537          //                    position.raw_current_uvw[1] = 0.5*old_raw_current_v + 0.5*position.raw_current_uvw[1];
    538          //                  else if(abs_e < 1.0)
    539          //                    position.raw_current_uvw[1] = 0.75*old_raw_current_v + 0.25*position.raw_current_uvw[1];
    540          //                  else
    541          //                    position.raw_current_uvw[1] = 0.85*old_raw_current_v + 0.15*position.raw_current_uvw[1];
    542          
    543                        
    544                        
    545                   }
    546                   else //set to abnormal mod, all to zero.
    547                   {
    548                        gps_update_flag = 2;
   \                     ??gps_update_6:
   \   0000020E   0220               MOV         R0,#+2
   \   00000210   6867               STR         R0,[R5, #+116]
    549                         trajectory.reset();     // ********´¦ÀígpsÖÐ¶ÏµÄÇé¿ö************
   \   00000212   1F4D               LDR         R5,??gps_update_1+0x2C  ;; trajectory
   \   00000214   281C               MOV         R0,R5
   \   00000216   ........           _BLF        ??reset,??reset??rT
    550                        position.current_uvw[0]= 0;
   \   0000021A   0020               MOV         R0,#+0
   \   0000021C   0021               MOV         R1,#+0
   \   0000021E   221C               MOV         R2,R4
   \   00000220   1832               ADD         R2,#+24
   \   00000222   03C2               STMIA       R2!,{R0,R1}
    551                        position.current_uvw[1]= 0;
   \   00000224   221C               MOV         R2,R4
   \   00000226   2032               ADD         R2,#+32
   \   00000228   03C2               STMIA       R2!,{R0,R1}
    552                        position.current_uvw[2]= 0;
   \   0000022A   221C               MOV         R2,R4
   \   0000022C   2832               ADD         R2,#+40
   \   0000022E   03C2               STMIA       R2!,{R0,R1}
    553                        position.raw_current_uvw[0]= 0;
   \   00000230   2066               STR         R0,[R4, #+96]
   \   00000232   6166               STR         R1,[R4, #+100]
    554                        position.raw_current_uvw[1]= 0;
   \   00000234   A066               STR         R0,[R4, #+104]
   \   00000236   E166               STR         R1,[R4, #+108]
    555                        position.raw_current_uvw[2]= 0;
   \   00000238   2067               STR         R0,[R4, #+112]
   \   0000023A   6167               STR         R1,[R4, #+116]
    556                        position.current_target[0] =  position.current_xyz[0] ;
   \   0000023C   009A               LDR         R2,[SP, #+0]
   \   0000023E   2832               ADD         R2,#+40
   \   00000240   03CC               LDMIA       R4!,{R0,R1}
   \   00000242   083C               SUB         R4,#+8
   \   00000244   03C2               STMIA       R2!,{R0,R1}
    557                        position.current_target[1] =  position.current_xyz[1];
   \   00000246   009A               LDR         R2,[SP, #+0]
   \   00000248   3032               ADD         R2,#+48
   \   0000024A   201C               MOV         R0,R4
   \   0000024C   0830               ADD         R0,#+8
   \   0000024E   03C8               LDMIA       R0!,{R0,R1}
   \   00000250   03C2               STMIA       R2!,{R0,R1}
    558                        position.current_target[2] =  position.current_xyz[2];
   \   00000252   009A               LDR         R2,[SP, #+0]
   \   00000254   3832               ADD         R2,#+56
   \   00000256   1034               ADD         R4,#+16
   \   00000258   03CC               LDMIA       R4!,{R0,R1}
   \   0000025A   03C2               STMIA       R2!,{R0,R1}
    559                        
    560                        trajectory.heli_step = 1;   //ÊÖ¿Ø×´Ì¬ÎÞÓ°Ïì  
   \   0000025C   E035               ADD         R5,#+224
   \   0000025E   2E60               STR         R6,[R5, #+0]
    561                   }
    562                   
    563               }//end if(gps_sample = 1) 
    564          
    565          }
   \                     ??gps_update_4:
   \   00000260   0AB0               ADD         SP,#+40
   \   00000262   ....               B           ?Subroutine12
   \                     ??gps_update_1:
   \   00000264   ........           DC32        gga_update_flag
   \   00000268   ........           DC32        vtg_update_flag
   \   0000026C   ........           DC32        last_raw_current_xyz + 48
   \   00000270   7B14AE47           DC32        0x47ae147b
   \   00000274   E17AB43F           DC32        0x3fb47ae1
   \   00000278   9A999999           DC32        0x9999999a
   \   0000027C   9999B93F           DC32        0x3fb99999
   \   00000280   ........           DC32        last_raw_current_xyz
   \   00000284   ........           DC32        last_raw_current_xyz + 16
   \   00000288   CECCCCCC           DC32        0xccccccce
   \   0000028C   CCCCFC3F           DC32        0x3ffccccc
   \   00000290   ........           DC32        trajectory

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable0:
   \   00000000   ........           DC32        zero_flag

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   399D52A2           DC32        0xa2529d39

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   46DF913F           DC32        0x3f91df46

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable6:
   \   00000000   0000F03F           DC32        0x3ff00000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable11:
   \   00000000   00005940           DC32        0x40590000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable13:
   \   00000000   ........           DC32        zero_flag

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable18:
   \   00000000   ........           DC32        gps_vtg_course

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable21:
   \   00000000   399D52A2           DC32        0xa2529d39

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable22:
   \   00000000   46DF913F           DC32        0x3f91df46

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable23:
   \   00000000   ........           DC32        position

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable24:
   \   00000000   ........           DC32        gps_vtg_course

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable25:
   \   00000000   ........           DC32        zero_flag

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable26:
   \   00000000   ........           DC32        zero_flag

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32        position

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   0000F03F           DC32        0x3ff00000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable29:
   \   00000000   00005940           DC32        0x40590000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for zero_flag>`:
   \   00000000   00                 DC8 0
   \                     `?<Initializer for first_entry>`:
   \   00000001   01                 DC8 1
   \   00000002   0000               DC8 0, 0
   \                     `?<Initializer for zero_position_ECEF>`:
   \   00000004   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000014   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for zero_position0>`:
   \   0000001C   8010A5A1F7BC       DC32 0A1A51080H, 3FD9BCF7H
   \              D93F        
   \                     `?<Initializer for zero_position1>`:
   \   00000024   F628EB2CFEAA       DC32 2CEB28F6H, 3FFFAAFEH
   \              FF3F        
   \                     `?<Initializer for zero_position2>`:
   \   0000002C   000000000000       DC32 0H, 40430000H
   \              4340        
   \                     `?<Initializer for gps_gga_time>`:
   \   00000034   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for gps_gga_latitude>`:
   \   0000003C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for gps_gga_longitude>`:
   \   00000044   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for gps_gga_hdop>`:
   \   0000004C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for gps_gga_altitude>`:
   \   00000054   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for gps_gga_wgs_alt>`:
   \   0000005C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for f>`:
   \   00000064   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for e>`:
   \   0000006C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for gps_update_flag>`:
   \   00000074   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for gps_gga_quality>`:
   \   00000078   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for gps_gga_num_sats>`:
   \   0000007C   00000000           DC8 0, 0, 0, 0

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for cos_theta>`:
   \   00000000   000000000000       DC32 0H, 3FF00000H
   \              F03F        
   \                     `?<Initializer for sin_theta>`:
   \   00000008   000000000000       DC32 0H, 0H
   \              0000        
   \                     `?<Initializer for last_theta>`:
   \   00000010   000000000000       DC32 0H, 0H
   \              0000        

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   000000000000       DC32 0H, 0H
   \              0000        
   \   00000008   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
    566           

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     ECEF2Tangent(double *)            64
     gpgga_update()                    44
     gps2uvw(double *)                 32
     gps2xyz(double *)                 16
     gps_date_init()                   56
     gps_monitor()                     20
     gps_update()                      72
     gpvtg_update()                    12
     index(char *, int)                 4
     llh2ECEF(double *)                68
     ned2bf2(double const *, double, double *)
                                       28
     strntol(char *, size_t, char **, int)
                                       28
     uvw_transform(double *, Position *)
                                        0
     xyz_transform(double *, Position *, Trajectory *)
                                       84
     yaw_convert(double, double)       20


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     index(char *, int)               22
     input_xyz                        24
     last_raw_current_xyz             56
     last_raw_current_uvw             24
     abnormal_limit_flag               1
     ned2bf2(double const *, double, double *)
                                     176
     strntol(char *, size_t, char **, int)
                                      54
     gps_date_init()                 660
     ?Subroutine12                    48
     zero_flag                       128
     cos_theta                        24
     llh2ECEF(double *)              340
     ECEF2Tangent(double *)          268
     gpgga_update()                  584
     gpvtg_update()                  104
     gps2xyz(double *)               136
     gps2uvw(double *)               204
     xyz_transform(double *, Position *, Trajectory *)
                                     328
     uvw_transform(double *, Position *)
                                       2
     yaw_convert(double, double)     128
     gps_monitor()                   148
     gps_vtg_course                   76
     Re2t                             72
     gps_update()                    660
     ??DataTable0                      4
     ??DataTable3                      4
     ??DataTable4                      4
     ??DataTable6                      4
     ??DataTable11                     4
     ??DataTable13                     4
     ??DataTable18                     4
     ??DataTable21                     4
     ??DataTable22                     4
     ??DataTable23                     4
     ??DataTable24                     4
     ??DataTable25                     4
     ??DataTable26                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable29                     4
     ?<Initializer for zero_flag>    128
     ?<Initializer for cos_theta>     24
     ?<Constant {(0.0)}>              24
      Others                         400

 
 4 302 bytes in segment CODE
    24 bytes in segment DATA_C
   152 bytes in segment DATA_I
   152 bytes in segment DATA_ID
   253 bytes in segment DATA_Z
    24 bytes in segment INITTAB
 
 3 296 bytes of CODE  memory (+ 1 030 bytes shared)
   176 bytes of CONST memory
   405 bytes of DATA  memory

Errors: none
Warnings: none
