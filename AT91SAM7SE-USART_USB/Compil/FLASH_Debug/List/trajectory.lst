##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.31A/W32 EVALUATION    07/Jan/2016  21:50:34 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\trajectory\trajectory.c                     #
#    Command line    =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\trajectory\trajectory.c -lC                 #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\ -o H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6- #
#                       27ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»® #
#                       +LQR_2014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Deb #
#                       ug\Obj\ -z9 --debug --cpu_mode thumb --endian        #
#                       little --cpu ARM7TDMI --stack_align 4 --interwork    #
#                       -e --fpu None --ec++ --dlib_config                   #
#                       D:\IAREWE431\ARM\LIB\dl4tptinl8n.h -I                #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\srcIAR\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\src\ -I      #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\ -I       #
#                       H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\kalman\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pcm\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\spi\   #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\timer\ #
#                        -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27 #
#                       ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+L #
#                       QR_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\pid\  #
#                       -I H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27Ë #
#                       øÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQ #
#                       R_2014_7_31\AT91SAM7SE-USART_USB\Compil\..\..\avcs\  #
#                       -I D:\IAREWE431\ARM\INC\                             #
#    List file       =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Lis #
#                       t\trajectory.lst                                     #
#    Object file     =  H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ² #
#                       \Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2 #
#                       014_7_31\AT91SAM7SE-USART_USB\Compil\FLASH_Debug\Obj #
#                       \trajectory.r79                                      #
#                                                                            #
#                                                                            #
##############################################################################

H:\ÊµÑéÊÒ¹¤×÷2015-8-20\2014-10-1ÊµÑéÊÒ\2015-6-27ËøÎ²\Ð¡Ö±Éý»ú´úÂë²âÊÔ1-6\Ð¡Ö±Éý»ú´úÂë²âÊÔ\Â·¾¶¹æ»®+LQR_2014_7_31\trajectory\trajectory.c
      1          #include "includs.h"

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code16?? __code __interwork __atpcs double pow(double, int)
   \                     ??pow:
   \   00000000   FFB5               PUSH        {R0-R7,LR}
   \   00000002   041C               MOV         R4,R0
   \   00000004   0D1C               MOV         R5,R1
   \   00000006   161C               MOV         R6,R2
   \   00000008   171C               MOV         R7,R2
   \   0000000A   00D5               BPL         ??pow_1
   \   0000000C   7F42               NEG         R7,R7
   \                     ??pow_1:
   \   0000000E   6A46               MOV         R2,SP
   \   00000010   0020               MOV         R0,#+0
   \   00000012   1749               LDR         R1,??pow_2         ;; 0x3ff00000
   \   00000014   03C2               STMIA       R2!,{R0,R1}
   \   00000016   07E0               B           ??pow_3
   \                     ??pow_4:
   \   00000018   221C               MOV         R2,R4
   \   0000001A   2B1C               MOV         R3,R5
   \   0000001C   201C               MOV         R0,R4
   \   0000001E   291C               MOV         R1,R5
   \   00000020   ........           _BLF        __dMul,??__dMul??rT
   \   00000024   041C               MOV         R4,R0
   \   00000026   0D1C               MOV         R5,R1
   \                     ??pow_3:
   \   00000028   F807               LSL         R0,R7,#+31
   \   0000002A   09D5               BPL         ??pow_5
   \   0000002C   6A46               MOV         R2,SP
   \   0000002E   04B4               PUSH        {R2}
   \   00000030   01A8               ADD         R0,SP,#+4
   \   00000032   03C8               LDMIA       R0!,{R0,R1}
   \   00000034   221C               MOV         R2,R4
   \   00000036   2B1C               MOV         R3,R5
   \   00000038   ........           _BLF        __dMul,??__dMul??rT
   \   0000003C   04BC               POP         {R2}
   \   0000003E   03C2               STMIA       R2!,{R0,R1}
   \                     ??pow_5:
   \   00000040   7F08               LSR         R7,R7,#+1
   \   00000042   E9D1               BNE         ??pow_4
   \   00000044   002E               CMP         R6,#+0
   \   00000046   08D5               BPL         ??pow_6
   \   00000048   02AE               ADD         R6,SP,#+8
   \   0000004A   0020               MOV         R0,#+0
   \   0000004C   0849               LDR         R1,??pow_2         ;; 0x3ff00000
   \   0000004E   6A46               MOV         R2,SP
   \   00000050   0CCA               LDMIA       R2!,{R2,R3}
   \   00000052   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000056   03C6               STMIA       R6!,{R0,R1}
   \   00000058   03E0               B           ??pow_7
   \                     ??pow_6:
   \   0000005A   02AA               ADD         R2,SP,#+8
   \   0000005C   6846               MOV         R0,SP
   \   0000005E   03C8               LDMIA       R0!,{R0,R1}
   \   00000060   03C2               STMIA       R2!,{R0,R1}
   \                     ??pow_7:
   \   00000062   02A8               ADD         R0,SP,#+8
   \   00000064   03C8               LDMIA       R0!,{R0,R1}
   \   00000066   04B0               ADD         SP,#+16
   \   00000068   F0BC               POP         {R4-R7}
   \   0000006A   04BC               POP         {R2}
   \   0000006C   1047               BX          R2                 ;; return
   \   0000006E   C046               NOP         
   \                     ??pow_2:
   \   00000070   0000F03F           DC32        0x3ff00000
      2          
      3          //int radius = 25;//°ë¾¶³õÊ¼»¯
      4          double init_velocity_on_circle = 5.0;
      5          //int num = 0, speed_count = 0;
      6          //double *ps_velocity = NULL;

   \                                 In segment DATA_Z, align 4, align-sorted
      7          int num = 0;
   \                     num:
   \   00000000                      DS8 4
      8          int first_entry_circle = 1;
      9          bool turn_accel_flag = false;
     10          bool circle_finish_flag = false;
     11          int turn_accel=0;
     12          bool Mixture_to_Pointtopoint_flag = false;
     13          //static int circle_count = 0;
     14          

   \                                 In segment CODE, align 4, keep-with-next
     15          void Position::reset()
     16          {
   \                     ??reset:
   \   00000000   30B5               PUSH        {R4,R5,LR}
   \   00000002   021C               MOV         R2,R0
     17              for(int i =0 ; i!=3; ++i) 
   \   00000004   0024               MOV         R4,#+0
   \   00000006   031C               MOV         R3,R0
   \   00000008   A833               ADD         R3,#+168
     18                current_target[i] = current_xyz[i];
   \                     ??reset_3:
   \   0000000A   E000               LSL         R0,R4,#+3
   \   0000000C   1D18               ADD         R5,R3,R0
   \   0000000E   1018               ADD         R0,R2,R0
   \   00000010   03C8               LDMIA       R0!,{R0,R1}
   \   00000012   03C5               STMIA       R5!,{R0,R1}
   \   00000014   641C               ADD         R4,R4,#+1
   \   00000016   032C               CMP         R4,#+3
   \   00000018   F7D1               BNE         ??reset_3
     19              heading = ahrs_theta[2];
   \   0000001A   1833               ADD         R3,#+24
   \   0000001C   ....               LDR         R0,??DataTable1    ;; ahrs_theta + 16
   \   0000001E   03C8               LDMIA       R0!,{R0,R1}
   \   00000020   03C3               STMIA       R3!,{R0,R1}
     20          }
   \   00000022   ....               B           ?Subroutine22

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine22:
   \   00000000   30BC               POP         {R4,R5}
   \   00000002   01BC               POP         {R0}
   \   00000004   0047               BX          R0                 ;; return
     21          

   \                                 In segment CODE, align 4, keep-with-next
     22          void Position::current_target_update(double * next_target)
     23          {
   \                     ??current_target_update:
   \   00000000   30B5               PUSH        {R4,R5,LR}
   \   00000002   021C               MOV         R2,R0
   \   00000004   0B1C               MOV         R3,R1
     24              for(int i=0 ; i!=3 ; ++i)
   \   00000006   0024               MOV         R4,#+0
     25                 current_target[i] = next_target[i];
   \                     ??current_target_update_1:
   \   00000008   E000               LSL         R0,R4,#+3
   \   0000000A   111C               MOV         R1,R2
   \   0000000C   A831               ADD         R1,#+168
   \   0000000E   0D18               ADD         R5,R1,R0
   \   00000010   1818               ADD         R0,R3,R0
   \   00000012   03C8               LDMIA       R0!,{R0,R1}
   \   00000014   03C5               STMIA       R5!,{R0,R1}
   \   00000016   641C               ADD         R4,R4,#+1
   \   00000018   032C               CMP         R4,#+3
   \   0000001A   F5D1               BNE         ??current_target_update_1
     26          }
   \   0000001C                      REQUIRE ?Subroutine22
   \   0000001C                      ;; // Fall through to label ?Subroutine22
     27          
     28          //----------------------------------------
     29          

   \                                 In segment CODE, align 4, keep-with-next
     30          void Trajectory::reset()
     31          {
   \                     ??reset_1:
   \   00000000   F1B5               PUSH        {R0,R4-R7,LR}
   \   00000002   81B0               SUB         SP,#+4
     32          
     33              heli_step = 0;
   \   00000004   9830               ADD         R0,#+152
   \   00000006   0090               STR         R0,[SP, #+0]
   \   00000008   0024               MOV         R4,#+0
   \   0000000A   8464               STR         R4,[R0, #+72]
     34              
     35              end_heading = ahrs_theta[2];
   \   0000000C   019E               LDR         R6,[SP, #+4]
   \   0000000E   1836               ADD         R6,#+24
   \   00000010   ....               LDR         R0,??DataTable1    ;; ahrs_theta + 16
   \   00000012   03C8               LDMIA       R0!,{R0,R1}
   \   00000014   3064               STR         R0,[R6, #+64]
   \   00000016   7164               STR         R1,[R6, #+68]
     36              hover_time = FLY_TIME;
   \   00000018   ....               LDR         R1,??DataTable2    ;; 0x40cf4000
   \   0000001A   B464               STR         R4,[R6, #+72]
   \   0000001C   F164               STR         R1,[R6, #+76]
     37              Isturn = 0;
   \   0000001E   0098               LDR         R0,[SP, #+0]
   \   00000020   C464               STR         R4,[R0, #+76]
     38              num = 1;
   \   00000022   ....               LDR         R0,??DataTable3    ;; num
   \   00000024   0121               MOV         R1,#+1
   \   00000026   0160               STR         R1,[R0, #+0]
     39              
     40              position_t->reset();
   \   00000028   F069               LDR         R0,[R6, #+28]
   \   0000002A   ........           BL          ??reset
     41              target_queue_t->reset();
   \   0000002E   B069               LDR         R0,[R6, #+24]
   \   00000030   ........           _BLF        ??reset_2,??reset??rT
     42              for(int i =0 ; i!= 3 ;  ++i)
   \   00000034   0020               MOV         R0,#+0
   \   00000036   211C               MOV         R1,R4
     43              {
     44                  hover_xyz[i] = position_t->current_xyz[i];
   \                     ??reset_4:
   \   00000038   E500               LSL         R5,R4,#+3
   \   0000003A   321C               MOV         R2,R6
   \   0000003C   5032               ADD         R2,#+80
   \   0000003E   5719               ADD         R7,R2,R5
   \   00000040   F269               LDR         R2,[R6, #+28]
   \   00000042   5219               ADD         R2,R2,R5
   \   00000044   0CCA               LDMIA       R2!,{R2,R3}
   \   00000046   0CC7               STMIA       R7!,{R2,R3}
   \   00000048   083F               SUB         R7,#+8
     45                  next_target[i] = hover_xyz[i]; 
   \   0000004A   321C               MOV         R2,R6
   \   0000004C   2032               ADD         R2,#+32
   \   0000004E   5219               ADD         R2,R2,R5
   \   00000050   9446               MOV         R12,R2
   \   00000052   0CCF               LDMIA       R7!,{R2,R3}
   \   00000054   6746               MOV         R7,R12
   \   00000056   0CC7               STMIA       R7!,{R2,R3}
     46                  com_position[i] = 0.0;
   \   00000058   009A               LDR         R2,[SP, #+0]
   \   0000005A   5219               ADD         R2,R2,R5
   \   0000005C   03C2               STMIA       R2!,{R0,R1}
     47                  com_velocity[i] = 0.0;
   \   0000005E   321C               MOV         R2,R6
   \   00000060   6832               ADD         R2,#+104
   \   00000062   5219               ADD         R2,R2,R5
   \   00000064   03C2               STMIA       R2!,{R0,R1}
     48                  com_pqr[i]      = 0.0;
   \   00000066   009A               LDR         R2,[SP, #+0]
   \   00000068   1832               ADD         R2,#+24
   \   0000006A   5219               ADD         R2,R2,R5
   \   0000006C   03C2               STMIA       R2!,{R0,R1}
     49                  com_theta[i]    = 0.0;
   \   0000006E   009A               LDR         R2,[SP, #+0]
   \   00000070   3032               ADD         R2,#+48
   \   00000072   5219               ADD         R2,R2,R5
   \   00000074   03C2               STMIA       R2!,{R0,R1}
     50                  
     51                  top_speed[i] = 0.0;
   \   00000076   019A               LDR         R2,[SP, #+4]
   \   00000078   5219               ADD         R2,R2,R5
   \   0000007A   03C2               STMIA       R2!,{R0,R1}
     52                  how_long[i] = 0.0;
   \   0000007C   7219               ADD         R2,R6,R5
   \   0000007E   03C2               STMIA       R2!,{R0,R1}
     53              }
   \   00000080   641C               ADD         R4,R4,#+1
   \   00000082   032C               CMP         R4,#+3
   \   00000084   D8D1               BNE         ??reset_4
     54            
     55          }
   \   00000086   ....               B           ?Subroutine23

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine23:
   \   00000000   FCBC               POP         {R2-R7}
   \   00000002   01BC               POP         {R0}
   \   00000004   0047               BX          R0                 ;; return
   \   00000006   C046               NOP         
   \                     ??Subroutine23_0:
   \   00000008   172D4454           DC32        0x54442d17
   \   0000000C   FB21F9BF           DC32        0xbff921fb
   \   00000010   FB21F93F           DC32        0x3ff921fb
   \   00000014   D221337F           DC32        0x7f3321d2
   \   00000018   7CD912C0           DC32        0xc012d97c
   \   0000001C   172D4454           DC32        0x54442d17
     56          
     57          /****************************************************************
     58           *º¯ÊýÃû: ahrs_adjust(double *theta,double *angle_offset)
     59           *
     60           *²ÎÊý: double *thetaÎª½ÃÕýµÄ3¸ö×ËÌ¬½Ç
     61           *		double *angle_offsetÎª²¹³¥½Ç¶È
     62           *      	
     63           *¹¦ÄÜ£º×ËÌ¬½ÇË®Æ½Ãæ½ÃÕý
     64           *				
     65           *·µ»ØÖµ£ºÔÝÎÞ
     66           *
     67           *×÷    Õß£ºÎâÒã±ò
     68           *Íê³ÉÈÕÆÚ: 2013-4-1
     69           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
     70          void ahrs_adjust(double *theta,double *angle_offset)
     71          {
   \                     ??ahrs_adjust:
   \   00000000   F1B5               PUSH        {R0,R4-R7,LR}
   \   00000002   0F1C               MOV         R7,R1
     72          	for (int i = 0;i < 3;i++)
   \   00000004   0026               MOV         R6,#+0
   \   00000006   0024               MOV         R4,#+0
     73          	{	
     74          		angle_offset[i] = angle_offset[i]*C_DEG2RAD;
   \                     ??ahrs_adjust_1:
   \   00000008   E000               LSL         R0,R4,#+3
   \   0000000A   3D18               ADD         R5,R7,R0
   \   0000000C   03CD               LDMIA       R5!,{R0,R1}
   \   0000000E   083D               SUB         R5,#+8
   \   00000010   0B4A               LDR         R2,??ahrs_adjust_2  ;; 0xa2529d39
   \   00000012   0C4B               LDR         R3,??ahrs_adjust_2+0x4  ;; 0x3f91df46
   \   00000014   ........           _BLF        __dMul,??__dMul??rT
   \   00000018   03C5               STMIA       R5!,{R0,R1}
     75          	}
   \   0000001A   641C               ADD         R4,R4,#+1
   \   0000001C   032C               CMP         R4,#+3
   \   0000001E   F3DB               BLT         ??ahrs_adjust_1
     76          	for (int j = 0;j < 3;j++)
     77          	{
     78          		theta[j] -= angle_offset[j];
   \                     ??ahrs_adjust_3:
   \   00000020   F200               LSL         R2,R6,#+3
   \   00000022   0098               LDR         R0,[SP, #+0]
   \   00000024   8418               ADD         R4,R0,R2
   \   00000026   03CC               LDMIA       R4!,{R0,R1}
   \   00000028   083C               SUB         R4,#+8
   \   0000002A   BA18               ADD         R2,R7,R2
   \   0000002C   0CCA               LDMIA       R2!,{R2,R3}
   \   0000002E   ........           _BLF        __dSub,??__dSub??rT
   \   00000032   03C4               STMIA       R4!,{R0,R1}
     79          	}
   \   00000034   761C               ADD         R6,R6,#+1
   \   00000036   032E               CMP         R6,#+3
   \   00000038   F2DB               BLT         ??ahrs_adjust_3
     80          }
   \   0000003A   ........           BL          ?Subroutine24
   \   0000003E   C046               NOP         
   \                     ??ahrs_adjust_2:
   \   00000040   399D52A2           DC32        0xa2529d39
   \   00000044   46DF913F           DC32        0x3f91df46

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine24:
   \   00000000   F8BC               POP         {R3-R7}
   \   00000002   01BC               POP         {R0}
   \   00000004   0047               BX          R0                 ;; return
     81          

   \                                 In segment CODE, align 4, keep-with-next
     82          bool Trajectory::target_update(int trajectory_mod)
     83          {  
   \                     ??target_update:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   051C               MOV         R5,R0
     84              if (trajectory_mod == Point_to_point)
   \   00000004   041C               MOV         R4,R0
   \   00000006   3034               ADD         R4,#+48
   \   00000008   564F               LDR         R7,??target_update_1  ;; first_receive_target
   \   0000000A   0129               CMP         R1,#+1
   \   0000000C   41D1               BNE         ??target_update_2
     85          	{
     86          		if (hover_time <=-1 && (!target_queue_t->is_queue_empty()) || first_receive_target == 1)
   \   0000000E   201C               MOV         R0,R4
   \   00000010   3030               ADD         R0,#+48
   \   00000012   03C8               LDMIA       R0!,{R0,R1}
   \   00000014   0122               MOV         R2,#+1
   \   00000016   D243               MVN         R2,R2              ;; #-2
   \   00000018   534B               LDR         R3,??target_update_1+0x4  ;; 0xbfefffff
   \   0000001A   ........           _BLF        __dLess,??__dLess??rT
   \   0000001E   0028               CMP         R0,#+0
   \   00000020   04D0               BEQ         ??target_update_3
   \   00000022   2068               LDR         R0,[R4, #+0]
   \   00000024   ........           _BLF        ??is_queue_empty,??is_queue_empty??rT
   \   00000028   0028               CMP         R0,#+0
   \   0000002A   02D0               BEQ         ??target_update_4
   \                     ??target_update_3:
   \   0000002C   3868               LDR         R0,[R7, #+0]
   \   0000002E   0128               CMP         R0,#+1
   \   00000030   0BD1               BNE         ??target_update_5
     87              	{
     88                  	if(!target_queue_t->pop_target(next_target))
   \                     ??target_update_4:
   \   00000032   3835               ADD         R5,#+56
   \   00000034   291C               MOV         R1,R5
   \   00000036   2068               LDR         R0,[R4, #+0]
   \   00000038   ........           _BLF        ??pop_target,??pop_target??rT
   \   0000003C   0028               CMP         R0,#+0
   \   0000003E   12D0               BEQ         ??target_update_6
     89                      	return false;
     90          
     91                  	first_receive_target++;
   \                     ??target_update_7:
   \   00000040   3868               LDR         R0,[R7, #+0]
   \   00000042   401C               ADD         R0,R0,#+1
   \   00000044   3860               STR         R0,[R7, #+0]
     92                  	return true;
   \                     ??target_update_8:
   \   00000046   0120               MOV         R0,#+1
   \   00000048   8AE0               B           ??target_update_9
     93              	}
     94          		if (target_queue_t->is_queue_empty() && hover_time <= -2000)
   \                     ??target_update_5:
   \   0000004A   2068               LDR         R0,[R4, #+0]
   \   0000004C   ........           _BLF        ??is_queue_empty,??is_queue_empty??rT
   \   00000050   0028               CMP         R0,#+0
   \   00000052   08D0               BEQ         ??target_update_6
   \   00000054   201C               MOV         R0,R4
   \   00000056   3030               ADD         R0,#+48
   \   00000058   03C8               LDMIA       R0!,{R0,R1}
   \   0000005A   0022               MOV         R2,#+0
   \   0000005C   D243               MVN         R2,R2              ;; #-1
   \   0000005E   434B               LDR         R3,??target_update_1+0x8  ;; 0xc09f3fff
   \   00000060   ........           _BLF        __dLess,??__dLess??rT
   \   00000064   0028               CMP         R0,#+0
   \                     ??target_update_6:
   \   00000066   7AD0               BEQ         ??target_update_10
     95                	//ÐüÍ£Ê±¼ä½áÊø£¬µÈ´ýÁË1·ÖÖÓÄ¿±ê¶ÓÁÐ»¹ÊÇ¿Õ 
     96              	{ 
     97                  	next_target[0] = hover_xyz[0] ;
   \   00000068   221C               MOV         R2,R4
   \   0000006A   0832               ADD         R2,#+8
   \   0000006C   201C               MOV         R0,R4
   \   0000006E   3830               ADD         R0,#+56
   \   00000070   03C8               LDMIA       R0!,{R0,R1}
   \   00000072   03C2               STMIA       R2!,{R0,R1}
     98                  	next_target[1] = hover_xyz[1] ;
   \   00000074   221C               MOV         R2,R4
   \   00000076   1032               ADD         R2,#+16
   \   00000078   206C               LDR         R0,[R4, #+64]
   \   0000007A   616C               LDR         R1,[R4, #+68]
   \   0000007C   03C2               STMIA       R2!,{R0,R1}
     99                  	next_target[2] = hover_xyz[2] ;
   \   0000007E   221C               MOV         R2,R4
   \   00000080   1832               ADD         R2,#+24
   \   00000082   A06C               LDR         R0,[R4, #+72]
   \   00000084   E16C               LDR         R1,[R4, #+76]
   \   00000086   03C2               STMIA       R2!,{R0,R1}
    100                  	hover_time = DEFAULT_HOVER_TIEM ;
   \   00000088   3034               ADD         R4,#+48
   \   0000008A   0020               MOV         R0,#+0
   \   0000008C   ....               LDR         R1,??DataTable4    ;; 0x407c2000
   \   0000008E   03C4               STMIA       R4!,{R0,R1}
    101                  	return true;
   \   00000090   D9E7               B           ??target_update_8
    102              	}
    103          	}
    104          	
    105              if (trajectory_mod == Circle)
   \                     ??target_update_2:
   \   00000092   374E               LDR         R6,??target_update_1+0xC  ;; turn_accel_flag
   \   00000094   0229               CMP         R1,#+2
   \   00000096   2CD1               BNE         ??target_update_11
    106          	{
    107          		if ((!target_queue_t->is_queue_empty()) && first_receive_target == 1)
   \   00000098   2068               LDR         R0,[R4, #+0]
   \   0000009A   ........           _BLF        ??is_queue_empty,??is_queue_empty??rT
   \   0000009E   0028               CMP         R0,#+0
   \   000000A0   0AD1               BNE         ??target_update_12
   \   000000A2   3868               LDR         R0,[R7, #+0]
   \   000000A4   0128               CMP         R0,#+1
   \   000000A6   07D1               BNE         ??target_update_12
    108              	{
    109                  	if(!target_queue_t->pop_target(next_target))
   \   000000A8   3835               ADD         R5,#+56
   \   000000AA   291C               MOV         R1,R5
   \   000000AC   2068               LDR         R0,[R4, #+0]
   \   000000AE   ........           _BLF        ??pop_target,??pop_target??rT
   \   000000B2   0028               CMP         R0,#+0
   \                     ??target_update_13:
   \   000000B4   C4D1               BNE         ??target_update_7
    110                      	return false;
   \   000000B6   52E0               B           ??target_update_10
    111          
    112                  	first_receive_target++;
    113                  	return true;
    114              	}
    115          		if ((!target_queue_t->is_queue_empty()) 
    116          			&& circle_finish_flag == true 
    117          			&& hover_time <=-1 )
   \                     ??target_update_12:
   \   000000B8   2068               LDR         R0,[R4, #+0]
   \   000000BA   ........           _BLF        ??is_queue_empty,??is_queue_empty??rT
   \   000000BE   7178               LDRB        R1,[R6, #+1]
   \   000000C0   0122               MOV         R2,#+1
   \   000000C2   4A40               EOR         R2,R1
   \   000000C4   0243               ORR         R2,R0
   \   000000C6   1206               LSL         R2,R2,#+24
   \   000000C8   49D1               BNE         ??target_update_10
   \   000000CA   201C               MOV         R0,R4
   \   000000CC   3030               ADD         R0,#+48
   \   000000CE   03C8               LDMIA       R0!,{R0,R1}
   \   000000D0   0122               MOV         R2,#+1
   \   000000D2   D243               MVN         R2,R2              ;; #-2
   \   000000D4   244B               LDR         R3,??target_update_1+0x4  ;; 0xbfefffff
   \   000000D6   ........           _BLF        __dLess,??__dLess??rT
   \   000000DA   0028               CMP         R0,#+0
   \   000000DC   3FD0               BEQ         ??target_update_10
    118              	{
    119                  	if(!target_queue_t->pop_target(next_target))
   \   000000DE   3835               ADD         R5,#+56
   \   000000E0   291C               MOV         R1,R5
   \   000000E2   2068               LDR         R0,[R4, #+0]
   \   000000E4   ........           _BLF        ??pop_target,??pop_target??rT
   \   000000E8   0028               CMP         R0,#+0
   \   000000EA   38D0               BEQ         ??target_update_10
    120                      	return false;
    121          
    122                  	circle_finish_flag = false;
   \   000000EC   0020               MOV         R0,#+0
   \   000000EE   7070               STRB        R0,[R6, #+1]
    123                  	return true;
   \   000000F0   A9E7               B           ??target_update_8
    124              	}		
    125          /*		
    126          		if (target_queue_t->is_queue_empty() && hover_time <= -2000)
    127                	//ÐüÍ£Ê±¼ä½áÊø£¬µÈ´ýÁË1·ÖÖÓÄ¿±ê¶ÓÁÐ»¹ÊÇ¿Õ 
    128              	{ 
    129                  	next_target[0] = hover_xyz[0] ;
    130                  	next_target[1] = hover_xyz[1] ;
    131                  	next_target[2] = hover_xyz[2] ;
    132                  	hover_time = DEFAULT_HOVER_TIEM ;
    133                  	return true;
    134              	}
    135          */
    136          	}
    137          	
    138          	if (trajectory_mod == Mixture)
   \                     ??target_update_11:
   \   000000F2   0329               CMP         R1,#+3
   \   000000F4   33D1               BNE         ??target_update_10
   \   000000F6   7078               LDRB        R0,[R6, #+1]
   \   000000F8   0028               CMP         R0,#+0
   \   000000FA   19D0               BEQ         ??target_update_14
    139          	{
    140          		if (circle_finish_flag == true)
    141          		{	
    142          			for (int i=0; i!=5; i++)
   \   000000FC   0022               MOV         R2,#+0
    143          			{
    144          				next_target[i] = next_next_target[i];
   \                     ??target_update_15:
   \   000000FE   2E1C               MOV         R6,R5
   \   00000100   E036               ADD         R6,#+224
   \   00000102   D000               LSL         R0,R2,#+3
   \   00000104   211C               MOV         R1,R4
   \   00000106   0831               ADD         R1,#+8
   \   00000108   0B18               ADD         R3,R1,R0
   \   0000010A   311C               MOV         R1,R6
   \   0000010C   3431               ADD         R1,#+52
   \   0000010E   0818               ADD         R0,R1,R0
   \   00000110   03C8               LDMIA       R0!,{R0,R1}
   \   00000112   03C3               STMIA       R3!,{R0,R1}
    145          			}
   \   00000114   521C               ADD         R2,R2,#+1
   \   00000116   052A               CMP         R2,#+5
   \   00000118   F1D1               BNE         ??target_update_15
    146          			if(!target_queue_t->pop_target(next_next_target))
   \   0000011A   8A20               MOV         R0,#+138
   \   0000011C   4000               LSL         R0,R0,#+1          ;; #+276
   \   0000011E   2918               ADD         R1,R5,R0
   \   00000120   2068               LDR         R0,[R4, #+0]
   \   00000122   ........           _BLF        ??pop_target,??pop_target??rT
   \   00000126   0028               CMP         R0,#+0
   \   00000128   8DD1               BNE         ??target_update_8
    147          			{
    148          				heli_step = 8;
   \   0000012A   0820               MOV         R0,#+8
   \   0000012C   3060               STR         R0,[R6, #+0]
    149          				return false;
   \   0000012E   16E0               B           ??target_update_10
    150          			}
    151          			
    152          			return true;
    153          		}
    154          		if ((!target_queue_t->is_queue_empty()) && first_receive_target == 1)
   \                     ??target_update_14:
   \   00000130   2068               LDR         R0,[R4, #+0]
   \   00000132   ........           _BLF        ??is_queue_empty,??is_queue_empty??rT
   \   00000136   0028               CMP         R0,#+0
   \   00000138   11D1               BNE         ??target_update_10
   \   0000013A   3868               LDR         R0,[R7, #+0]
   \   0000013C   0128               CMP         R0,#+1
   \   0000013E   0ED1               BNE         ??target_update_10
    155          		{
    156          			if(!target_queue_t->pop_target(next_target))
   \   00000140   291C               MOV         R1,R5
   \   00000142   3831               ADD         R1,#+56
   \   00000144   2068               LDR         R0,[R4, #+0]
   \   00000146   ........           _BLF        ??pop_target,??pop_target??rT
   \   0000014A   0028               CMP         R0,#+0
   \   0000014C   07D0               BEQ         ??target_update_10
    157                      	return false;
    158          			
    159          			if(!target_queue_t->pop_target(next_next_target))
   \   0000014E   8A20               MOV         R0,#+138
   \   00000150   4000               LSL         R0,R0,#+1          ;; #+276
   \   00000152   2918               ADD         R1,R5,R0
   \   00000154   2068               LDR         R0,[R4, #+0]
   \   00000156   ........           _BLF        ??pop_target,??pop_target??rT
   \   0000015A   0028               CMP         R0,#+0
   \   0000015C   AAD1               BNE         ??target_update_13
    160          				return false;
    161          			
    162          			first_receive_target++;
    163          			return true;
    164          		}
    165          	}
    166          	
    167          
    168          	
    169              return false;
   \                     ??target_update_10:
   \   0000015E   0020               MOV         R0,#+0
   \                     ??target_update_9:
   \   00000160   ........           BL          ?Subroutine25
   \                     ??target_update_1:
   \   00000164   ........           DC32        first_receive_target
   \   00000168   FFFFEFBF           DC32        0xbfefffff
   \   0000016C   FF3F9FC0           DC32        0xc09f3fff
   \   00000170   ........           DC32        turn_accel_flag
    170          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine25:
   \   00000000   F0BC               POP         {R4-R7}
   \   00000002   02BC               POP         {R1}
   \   00000004   0847               BX          R1                 ;; return
    171          
    172          //  ÅÐ¶ÏÄ¿±êµãÔÚÏÖÔÚ·É»úµãµÄÊ²Ã´Î»ÖÃ£¬È·¶¨×ªÍ·Ä¿±ê½Ç¶È--end_headingºÍ×ªÍ··½Ïò--ISturn 
    173          // end_heading_point ·É»ú½«Òª×ª¶¯µ½µÄ½Ç¶È£»
    174          //n_target ÏÂÒ»¸öÄ¿±êµã£»current_heading µ±Ç°·É»ú¸ø¶¨º½Ïò½Ç;current_xyz µ±Ç°Î»ÖÃ

   \                                 In segment CODE, align 4, keep-with-next
    175          void Trajectory::turn_heading(double * end_heading_point)
    176          {
   \                     ??turn_heading:
   \   00000000   F3B5               PUSH        {R0,R1,R4-R7,LR}
    177             double temp = atan2(next_target[0]-position_t->current_xyz[0], 
    178                                 next_target[1]-position_t->current_xyz[1]);
   \   00000002   061C               MOV         R6,R0
   \   00000004   3436               ADD         R6,#+52
   \   00000006   3768               LDR         R7,[R6, #+0]
   \   00000008   301C               MOV         R0,R6
   \   0000000A   0C30               ADD         R0,#+12
   \   0000000C   03C8               LDMIA       R0!,{R0,R1}
   \   0000000E   3A1C               MOV         R2,R7
   \   00000010   0832               ADD         R2,#+8
   \   00000012   0CCA               LDMIA       R2!,{R2,R3}
   \   00000014   ........           _BLF        __dSub,??__dSub??rT
   \   00000018   041C               MOV         R4,R0
   \   0000001A   0D1C               MOV         R5,R1
   \   0000001C   361D               ADD         R6,R6,#+4
   \   0000001E   03CE               LDMIA       R6!,{R0,R1}
   \   00000020   0CCF               LDMIA       R7!,{R2,R3}
   \   00000022   083F               SUB         R7,#+8
   \   00000024   ........           _BLF        __dSub,??__dSub??rT
   \   00000028   221C               MOV         R2,R4
   \   0000002A   2B1C               MOV         R3,R5
   \   0000002C   ........           _BLF        atan2,??atan2??rT
   \   00000030   041C               MOV         R4,R0
   \   00000032   0D1C               MOV         R5,R1
    179             // atan2¼ÆËãµÄ½Ç¶ÈÊÇÆÕÍ¨×ø±êÏµXÖáÏò¼Ð½Ç£¬¶øend_headingÊÇ¶ÔÓÚNED×ø±êÏµµÄ¼Ð½Ç
    180          	if ( temp > -C_PI /2.0 )
   \   00000034   ....               LDR         R2,??Subroutine23_0  ;; 0x54442d17
   \   00000036   ....               LDR         R3,??Subroutine23_0+0x4  ;; 0xbff921fb
   \   00000038   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   0000003C   0028               CMP         R0,#+0
   \   0000003E   02D0               BEQ         ??turn_heading_1
    181                	*end_heading_point = C_PI /2.0 - temp ;
   \   00000040   ....               LDR         R0,??DataTable10   ;; 0x54442d18
   \   00000042   ....               LDR         R1,??Subroutine23_0+0x8  ;; 0x3ff921fb
   \   00000044   01E0               B           ??turn_heading_2
    182              else 
    183                	*end_heading_point = - 3.0 * C_PI /2.0 - temp ;
   \                     ??turn_heading_1:
   \   00000046   ....               LDR         R0,??Subroutine23_0+0xC  ;; 0x7f3321d2
   \   00000048   ....               LDR         R1,??Subroutine23_0+0x10  ;; 0xc012d97c
   \                     ??turn_heading_2:
   \   0000004A   221C               MOV         R2,R4
   \   0000004C   2B1C               MOV         R3,R5
   \   0000004E   ........           _BLF        __dSub,??__dSub??rT
   \   00000052   019A               LDR         R2,[SP, #+4]
   \   00000054   03C2               STMIA       R2!,{R0,R1}
    184          	
    185             	if ( *end_heading_point - position_t->heading > C_PI )
   \   00000056   C037               ADD         R7,#+192
   \   00000058   3D1C               MOV         R5,R7
   \   0000005A   009C               LDR         R4,[SP, #+0]
   \   0000005C   E434               ADD         R4,#+228
   \   0000005E   0CCD               LDMIA       R5!,{R2,R3}
   \   00000060   083D               SUB         R5,#+8
   \   00000062   ........           _BLF        __dSub,??__dSub??rT
   \   00000066   ....               LDR         R2,??DataTable6    ;; 0x54442d19
   \   00000068   ....               LDR         R3,??DataTable11   ;; 0x400921fb
   \   0000006A   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   0000006E   0028               CMP         R0,#+0
   \   00000070   01D0               BEQ         ??turn_heading_3
    186          	{   
    187                Isturn = 1;     //×ó×ª
   \   00000072   0120               MOV         R0,#+1
   \   00000074   41E0               B           ??turn_heading_4
    188          	  return;
    189          	}
    190             	if ( *end_heading_point - position_t->heading < -C_PI )
   \                     ??turn_heading_3:
   \   00000076   0198               LDR         R0,[SP, #+4]
   \   00000078   C0C8               LDMIA       R0!,{R6,R7}
   \   0000007A   301C               MOV         R0,R6
   \   0000007C   391C               MOV         R1,R7
   \   0000007E   0CCD               LDMIA       R5!,{R2,R3}
   \   00000080   083D               SUB         R5,#+8
   \   00000082   ........           _BLF        __dSub,??__dSub??rT
   \   00000086   ....               LDR         R2,??DataTable10   ;; 0x54442d18
   \   00000088   ....               LDR         R3,??DataTable12   ;; 0xc00921fb
   \   0000008A   ........           _BLF        __dLess,??__dLess??rT
   \   0000008E   0028               CMP         R0,#+0
   \   00000090   01D0               BEQ         ??turn_heading_5
    191          	{
    192                Isturn = 2;     //ÓÒ×ª
   \   00000092   0220               MOV         R0,#+2
   \   00000094   31E0               B           ??turn_heading_4
    193          	  return;
    194          	}
    195             	if (*end_heading_point - position_t->heading > 0.00 
    196          	   	&& *end_heading_point - position_t->heading < C_PI)
   \                     ??turn_heading_5:
   \   00000096   301C               MOV         R0,R6
   \   00000098   391C               MOV         R1,R7
   \   0000009A   0CCD               LDMIA       R5!,{R2,R3}
   \   0000009C   083D               SUB         R5,#+8
   \   0000009E   ........           _BLF        __dSub,??__dSub??rT
   \   000000A2   0122               MOV         R2,#+1
   \   000000A4   0023               MOV         R3,#+0
   \   000000A6   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   000000AA   0028               CMP         R0,#+0
   \   000000AC   0DD0               BEQ         ??turn_heading_6
   \   000000AE   301C               MOV         R0,R6
   \   000000B0   391C               MOV         R1,R7
   \   000000B2   0CCD               LDMIA       R5!,{R2,R3}
   \   000000B4   083D               SUB         R5,#+8
   \   000000B6   ........           _BLF        __dSub,??__dSub??rT
   \   000000BA   ....               LDR         R2,??DataTable10   ;; 0x54442d18
   \   000000BC   ....               LDR         R3,??DataTable11   ;; 0x400921fb
   \   000000BE   ........           _BLF        __dLess,??__dLess??rT
   \   000000C2   0028               CMP         R0,#+0
   \   000000C4   01D0               BEQ         ??turn_heading_6
    197          	{
    198                Isturn = 3;     //ÓÒ×ª
   \   000000C6   0320               MOV         R0,#+3
   \   000000C8   17E0               B           ??turn_heading_4
    199          	  return;
    200          	}
    201             	if (*end_heading_point - position_t->heading < 0.00 
    202          		&& *end_heading_point - position_t->heading > -C_PI)
   \                     ??turn_heading_6:
   \   000000CA   301C               MOV         R0,R6
   \   000000CC   391C               MOV         R1,R7
   \   000000CE   0CCD               LDMIA       R5!,{R2,R3}
   \   000000D0   083D               SUB         R5,#+8
   \   000000D2   ........           _BLF        __dSub,??__dSub??rT
   \   000000D6   0022               MOV         R2,#+0
   \   000000D8   0023               MOV         R3,#+0
   \   000000DA   ........           _BLF        __dLess,??__dLess??rT
   \   000000DE   0028               CMP         R0,#+0
   \   000000E0   0CD0               BEQ         ??turn_heading_7
   \   000000E2   301C               MOV         R0,R6
   \   000000E4   391C               MOV         R1,R7
   \   000000E6   0CCD               LDMIA       R5!,{R2,R3}
   \   000000E8   ........           _BLF        __dSub,??__dSub??rT
   \   000000EC   ....               LDR         R2,??Subroutine23_0+0x14  ;; 0x54442d17
   \   000000EE   ....               LDR         R3,??DataTable12   ;; 0xc00921fb
   \   000000F0   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   000000F4   0028               CMP         R0,#+0
   \   000000F6   01D0               BEQ         ??turn_heading_7
    203          	{
    204                Isturn = 4;    //×ó×ª
   \   000000F8   0420               MOV         R0,#+4
   \                     ??turn_heading_4:
   \   000000FA   2060               STR         R0,[R4, #+0]
    205          	  return;
   \                     ??turn_heading_7:
   \   000000FC                      REQUIRE ?Subroutine23
   \   000000FC                      ;; // Fall through to label ?Subroutine23
    206          	}
    207          }
    208          //--------------------------------syc

   \                                 In segment CODE, align 4, keep-with-next
    209          void Trajectory::distance_calculate(int trajectory_mod)
    210          {
   \                     ??distance_calculate:
   \   00000000   F1B5               PUSH        {R0,R4-R7,LR}
   \   00000002   89B0               SUB         SP,#+36
    211               if (trajectory_mod == Point_to_point || trajectory_mod == Circle)
   \   00000004   041C               MOV         R4,R0
   \   00000006   1834               ADD         R4,#+24
   \   00000008   0129               CMP         R1,#+1
   \   0000000A   01D0               BEQ         ??distance_calculate_1
   \   0000000C   0229               CMP         R1,#+2
   \   0000000E   3BD1               BNE         ??distance_calculate_2
    212          	 {
    213          	 	how_long[0] =sqrt((position_t->current_xyz[0]-next_target[0])*(position_t->current_xyz[0]-next_target[0]) 
    214                                + (position_t->current_xyz[1]-next_target[1])*(position_t->current_xyz[1]-next_target[1]));      
   \                     ??distance_calculate_1:
   \   00000010   E069               LDR         R0,[R4, #+28]
   \   00000012   0830               ADD         R0,#+8
   \   00000014   03C8               LDMIA       R0!,{R0,R1}
   \   00000016   221C               MOV         R2,R4
   \   00000018   2832               ADD         R2,#+40
   \   0000001A   0CCA               LDMIA       R2!,{R2,R3}
   \   0000001C   ........           _BLF        __dSub,??__dSub??rT
   \   00000020   061C               MOV         R6,R0
   \   00000022   0F1C               MOV         R7,R1
   \   00000024   E069               LDR         R0,[R4, #+28]
   \   00000026   0830               ADD         R0,#+8
   \   00000028   03C8               LDMIA       R0!,{R0,R1}
   \   0000002A   221C               MOV         R2,R4
   \   0000002C   2832               ADD         R2,#+40
   \   0000002E   0CCA               LDMIA       R2!,{R2,R3}
   \   00000030   ........           _BLF        __dSub,??__dSub??rT
   \   00000034   321C               MOV         R2,R6
   \   00000036   3B1C               MOV         R3,R7
   \   00000038   ........           _BLF        __dMul,??__dMul??rT
   \   0000003C   03B4               PUSH        {R0,R1}
   \   0000003E   E069               LDR         R0,[R4, #+28]
   \   00000040   03C8               LDMIA       R0!,{R0,R1}
   \   00000042   221C               MOV         R2,R4
   \   00000044   2032               ADD         R2,#+32
   \   00000046   0CCA               LDMIA       R2!,{R2,R3}
   \   00000048   ........           _BLF        __dSub,??__dSub??rT
   \   0000004C   061C               MOV         R6,R0
   \   0000004E   0F1C               MOV         R7,R1
   \   00000050   E069               LDR         R0,[R4, #+28]
   \   00000052   03C8               LDMIA       R0!,{R0,R1}
   \   00000054   221C               MOV         R2,R4
   \   00000056   2032               ADD         R2,#+32
   \   00000058   0CCA               LDMIA       R2!,{R2,R3}
   \   0000005A   ........           _BLF        __dSub,??__dSub??rT
   \   0000005E   321C               MOV         R2,R6
   \   00000060   3B1C               MOV         R3,R7
   \   00000062   ........           _BLF        __dMul,??__dMul??rT
   \   00000066   0CBC               POP         {R2,R3}
   \   00000068   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000006C   ........           _BLF        sqrt,??sqrt??rT
   \   00000070   03C4               STMIA       R4!,{R0,R1}
   \   00000072   083C               SUB         R4,#+8
    215               	how_long[2] = hover_xyz[2]-next_target[2];
   \   00000074   251C               MOV         R5,R4
   \   00000076   1035               ADD         R5,#+16
   \   00000078   206E               LDR         R0,[R4, #+96]
   \   0000007A   616E               LDR         R1,[R4, #+100]
   \   0000007C   3034               ADD         R4,#+48
   \   0000007E   0CCC               LDMIA       R4!,{R2,R3}
   \   00000080   ........           _BLF        __dSub,??__dSub??rT
   \   00000084   03C5               STMIA       R5!,{R0,R1}
    216          		return;
   \                     ??distance_calculate_3:
   \   00000086   AAE1               B           ??distance_calculate_4
    217          	 }
    218          	 if (trajectory_mod == Mixture)
   \                     ??distance_calculate_2:
   \   00000088   0329               CMP         R1,#+3
   \   0000008A   FCD1               BNE         ??distance_calculate_3
    219          	 {
    220          	 /*Á½¸öÏòÁ¿v1(x1, y1)ºÍv2(x2, y2)µÄÍâ»ýv1¡Áv2=y1x2-x1y2¡£
    221            	Èç¹ûÓÉv1µ½v2ÊÇË³Ê±Õë×ª¶¯£¬Íâ»ýÎªÕý£¬·´Ö®Îª¸º¡£
    222            	Îª0±íÊ¾¶þÕß·½ÏòÏàÍ¬£¨Æ½ÐÐ£©¡£*/
    223          		double cross_product = (next_target[0]-position_t->current_xyz[0])*(next_next_target[1]-position_t->current_xyz[1])
    224          							   - (next_target[1]-position_t->current_xyz[1])*(next_next_target[0]-position_t->current_xyz[0]);
   \   0000008C   E030               ADD         R0,#+224
   \   0000008E   0090               STR         R0,[SP, #+0]
   \   00000090   E069               LDR         R0,[R4, #+28]
   \   00000092   0830               ADD         R0,#+8
   \   00000094   03C8               LDMIA       R0!,{R0,R1}
   \   00000096   221C               MOV         R2,R4
   \   00000098   2832               ADD         R2,#+40
   \   0000009A   0CCA               LDMIA       R2!,{R2,R3}
   \   0000009C   ........           _BLF        __dSub,??__dSub??rT
   \   000000A0   061C               MOV         R6,R0
   \   000000A2   0F1C               MOV         R7,R1
   \   000000A4   0098               LDR         R0,[SP, #+0]
   \   000000A6   3430               ADD         R0,#+52
   \   000000A8   03C8               LDMIA       R0!,{R0,R1}
   \   000000AA   E269               LDR         R2,[R4, #+28]
   \   000000AC   0CCA               LDMIA       R2!,{R2,R3}
   \   000000AE   ........           _BLF        __dSub,??__dSub??rT
   \   000000B2   321C               MOV         R2,R6
   \   000000B4   3B1C               MOV         R3,R7
   \   000000B6   ........           _BLF        __dMul,??__dMul??rT
   \   000000BA   03B4               PUSH        {R0,R1}
   \   000000BC   0298               LDR         R0,[SP, #+8]
   \   000000BE   3C30               ADD         R0,#+60
   \   000000C0   03C8               LDMIA       R0!,{R0,R1}
   \   000000C2   E269               LDR         R2,[R4, #+28]
   \   000000C4   0832               ADD         R2,#+8
   \   000000C6   0CCA               LDMIA       R2!,{R2,R3}
   \   000000C8   ........           _BLF        __dSub,??__dSub??rT
   \   000000CC   061C               MOV         R6,R0
   \   000000CE   0F1C               MOV         R7,R1
   \   000000D0   201C               MOV         R0,R4
   \   000000D2   2030               ADD         R0,#+32
   \   000000D4   03C8               LDMIA       R0!,{R0,R1}
   \   000000D6   E269               LDR         R2,[R4, #+28]
   \   000000D8   0CCA               LDMIA       R2!,{R2,R3}
   \   000000DA   ........           _BLF        __dSub,??__dSub??rT
   \   000000DE   321C               MOV         R2,R6
   \   000000E0   3B1C               MOV         R3,R7
   \   000000E2   ........           _BLF        __dMul,??__dMul??rT
   \   000000E6   0CBC               POP         {R2,R3}
   \   000000E8   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000EC   061C               MOV         R6,R0
   \   000000EE   0F1C               MOV         R7,R1
    225          		if (cross_product == 0)
   \   000000F0   0020               MOV         R0,#+0
   \   000000F2   0021               MOV         R1,#+0
   \   000000F4   321C               MOV         R2,R6
   \   000000F6   3B1C               MOV         R3,R7
   \   000000F8   ........           _BLF        __dEqual,??__dEqual??rT
   \   000000FC   0028               CMP         R0,#+0
   \   000000FE   19D0               BEQ         ??distance_calculate_5
    226          		{
    227          			for (int i=0; i!=5; i++)
   \   00000100   0022               MOV         R2,#+0
    228          			{
    229          				next_target[i] = next_next_target[i];
   \                     ??distance_calculate_6:
   \   00000102   D000               LSL         R0,R2,#+3
   \   00000104   211C               MOV         R1,R4
   \   00000106   2031               ADD         R1,#+32
   \   00000108   0B18               ADD         R3,R1,R0
   \   0000010A   0099               LDR         R1,[SP, #+0]
   \   0000010C   3431               ADD         R1,#+52
   \   0000010E   0818               ADD         R0,R1,R0
   \   00000110   03C8               LDMIA       R0!,{R0,R1}
   \   00000112   03C3               STMIA       R3!,{R0,R1}
    230          			}
   \   00000114   521C               ADD         R2,R2,#+1
   \   00000116   052A               CMP         R2,#+5
   \   00000118   F3D1               BNE         ??distance_calculate_6
    231          			if(!target_queue_t->pop_target(next_next_target))
   \   0000011A   8A20               MOV         R0,#+138
   \   0000011C   4000               LSL         R0,R0,#+1          ;; #+276
   \   0000011E   0999               LDR         R1,[SP, #+36]
   \   00000120   0918               ADD         R1,R1,R0
   \   00000122   A069               LDR         R0,[R4, #+24]
   \   00000124   ........           _BLF        ??pop_target,??pop_target??rT
   \   00000128   0028               CMP         R0,#+0
   \   0000012A   10D1               BNE         ??distance_calculate_7
    232          			{
    233          				heli_step = 8;
   \   0000012C   0098               LDR         R0,[SP, #+0]
   \   0000012E   0821               MOV         R1,#+8
   \   00000130   0160               STR         R1,[R0, #+0]
    234          				return;
   \   00000132   54E1               B           ??distance_calculate_4
    235          			}
    236          		}
    237          		else 
    238          		{
    239          			if (cross_product < 0)
   \                     ??distance_calculate_5:
   \   00000134   301C               MOV         R0,R6
   \   00000136   391C               MOV         R1,R7
   \   00000138   0022               MOV         R2,#+0
   \   0000013A   0023               MOV         R3,#+0
   \   0000013C   ........           _BLF        __dLess,??__dLess??rT
   \   00000140   0028               CMP         R0,#+0
   \   00000142   0098               LDR         R0,[SP, #+0]
   \   00000144   01D0               BEQ         ??distance_calculate_8
    240          			{
    241          				circle_turn = 2;	//Ô²»¡Íù×ó£¬ÄæÊ±Õë×ª
   \   00000146   0221               MOV         R1,#+2
   \   00000148   00E0               B           ??distance_calculate_9
    242          			}
    243          			else
    244          			{
    245          				circle_turn = 1;	//Ô²»¡ÍùÓÒ£¬Ë³Ê±Õë×ª
   \                     ??distance_calculate_8:
   \   0000014A   0121               MOV         R1,#+1
   \                     ??distance_calculate_9:
   \   0000014C   4165               STR         R1,[R0, #+84]
    246          			}
    247          		}
    248          			
    249          		how_long[0] = sqrt((position_t->current_xyz[0]-next_target[0])*(position_t->current_xyz[0]-next_target[0]) 
    250                                + (position_t->current_xyz[1]-next_target[1])*(position_t->current_xyz[1]-next_target[1]));
   \                     ??distance_calculate_7:
   \   0000014E   E069               LDR         R0,[R4, #+28]
   \   00000150   0830               ADD         R0,#+8
   \   00000152   03C8               LDMIA       R0!,{R0,R1}
   \   00000154   221C               MOV         R2,R4
   \   00000156   2832               ADD         R2,#+40
   \   00000158   0CCA               LDMIA       R2!,{R2,R3}
   \   0000015A   ........           _BLF        __dSub,??__dSub??rT
   \   0000015E   061C               MOV         R6,R0
   \   00000160   0F1C               MOV         R7,R1
   \   00000162   E069               LDR         R0,[R4, #+28]
   \   00000164   0830               ADD         R0,#+8
   \   00000166   03C8               LDMIA       R0!,{R0,R1}
   \   00000168   221C               MOV         R2,R4
   \   0000016A   2832               ADD         R2,#+40
   \   0000016C   0CCA               LDMIA       R2!,{R2,R3}
   \   0000016E   ........           _BLF        __dSub,??__dSub??rT
   \   00000172   321C               MOV         R2,R6
   \   00000174   3B1C               MOV         R3,R7
   \   00000176   ........           _BLF        __dMul,??__dMul??rT
   \   0000017A   03B4               PUSH        {R0,R1}
   \   0000017C   E069               LDR         R0,[R4, #+28]
   \   0000017E   03C8               LDMIA       R0!,{R0,R1}
   \   00000180   221C               MOV         R2,R4
   \   00000182   2032               ADD         R2,#+32
   \   00000184   0CCA               LDMIA       R2!,{R2,R3}
   \   00000186   ........           _BLF        __dSub,??__dSub??rT
   \   0000018A   061C               MOV         R6,R0
   \   0000018C   0F1C               MOV         R7,R1
   \   0000018E   E069               LDR         R0,[R4, #+28]
   \   00000190   03C8               LDMIA       R0!,{R0,R1}
   \   00000192   221C               MOV         R2,R4
   \   00000194   2032               ADD         R2,#+32
   \   00000196   0CCA               LDMIA       R2!,{R2,R3}
   \   00000198   ........           _BLF        __dSub,??__dSub??rT
   \   0000019C   321C               MOV         R2,R6
   \   0000019E   3B1C               MOV         R3,R7
   \   000001A0   ........           _BLF        __dMul,??__dMul??rT
   \   000001A4   0CBC               POP         {R2,R3}
   \   000001A6   ........           _BLF        __dAdd,??__dAdd??rT
   \   000001AA   ........           _BLF        sqrt,??sqrt??rT
   \   000001AE   03C4               STMIA       R4!,{R0,R1}
   \   000001B0   083C               SUB         R4,#+8
    251          		how_long[2] = hover_xyz[2]-next_target[2];
   \   000001B2   251C               MOV         R5,R4
   \   000001B4   1035               ADD         R5,#+16
   \   000001B6   206E               LDR         R0,[R4, #+96]
   \   000001B8   616E               LDR         R1,[R4, #+100]
   \   000001BA   221C               MOV         R2,R4
   \   000001BC   3032               ADD         R2,#+48
   \   000001BE   0CCA               LDMIA       R2!,{R2,R3}
   \   000001C0   ........           _BLF        __dSub,??__dSub??rT
   \   000001C4   03C5               STMIA       R5!,{R0,R1}
    252          			 
    253          		double b = sqrt((next_target[0]-next_next_target[0])*(next_target[0]-next_next_target[0]) 
    254                                	+ (next_target[1]-next_next_target[1])*(next_target[1]-next_next_target[1]));
   \   000001C6   201C               MOV         R0,R4
   \   000001C8   2830               ADD         R0,#+40
   \   000001CA   03C8               LDMIA       R0!,{R0,R1}
   \   000001CC   009A               LDR         R2,[SP, #+0]
   \   000001CE   3C32               ADD         R2,#+60
   \   000001D0   0CCA               LDMIA       R2!,{R2,R3}
   \   000001D2   ........           _BLF        __dSub,??__dSub??rT
   \   000001D6   061C               MOV         R6,R0
   \   000001D8   0F1C               MOV         R7,R1
   \   000001DA   201C               MOV         R0,R4
   \   000001DC   2830               ADD         R0,#+40
   \   000001DE   03C8               LDMIA       R0!,{R0,R1}
   \   000001E0   009A               LDR         R2,[SP, #+0]
   \   000001E2   3C32               ADD         R2,#+60
   \   000001E4   0CCA               LDMIA       R2!,{R2,R3}
   \   000001E6   ........           _BLF        __dSub,??__dSub??rT
   \   000001EA   321C               MOV         R2,R6
   \   000001EC   3B1C               MOV         R3,R7
   \   000001EE   ........           _BLF        __dMul,??__dMul??rT
   \   000001F2   03B4               PUSH        {R0,R1}
   \   000001F4   201C               MOV         R0,R4
   \   000001F6   2030               ADD         R0,#+32
   \   000001F8   03C8               LDMIA       R0!,{R0,R1}
   \   000001FA   029A               LDR         R2,[SP, #+8]
   \   000001FC   3432               ADD         R2,#+52
   \   000001FE   0CCA               LDMIA       R2!,{R2,R3}
   \   00000200   ........           _BLF        __dSub,??__dSub??rT
   \   00000204   061C               MOV         R6,R0
   \   00000206   0F1C               MOV         R7,R1
   \   00000208   201C               MOV         R0,R4
   \   0000020A   2030               ADD         R0,#+32
   \   0000020C   03C8               LDMIA       R0!,{R0,R1}
   \   0000020E   029A               LDR         R2,[SP, #+8]
   \   00000210   3432               ADD         R2,#+52
   \   00000212   0CCA               LDMIA       R2!,{R2,R3}
   \   00000214   ........           _BLF        __dSub,??__dSub??rT
   \   00000218   321C               MOV         R2,R6
   \   0000021A   3B1C               MOV         R3,R7
   \   0000021C   ........           _BLF        __dMul,??__dMul??rT
   \   00000220   0CBC               POP         {R2,R3}
   \   00000222   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000226   ........           _BLF        sqrt,??sqrt??rT
   \   0000022A   01AA               ADD         R2,SP,#+4
   \   0000022C   03C2               STMIA       R2!,{R0,R1}
    255          		double c = sqrt((position_t->current_xyz[0]-next_next_target[0])*(position_t->current_xyz[0]-next_next_target[0]) 
    256                                	+ (position_t->current_xyz[1]-next_next_target[1])*(position_t->current_xyz[1]-next_next_target[1]));
   \   0000022E   E069               LDR         R0,[R4, #+28]
   \   00000230   0830               ADD         R0,#+8
   \   00000232   03C8               LDMIA       R0!,{R0,R1}
   \   00000234   009A               LDR         R2,[SP, #+0]
   \   00000236   3C32               ADD         R2,#+60
   \   00000238   0CCA               LDMIA       R2!,{R2,R3}
   \   0000023A   ........           _BLF        __dSub,??__dSub??rT
   \   0000023E   061C               MOV         R6,R0
   \   00000240   0F1C               MOV         R7,R1
   \   00000242   E069               LDR         R0,[R4, #+28]
   \   00000244   0830               ADD         R0,#+8
   \   00000246   03C8               LDMIA       R0!,{R0,R1}
   \   00000248   009A               LDR         R2,[SP, #+0]
   \   0000024A   3C32               ADD         R2,#+60
   \   0000024C   0CCA               LDMIA       R2!,{R2,R3}
   \   0000024E   ........           _BLF        __dSub,??__dSub??rT
   \   00000252   321C               MOV         R2,R6
   \   00000254   3B1C               MOV         R3,R7
   \   00000256   ........           _BLF        __dMul,??__dMul??rT
   \   0000025A   03B4               PUSH        {R0,R1}
   \   0000025C   E069               LDR         R0,[R4, #+28]
   \   0000025E   03C8               LDMIA       R0!,{R0,R1}
   \   00000260   029A               LDR         R2,[SP, #+8]
   \   00000262   3432               ADD         R2,#+52
   \   00000264   0CCA               LDMIA       R2!,{R2,R3}
   \   00000266   ........           _BLF        __dSub,??__dSub??rT
   \   0000026A   061C               MOV         R6,R0
   \   0000026C   0F1C               MOV         R7,R1
   \   0000026E   E069               LDR         R0,[R4, #+28]
   \   00000270   03C8               LDMIA       R0!,{R0,R1}
   \   00000272   029A               LDR         R2,[SP, #+8]
   \   00000274   3432               ADD         R2,#+52
   \   00000276   0CCA               LDMIA       R2!,{R2,R3}
   \   00000278   ........           _BLF        __dSub,??__dSub??rT
   \   0000027C   321C               MOV         R2,R6
   \   0000027E   3B1C               MOV         R3,R7
   \   00000280   ........           _BLF        __dMul,??__dMul??rT
   \   00000284   0CBC               POP         {R2,R3}
   \   00000286   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000028A   ........           _BLF        sqrt,??sqrt??rT
   \   0000028E   061C               MOV         R6,R0
   \   00000290   0F1C               MOV         R7,R1
   \   00000292   009A               LDR         R2,[SP, #+0]
   \   00000294   1C32               ADD         R2,#+28
   \   00000296   5348               LDR         R0,??distance_calculate_10  ;; turn_accel_flag + 20
   \   00000298   03C8               LDMIA       R0!,{R0,R1}
   \   0000029A   03C2               STMIA       R2!,{R0,R1}
    257          		
    258          		circle_velocity = init_velocity_on_circle;
    259          		sector_angle = acos((pow(how_long[0],2)+pow(b,2)-pow(c,2)) / 2*abs(how_long[0]*b));
   \   0000029C   0222               MOV         R2,#+2
   \   0000029E   03CC               LDMIA       R4!,{R0,R1}
   \   000002A0   083C               SUB         R4,#+8
   \   000002A2   ........           _BLF        ??pow,??pow??rT
   \   000002A6   03AA               ADD         R2,SP,#+12
   \   000002A8   03C2               STMIA       R2!,{R0,R1}
   \   000002AA   0222               MOV         R2,#+2
   \   000002AC   01A8               ADD         R0,SP,#+4
   \   000002AE   03C8               LDMIA       R0!,{R0,R1}
   \   000002B0   ........           _BLF        ??pow,??pow??rT
   \   000002B4   05AA               ADD         R2,SP,#+20
   \   000002B6   03C2               STMIA       R2!,{R0,R1}
   \   000002B8   0222               MOV         R2,#+2
   \   000002BA   301C               MOV         R0,R6
   \   000002BC   391C               MOV         R1,R7
   \   000002BE   ........           _BLF        ??pow,??pow??rT
   \   000002C2   07AA               ADD         R2,SP,#+28
   \   000002C4   03C2               STMIA       R2!,{R0,R1}
   \   000002C6   0998               LDR         R0,[SP, #+36]
   \   000002C8   1830               ADD         R0,#+24
   \   000002CA   0CC8               LDMIA       R0!,{R2,R3}
   \   000002CC   01A8               ADD         R0,SP,#+4
   \   000002CE   03C8               LDMIA       R0!,{R0,R1}
   \   000002D0   ........           _BLF        __dMul,??__dMul??rT
   \   000002D4   061C               MOV         R6,R0
   \   000002D6   4F00               LSL         R7,R1,#+1
   \   000002D8   7F08               LSR         R7,R7,#+1
   \   000002DA   03A8               ADD         R0,SP,#+12
   \   000002DC   0CC8               LDMIA       R0!,{R2,R3}
   \   000002DE   03C8               LDMIA       R0!,{R0,R1}
   \   000002E0   ........           _BLF        __dAdd,??__dAdd??rT
   \   000002E4   07AA               ADD         R2,SP,#+28
   \   000002E6   0CCA               LDMIA       R2!,{R2,R3}
   \   000002E8   ........           _BLF        __dSub,??__dSub??rT
   \   000002EC   0022               MOV         R2,#+0
   \   000002EE   8023               MOV         R3,#+128
   \   000002F0   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   000002F2   ........           _BLF        __dDiv,??__dDiv??rT
   \   000002F6   321C               MOV         R2,R6
   \   000002F8   3B1C               MOV         R3,R7
   \   000002FA   ........           _BLF        __dMul,??__dMul??rT
   \   000002FE   ........           _BLF        acos,??acos??rT
   \   00000302   009A               LDR         R2,[SP, #+0]
   \   00000304   1432               ADD         R2,#+20
   \   00000306   03C2               STMIA       R2!,{R0,R1}
    260          		circle_radius = 2*circle_velocity; 		 
   \   00000308   009D               LDR         R5,[SP, #+0]
   \   0000030A   2C35               ADD         R5,#+44
   \   0000030C   0098               LDR         R0,[SP, #+0]
   \   0000030E   1C30               ADD         R0,#+28
   \   00000310   0CC8               LDMIA       R0!,{R2,R3}
   \   00000312   0020               MOV         R0,#+0
   \   00000314   8021               MOV         R1,#+128
   \   00000316   C905               LSL         R1,R1,#+23         ;; #+1073741824
   \   00000318   ........           _BLF        __dMul,??__dMul??rT
   \   0000031C   03C5               STMIA       R5!,{R0,R1}
    261          		if (sector_angle >= 0.785 && sector_angle <= 2.356)//½Ç¶ÈÑ¡ÔñÔÚ45-135¶ÈÖ®¼ä
   \   0000031E   0098               LDR         R0,[SP, #+0]
   \   00000320   1430               ADD         R0,#+20
   \   00000322   03C8               LDMIA       R0!,{R0,R1}
   \   00000324   304A               LDR         R2,??distance_calculate_10+0x4  ;; 0x51eb851f
   \   00000326   314B               LDR         R3,??distance_calculate_10+0x8  ;; 0x3fe91eb8
   \   00000328   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   0000032C   0028               CMP         R0,#+0
   \   0000032E   53D0               BEQ         ??distance_calculate_11
   \   00000330   0098               LDR         R0,[SP, #+0]
   \   00000332   1430               ADD         R0,#+20
   \   00000334   03C8               LDMIA       R0!,{R0,R1}
   \   00000336   2E4A               LDR         R2,??distance_calculate_10+0xC  ;; 0x872b020d
   \   00000338   2E4B               LDR         R3,??distance_calculate_10+0x10  ;; 0x4002d916
   \   0000033A   ........           _BLF        __dLess,??__dLess??rT
   \   0000033E   0028               CMP         R0,#+0
   \   00000340   4AD0               BEQ         ??distance_calculate_11
    262          		{
    263          			 double r = 0;
    264          			 sector_angle = PI - sector_angle;
   \   00000342   009D               LDR         R5,[SP, #+0]
   \   00000344   1435               ADD         R5,#+20
   \   00000346   ....               LDR         R0,??DataTable13   ;; 0x53c8d4f1
   \   00000348   ....               LDR         R1,??DataTable14   ;; 0x400921fb
   \   0000034A   009A               LDR         R2,[SP, #+0]
   \   0000034C   1432               ADD         R2,#+20
   \   0000034E   0CCA               LDMIA       R2!,{R2,R3}
   \   00000350   ........           _BLF        __dSub,??__dSub??rT
   \   00000354   03C5               STMIA       R5!,{R0,R1}
    265          			 r = circle_radius*tan(sector_angle/2);
   \   00000356   0098               LDR         R0,[SP, #+0]
   \   00000358   1430               ADD         R0,#+20
   \   0000035A   03C8               LDMIA       R0!,{R0,R1}
   \   0000035C   0022               MOV         R2,#+0
   \   0000035E   8023               MOV         R3,#+128
   \   00000360   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   00000362   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000366   ........           _BLF        tan,??tan??rT
   \   0000036A   009A               LDR         R2,[SP, #+0]
   \   0000036C   2C32               ADD         R2,#+44
   \   0000036E   0CCA               LDMIA       R2!,{R2,R3}
   \   00000370   ........           _BLF        __dMul,??__dMul??rT
   \   00000374   061C               MOV         R6,R0
   \   00000376   0F1C               MOV         R7,R1
    266          			 how_long[0] = how_long[0] - r;
   \   00000378   03CC               LDMIA       R4!,{R0,R1}
   \   0000037A   083C               SUB         R4,#+8
   \   0000037C   321C               MOV         R2,R6
   \   0000037E   3B1C               MOV         R3,R7
   \   00000380   ........           _BLF        __dSub,??__dSub??rT
   \   00000384   03C4               STMIA       R4!,{R0,R1}
   \   00000386   083C               SUB         R4,#+8
    267          			 next_target[0] -= r*cos(ahrs_theta[2]);
   \   00000388   ....               LDR         R5,??DataTable15   ;; ahrs_theta
   \   0000038A   0122               MOV         R2,#+1
   \   0000038C   281C               MOV         R0,R5
   \   0000038E   1030               ADD         R0,#+16
   \   00000390   03C8               LDMIA       R0!,{R0,R1}
   \   00000392   ........           _BLF        _Sin,??_Sin??rT
   \   00000396   321C               MOV         R2,R6
   \   00000398   3B1C               MOV         R3,R7
   \   0000039A   ........           _BLF        __dMul,??__dMul??rT
   \   0000039E   021C               MOV         R2,R0
   \   000003A0   0B1C               MOV         R3,R1
   \   000003A2   201C               MOV         R0,R4
   \   000003A4   2030               ADD         R0,#+32
   \   000003A6   03C8               LDMIA       R0!,{R0,R1}
   \   000003A8   ........           _BLF        __dSub,??__dSub??rT
   \   000003AC   221C               MOV         R2,R4
   \   000003AE   2032               ADD         R2,#+32
   \   000003B0   03C2               STMIA       R2!,{R0,R1}
    268          			 next_target[1] -= r*sin(ahrs_theta[2]);
   \   000003B2   0022               MOV         R2,#+0
   \   000003B4   1035               ADD         R5,#+16
   \   000003B6   03CD               LDMIA       R5!,{R0,R1}
   \   000003B8   ........           _BLF        _Sin,??_Sin??rT
   \   000003BC   321C               MOV         R2,R6
   \   000003BE   3B1C               MOV         R3,R7
   \   000003C0   ........           _BLF        __dMul,??__dMul??rT
   \   000003C4   021C               MOV         R2,R0
   \   000003C6   0B1C               MOV         R3,R1
   \   000003C8   201C               MOV         R0,R4
   \   000003CA   2830               ADD         R0,#+40
   \   000003CC   03C8               LDMIA       R0!,{R0,R1}
   \   000003CE   ........           _BLF        __dSub,??__dSub??rT
   \   000003D2   2834               ADD         R4,#+40
   \   000003D4   03C4               STMIA       R4!,{R0,R1}
    269          			 return;
   \   000003D6   02E0               B           ??distance_calculate_4
    270          		}
    271          		else
    272          		{
    273          			trajectory_mod = Point_to_point;
    274          			Mixture_to_Pointtopoint_flag = true;
   \                     ??distance_calculate_11:
   \   000003D8   0748               LDR         R0,??distance_calculate_10+0x14  ;; turn_accel_flag + 2
   \   000003DA   0121               MOV         R1,#+1
   \   000003DC   0170               STRB        R1,[R0, #+0]
    275          			return;
   \                     ??distance_calculate_4:
   \   000003DE   0AB0               ADD         SP,#+40
   \   000003E0   ....               B           ??Subroutine26_0
   \   000003E2   C046               NOP         
   \                     ??distance_calculate_10:
   \   000003E4   ........           DC32        turn_accel_flag + 20
   \   000003E8   1F85EB51           DC32        0x51eb851f
   \   000003EC   B81EE93F           DC32        0x3fe91eb8
   \   000003F0   0D022B87           DC32        0x872b020d
   \   000003F4   16D90240           DC32        0x4002d916
   \   000003F8   ........           DC32        turn_accel_flag + 2
    276          		}	 
    277          	 }
    278          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine26:
   \   00000000   381C               MOV         R0,R7
   \   00000002   ........           BL          ??climbing_step
   \                     ??Subroutine26_0:
   \   00000006   F0BC               POP         {R4-R7}
   \   00000008   01BC               POP         {R0}
   \   0000000A   0047               BX          R0                 ;; return
   \                     ??Subroutine26_1:
   \   0000000C   A110A1BF           DC32        0xbfa110a1
    279          

   \                                 In segment CODE, align 4, keep-with-next
    280          void Trajectory::speed_calculate(int max_com_speed, int trajectory_mod)
    281          {   
   \                     ??speed_calculate:
   \   00000000   F2B5               PUSH        {R1,R4-R7,LR}
   \   00000002   86B0               SUB         SP,#+24
   \   00000004   041C               MOV         R4,R0
   \   00000006   151C               MOV         R5,R2
    282          	 double speed_temp = -how_long[2]/15.0 ;  //15ÃëÄÚÍê³É´¹Ö±·ÉÐÐ
   \   00000008   04AA               ADD         R2,SP,#+16
   \   0000000A   2830               ADD         R0,#+40
   \   0000000C   03C8               LDMIA       R0!,{R0,R1}
   \   0000000E   03C2               STMIA       R2!,{R0,R1}
   \   00000010   04A8               ADD         R0,SP,#+16
   \   00000012   03C8               LDMIA       R0!,{R0,R1}
   \   00000014   0022               MOV         R2,#+0
   \   00000016   5D4B               LDR         R3,??speed_calculate_1  ;; 0x402e0000
   \   00000018   ........           _BLF        __dDiv,??__dDiv??rT
   \   0000001C   061C               MOV         R6,R0
   \   0000001E   0F1C               MOV         R7,R1
   \   00000020   8020               MOV         R0,#+128
   \   00000022   0006               LSL         R0,R0,#+24         ;; #-2147483648
   \   00000024   4740               EOR         R7,R0
    283               if( speed_temp >= 0.0 )
   \   00000026   301C               MOV         R0,R6
   \   00000028   391C               MOV         R1,R7
   \   0000002A   0022               MOV         R2,#+0
   \   0000002C   0023               MOV         R3,#+0
   \   0000002E   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000032   0028               CMP         R0,#+0
   \   00000034   0BD0               BEQ         ??speed_calculate_2
    284                    top_speed[2] =(speed_temp >2.0) ? 2.0 : speed_temp ;
   \   00000036   301C               MOV         R0,R6
   \   00000038   391C               MOV         R1,R7
   \   0000003A   0122               MOV         R2,#+1
   \   0000003C   9307               LSL         R3,R2,#+30
   \   0000003E   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000042   0028               CMP         R0,#+0
   \   00000044   0FD0               BEQ         ??speed_calculate_3
   \   00000046   0026               MOV         R6,#+0
   \   00000048   8027               MOV         R7,#+128
   \   0000004A   FF05               LSL         R7,R7,#+23         ;; #+1073741824
   \   0000004C   0BE0               B           ??speed_calculate_3
    285               if( speed_temp < 0.0 )
    286                    top_speed[2] = speed_temp <-2.0 ? -2.0 : speed_temp ;
   \                     ??speed_calculate_2:
   \   0000004E   301C               MOV         R0,R6
   \   00000050   391C               MOV         R1,R7
   \   00000052   0022               MOV         R2,#+0
   \   00000054   C023               MOV         R3,#+192
   \   00000056   1B06               LSL         R3,R3,#+24         ;; #-1073741824
   \   00000058   ........           _BLF        __dLess,??__dLess??rT
   \   0000005C   0028               CMP         R0,#+0
   \   0000005E   02D0               BEQ         ??speed_calculate_3
   \   00000060   0026               MOV         R6,#+0
   \   00000062   C027               MOV         R7,#+192
   \   00000064   3F06               LSL         R7,R7,#+24         ;; #-1073741824
   \                     ??speed_calculate_3:
   \   00000066   201C               MOV         R0,R4
   \   00000068   1030               ADD         R0,#+16
   \   0000006A   C0C0               STMIA       R0!,{R6,R7}
    287          	
    288               if (trajectory_mod == Point_to_point)
   \   0000006C   201C               MOV         R0,R4
   \   0000006E   1830               ADD         R0,#+24
   \   00000070   C0C8               LDMIA       R0!,{R6,R7}
   \   00000072   02AA               ADD         R2,SP,#+8
   \   00000074   04B4               PUSH        {R2}
   \   00000076   0798               LDR         R0,[SP, #+28]
   \   00000078   011C               MOV         R1,R0
   \   0000007A   4843               MUL         R0,R1
   \   0000007C   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   00000080   04BC               POP         {R2}
   \   00000082   03C2               STMIA       R2!,{R0,R1}
   \   00000084   6A46               MOV         R2,SP
   \   00000086   04B4               PUSH        {R2}
   \   00000088   0798               LDR         R0,[SP, #+28]
   \   0000008A   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   0000008E   04BC               POP         {R2}
   \   00000090   03C2               STMIA       R2!,{R0,R1}
   \   00000092   012D               CMP         R5,#+1
   \   00000094   35D1               BNE         ??speed_calculate_4
    289          	 {
    290          		   //if ( 4.0 * (MAX_COM_SPEED * MAX_COM_SPEED)/ACCEL > how_long[0] ) //¼Ó¼õËÙÕ¼1/4Â·³Ì
    291                     //top_speed[0] = sqrt(ACCEL * how_long[0]/4.0 );
    292               	if (2.0 * (max_com_speed * max_com_speed)/ACCEL > how_long[0]) //¼ÓËÙ¶È2
   \   00000096   02A8               ADD         R0,SP,#+8
   \   00000098   0CC8               LDMIA       R0!,{R2,R3}
   \   0000009A   0020               MOV         R0,#+0
   \   0000009C   8021               MOV         R1,#+128
   \   0000009E   C905               LSL         R1,R1,#+23         ;; #+1073741824
   \   000000A0   ........           _BLF        __dMul,??__dMul??rT
   \   000000A4   0022               MOV         R2,#+0
   \   000000A6   8023               MOV         R3,#+128
   \   000000A8   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   000000AA   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000AE   021C               MOV         R2,R0
   \   000000B0   0B1C               MOV         R3,R1
   \   000000B2   301C               MOV         R0,R6
   \   000000B4   391C               MOV         R1,R7
   \   000000B6   ........           _BLF        __dLess,??__dLess??rT
   \   000000BA   0028               CMP         R0,#+0
   \   000000BC   0ED0               BEQ         ??speed_calculate_5
    293          		{	
    294                     	top_speed[0] = sqrt(ACCEL * how_long[0]/2.0 );// ¼Ó¼õËÙÕ¼1/2Â·³Ì
   \   000000BE   0020               MOV         R0,#+0
   \   000000C0   8021               MOV         R1,#+128
   \   000000C2   C905               LSL         R1,R1,#+23         ;; #+1073741824
   \   000000C4   321C               MOV         R2,R6
   \   000000C6   3B1C               MOV         R3,R7
   \   000000C8   ........           _BLF        __dMul,??__dMul??rT
   \   000000CC   0022               MOV         R2,#+0
   \   000000CE   8023               MOV         R3,#+128
   \   000000D0   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   000000D2   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000D6   ........           _BLF        sqrt,??sqrt??rT
   \   000000DA   53E0               B           ??speed_calculate_6
    295                /* if ( 4.0 * (MAX_COM_SPEED * MAX_COM_SPEED)/MAX_ACCEL + MAX_ACCEL*MAX_ACCEL*MAX_ACCEL/(3*a1*a1) > how_long[0] ) //ÔÈ¼ÓËÙ ¼Ó¼õËÙÕ¼1/4Â·³Ì
    296                     top_speed[0] = sqrt(MAX_ACCEL * how_long[0]/4.0 - MAX_ACCEL*MAX_ACCEL*MAX_ACCEL*MAX_ACCEL/(12*a1*a1));*/
    297          		}	
    298               	else
    299               	{     
    300                     	top_speed[0] = max_com_speed;
   \                     ??speed_calculate_5:
   \   000000DC   6846               MOV         R0,SP
   \   000000DE   03C8               LDMIA       R0!,{R0,R1}
   \   000000E0   03C4               STMIA       R4!,{R0,R1}
   \   000000E2   083C               SUB         R4,#+8
    301                     	top_speed[2] = -top_speed[0] * how_long[2]/how_long[0];
   \   000000E4   1034               ADD         R4,#+16
   \   000000E6   6846               MOV         R0,SP
   \   000000E8   0CC8               LDMIA       R0!,{R2,R3}
   \   000000EA   04A8               ADD         R0,SP,#+16
   \   000000EC   03C8               LDMIA       R0!,{R0,R1}
   \   000000EE   ........           _BLF        __dMul,??__dMul??rT
   \   000000F2   321C               MOV         R2,R6
   \   000000F4   3B1C               MOV         R3,R7
   \   000000F6   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000FA   8022               MOV         R2,#+128
   \   000000FC   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   000000FE   5140               EOR         R1,R2
   \   00000100   40E0               B           ??speed_calculate_6
    302               	}
    303          		return;
    304          	 }
   \                     ??speed_calculate_4:
   \   00000102   022D               CMP         R5,#+2
   \   00000104   18D1               BNE         ??speed_calculate_7
    305          	 if (trajectory_mod == Circle)
    306          	 {
    307          		 if (0.5*(max_com_speed*max_com_speed)/ACCEL > how_long[0])
   \   00000106   02A8               ADD         R0,SP,#+8
   \   00000108   03C8               LDMIA       R0!,{R0,R1}
   \   0000010A   0022               MOV         R2,#+0
   \   0000010C   ....               LDR         R3,??DataTable18   ;; 0x3fe00000
   \   0000010E   ........           _BLF        __dMul,??__dMul??rT
   \   00000112   0022               MOV         R2,#+0
   \   00000114   8023               MOV         R3,#+128
   \   00000116   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   00000118   ........           _BLF        __dDiv,??__dDiv??rT
   \   0000011C   021C               MOV         R2,R0
   \   0000011E   0B1C               MOV         R3,R1
   \   00000120   301C               MOV         R0,R6
   \   00000122   391C               MOV         R1,R7
   \   00000124   ........           _BLF        __dLess,??__dLess??rT
   \   00000128   0028               CMP         R0,#+0
   \   0000012A   02D0               BEQ         ??speed_calculate_8
    308          		 {
    309          			 top_speed[0] = 0;
   \   0000012C   0020               MOV         R0,#+0
   \   0000012E   0021               MOV         R1,#+0
   \   00000130   28E0               B           ??speed_calculate_6
    310          		 }
    311          		 else
    312          		 {
    313          			 top_speed[0] = max_com_speed;
   \                     ??speed_calculate_8:
   \   00000132   6846               MOV         R0,SP
   \   00000134   03C8               LDMIA       R0!,{R0,R1}
   \   00000136   25E0               B           ??speed_calculate_6
    314          		 }
    315          		 return;
    316          	 }	 
    317          	 if (trajectory_mod == Mixture)
   \                     ??speed_calculate_7:
   \   00000138   032D               CMP         R5,#+3
   \   0000013A   24D1               BNE         ??speed_calculate_9
    318          	 {
    319          		 if (circle_finish_flag == false)
   \   0000013C   ....               LDR         R0,??DataTable17   ;; turn_accel_flag + 1
   \   0000013E   0078               LDRB        R0,[R0, #+0]
   \   00000140   0028               CMP         R0,#+0
   \   00000142   1DD1               BNE         ??speed_calculate_10
    320          		 {	 
    321          		 	if (0.5*(max_com_speed*max_com_speed)/ACCEL > how_long[0])
   \   00000144   201C               MOV         R0,R4
   \   00000146   1830               ADD         R0,#+24
   \   00000148   03C8               LDMIA       R0!,{R0,R1}
   \   0000014A   061C               MOV         R6,R0
   \   0000014C   0F1C               MOV         R7,R1
   \   0000014E   02A8               ADD         R0,SP,#+8
   \   00000150   03C8               LDMIA       R0!,{R0,R1}
   \   00000152   0022               MOV         R2,#+0
   \   00000154   ....               LDR         R3,??DataTable18   ;; 0x3fe00000
   \   00000156   ........           _BLF        __dMul,??__dMul??rT
   \   0000015A   0022               MOV         R2,#+0
   \   0000015C   8023               MOV         R3,#+128
   \   0000015E   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   00000160   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000164   021C               MOV         R2,R0
   \   00000166   0B1C               MOV         R3,R1
   \   00000168   301C               MOV         R0,R6
   \   0000016A   391C               MOV         R1,R7
   \   0000016C   ........           _BLF        __dLess,??__dLess??rT
   \   00000170   0028               CMP         R0,#+0
   \   00000172   02D0               BEQ         ??speed_calculate_11
    322          		 	{
    323          				top_speed[0] = 0;
   \   00000174   0020               MOV         R0,#+0
   \   00000176   0021               MOV         R1,#+0
   \   00000178   04E0               B           ??speed_calculate_6
    324          		 	}
    325          		 	else
    326          		 	{
    327          			 	top_speed[0] = max_com_speed;
   \                     ??speed_calculate_11:
   \   0000017A   6846               MOV         R0,SP
   \   0000017C   03C8               LDMIA       R0!,{R0,R1}
   \   0000017E   01E0               B           ??speed_calculate_6
    328          		 	}
    329          		 	return;
    330          		 }
    331          		 else
    332          		 {
    333          			 top_speed[0] = max_com_speed;
   \                     ??speed_calculate_10:
   \   00000180   6846               MOV         R0,SP
   \   00000182   03C8               LDMIA       R0!,{R0,R1}
   \                     ??speed_calculate_6:
   \   00000184   03C4               STMIA       R4!,{R0,R1}
   \                     ??speed_calculate_9:
   \   00000186   07B0               ADD         SP,#+28
   \   00000188   ....               B           ??Subroutine26_0
   \   0000018A   C046               NOP         
   \                     ??speed_calculate_1:
   \   0000018C   00002E40           DC32        0x402e0000
    334          		 }
    335          		
    336          	 }	 
    337          }
    338          
    339          
    340          

   \                                 In segment CODE, align 4, keep-with-next
    341          void Trajectory::schedule(int max_speed, int mode)  //¶Ônext_targe½øÐÐ¹æ»®
    342          {
   \                     ??schedule:
   \   00000000   70B5               PUSH        {R4-R6,LR}
   \   00000002   041C               MOV         R4,R0
   \   00000004   0D1C               MOV         R5,R1
   \   00000006   161C               MOV         R6,R2
    343               distance_calculate(mode);              //¼ÆËã¾àÀëhow_long
   \   00000008   111C               MOV         R1,R2
   \   0000000A   ........           BL          ??distance_calculate
    344               speed_calculate(max_speed, mode);                //¼ÆËã²Î¿¼×î´óËÙ¶Ètop_speed 
   \   0000000E   321C               MOV         R2,R6
   \   00000010   291C               MOV         R1,R5
   \   00000012   201C               MOV         R0,R4
   \   00000014   ........           BL          ??speed_calculate
    345          
    346          /*-----------------------------------------
    347               if( how_long[0] >BOUNDARY_DISTANCE )
    348               {
    349                    turn_heading( &end_heading) ;
    350                    heli_step = 2;
    351                    return ;
    352                }
    353               if( how_long[0] <=BOUNDARY_DISTANCE  )
    354                {
    355                    position_t->current_target_update(next_target);
    356                    position_t->heading = ahrs_theta[2];
    357                    end_heading =ahrs_theta[2]; 
    358                    heli_step = 1;  
    359                    return ;
    360                } 
    361          ------------------------------*/
    362          }
   \   00000018   ....               B           ?Subroutine27

   \                                 In segment CODE, align 4, keep-with-next
   \                     ?Subroutine27:
   \   00000000   70BC               POP         {R4-R6}
   \   00000002   01BC               POP         {R0}
   \   00000004   0047               BX          R0                 ;; return
   \   00000006   C046               NOP         
   \                     ??Subroutine27_0:
   \   00000008   ........           DC32        position + 192
   \   0000000C   7B14AE47           DC32        0x47ae147b
   \   00000010   E17AA43F           DC32        0x3fa47ae1
   \   00000014   B81E85EB           DC32        0xeb851eb8
   \   00000018   51B88EBF           DC32        0xbf8eb851
   \   0000001C   B81E85EB           DC32        0xeb851eb8
   \   00000020   51B88E3F           DC32        0x3f8eb851
    363          

   \                                 In segment CODE, align 4, keep-with-next
    364          void Trajectory::hover_step()
    365          {
   \                     ??hover_step:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   021C               MOV         R2,R0
    366          /*------------------------      
    367                com_position[0] = 0.0;
    368                com_velocity[0] = 0.0;
    369                com_pqr[2]  = 0.0;
    370                com_theta[2]  = 0.0;
    371          --------------------------*/
    372          	for(int i =0 ; i!= 3 ;  ++i)
   \   00000004   0023               MOV         R3,#+0
   \   00000006   061C               MOV         R6,R0
   \   00000008   1836               ADD         R6,#+24
   \   0000000A   041C               MOV         R4,R0
   \   0000000C   9834               ADD         R4,#+152
   \   0000000E   0020               MOV         R0,#+0
   \   00000010   191C               MOV         R1,R3
    373              { 
    374                  com_position[i] = 0.0;
   \                     ??hover_step_1:
   \   00000012   DD00               LSL         R5,R3,#+3
   \   00000014   6719               ADD         R7,R4,R5
   \   00000016   03C7               STMIA       R7!,{R0,R1}
    375                  com_velocity[i] = 0.0;
   \   00000018   371C               MOV         R7,R6
   \   0000001A   6837               ADD         R7,#+104
   \   0000001C   7F19               ADD         R7,R7,R5
   \   0000001E   03C7               STMIA       R7!,{R0,R1}
    376                  com_pqr[i]      = 0.0;
   \   00000020   271C               MOV         R7,R4
   \   00000022   1837               ADD         R7,#+24
   \   00000024   7F19               ADD         R7,R7,R5
   \   00000026   03C7               STMIA       R7!,{R0,R1}
    377                  com_theta[i]    = 0.0;
   \   00000028   271C               MOV         R7,R4
   \   0000002A   3037               ADD         R7,#+48
   \   0000002C   7F19               ADD         R7,R7,R5
   \   0000002E   03C7               STMIA       R7!,{R0,R1}
    378                  
    379                  top_speed[i] = 0.0;
   \   00000030   5719               ADD         R7,R2,R5
   \   00000032   03C7               STMIA       R7!,{R0,R1}
    380                  how_long[i] = 0.0;
   \   00000034   7519               ADD         R5,R6,R5
   \   00000036   03C5               STMIA       R5!,{R0,R1}
    381              }
   \   00000038   5B1C               ADD         R3,R3,#+1
   \   0000003A   032B               CMP         R3,#+3
   \   0000003C   E9D1               BNE         ??hover_step_1
    382          	  
    383                if(true == climbing_step())
   \   0000003E   101C               MOV         R0,R2
   \   00000040   ........           BL          ??climbing_step
   \   00000044   ....               LDR         R4,??DataTable19   ;; num
   \   00000046   2568               LDR         R5,[R4, #+0]
   \   00000048   0028               CMP         R0,#+0
   \   0000004A   0BD0               BEQ         ??hover_step_2
    384               {   
    385                   hover_time--;
   \   0000004C   301C               MOV         R0,R6
   \   0000004E   4830               ADD         R0,#+72
   \   00000050   03C8               LDMIA       R0!,{R0,R1}
   \   00000052   021C               MOV         R2,R0
   \   00000054   0B1C               MOV         R3,R1
   \   00000056   0020               MOV         R0,#+0
   \   00000058   0649               LDR         R1,??hover_step_3  ;; 0xbff00000
   \   0000005A   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000005E   B064               STR         R0,[R6, #+72]
   \   00000060   F164               STR         R1,[R6, #+76]
    386                   num++;
   \   00000062   6D1C               ADD         R5,R5,#+1
    387               }
    388               if(num >= 10000)
   \                     ??hover_step_2:
   \   00000064   ....               LDR         R0,??DataTable20   ;; 0x2710
   \   00000066   8542               CMP         R5,R0
   \   00000068   01DB               BLT         ??hover_step_4
    389                  num = 2000;
   \   0000006A   FA25               MOV         R5,#+250
   \   0000006C   ED00               LSL         R5,R5,#+3          ;; #+2000
   \                     ??hover_step_4:
   \   0000006E   2560               STR         R5,[R4, #+0]
    390          }
   \   00000070   ....               B           ??Subroutine26_0
   \   00000072   C046               NOP         
   \                     ??hover_step_3:
   \   00000074   0000F0BF           DC32        0xbff00000
    391          //-------------------------------syc--2012.4.13--------------------//

   \                                 In segment CODE, align 4, keep-with-next
    392          void Trajectory::turning_head_step()
    393          {  	 
   \                     ??turning_head_step:
   \   00000000   70B5               PUSH        {R4-R6,LR}
    394              if ( abs(end_heading - position.heading) < 0.04 )  //0.04rad¶ÔÓ¦Îª2.3deg 
   \   00000002   041C               MOV         R4,R0
   \   00000004   3434               ADD         R4,#+52
   \   00000006   2568               LDR         R5,[R4, #+0]
   \   00000008   C035               ADD         R5,#+192
   \   0000000A   061C               MOV         R6,R0
   \   0000000C   E436               ADD         R6,#+228
   \   0000000E   3430               ADD         R0,#+52
   \   00000010   2430               ADD         R0,#+36
   \   00000012   03C8               LDMIA       R0!,{R0,R1}
   \   00000014   ....               LDR         R2,??Subroutine27_0  ;; position + 192
   \   00000016   0CCA               LDMIA       R2!,{R2,R3}
   \   00000018   ........           _BLF        __dSub,??__dSub??rT
   \   0000001C   4900               LSL         R1,R1,#+1
   \   0000001E   4908               LSR         R1,R1,#+1
   \   00000020   ....               LDR         R2,??Subroutine27_0+0x4  ;; 0x47ae147b
   \   00000022   ....               LDR         R3,??Subroutine27_0+0x8  ;; 0x3fa47ae1
   \   00000024   ........           _BLF        __dLess,??__dLess??rT
   \   00000028   0028               CMP         R0,#+0
   \   0000002A   08D0               BEQ         ??turning_head_step_1
    395              {
    396                  Isturn = 0 ;
   \   0000002C   0020               MOV         R0,#+0
   \   0000002E   3060               STR         R0,[R6, #+0]
    397                  position_t->heading = end_heading;
   \   00000030   2434               ADD         R4,#+36
   \   00000032   03CC               LDMIA       R4!,{R0,R1}
   \   00000034   03C5               STMIA       R5!,{R0,R1}
    398                  turn_accel_flag=true;
   \   00000036   ....               LDR         R0,??DataTable21   ;; turn_accel_flag
   \   00000038   0121               MOV         R1,#+1
   \   0000003A   0170               STRB        R1,[R0, #+0]
    399          		return;
   \   0000003C   34E0               B           ??turning_head_step_2
    400              }
    401          	 
    402          	if ( Isturn == 1 || Isturn ==4 )
   \                     ??turning_head_step_1:
   \   0000003E   3068               LDR         R0,[R6, #+0]
   \   00000040   0128               CMP         R0,#+1
   \   00000042   01D0               BEQ         ??turning_head_step_3
   \   00000044   0428               CMP         R0,#+4
   \   00000046   14D1               BNE         ??turning_head_step_4
    403              { //×ó×ª
    404              	if ( position_t->heading < - C_PI )
   \                     ??turning_head_step_3:
   \   00000048   03CD               LDMIA       R5!,{R0,R1}
   \   0000004A   083D               SUB         R5,#+8
   \   0000004C   ....               LDR         R2,??DataTable28   ;; 0x54442d18
   \   0000004E   ....               LDR         R3,??DataTable23   ;; 0xc00921fb
   \   00000050   ........           _BLF        __dLess,??__dLess??rT
   \   00000054   0028               CMP         R0,#+0
   \   00000056   07D0               BEQ         ??turning_head_step_5
    405                      position_t->heading +=2* C_PI;
   \   00000058   0CCD               LDMIA       R5!,{R2,R3}
   \   0000005A   083D               SUB         R5,#+8
   \   0000005C   ....               LDR         R0,??DataTable28   ;; 0x54442d18
   \   0000005E   ....               LDR         R1,??DataTable25   ;; 0x401921fb
   \   00000060   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000064   03C5               STMIA       R5!,{R0,R1}
   \   00000066   083D               SUB         R5,#+8
    406                  position_t->heading -= 0.015 ; //by syc
   \                     ??turning_head_step_5:
   \   00000068   0CCD               LDMIA       R5!,{R2,R3}
   \   0000006A   083D               SUB         R5,#+8
   \   0000006C   ....               LDR         R0,??Subroutine27_0+0xC  ;; 0xeb851eb8
   \   0000006E   ....               LDR         R1,??Subroutine27_0+0x10  ;; 0xbf8eb851
   \   00000070   17E0               B           ??turning_head_step_6
    407                  //position_t->heading -= 0.015 ; 
    408          		return;
    409              }
    410              if ( Isturn == 2 || Isturn ==3 )
   \                     ??turning_head_step_4:
   \   00000072   0228               CMP         R0,#+2
   \   00000074   01D0               BEQ         ??turning_head_step_7
   \   00000076   0328               CMP         R0,#+3
   \   00000078   16D1               BNE         ??turning_head_step_2
    411              { //ÓÒ×ª
    412                 	if ( position_t->heading > C_PI )
   \                     ??turning_head_step_7:
   \   0000007A   03CD               LDMIA       R5!,{R0,R1}
   \   0000007C   083D               SUB         R5,#+8
   \   0000007E   ....               LDR         R2,??DataTable26   ;; 0x54442d19
   \   00000080   ....               LDR         R3,??DataTable27   ;; 0x400921fb
   \   00000082   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000086   0028               CMP         R0,#+0
   \   00000088   07D0               BEQ         ??turning_head_step_8
    413                      position_t->heading -=2* C_PI;
   \   0000008A   0CCD               LDMIA       R5!,{R2,R3}
   \   0000008C   083D               SUB         R5,#+8
   \   0000008E   ....               LDR         R0,??DataTable28   ;; 0x54442d18
   \   00000090   ....               LDR         R1,??DataTable29   ;; 0xc01921fb
   \   00000092   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000096   03C5               STMIA       R5!,{R0,R1}
   \   00000098   083D               SUB         R5,#+8
    414                 	position_t->heading += 0.015 ;
   \                     ??turning_head_step_8:
   \   0000009A   0CCD               LDMIA       R5!,{R2,R3}
   \   0000009C   083D               SUB         R5,#+8
   \   0000009E   ....               LDR         R0,??Subroutine27_0+0x14  ;; 0xeb851eb8
   \   000000A0   ....               LDR         R1,??Subroutine27_0+0x18  ;; 0x3f8eb851
   \                     ??turning_head_step_6:
   \   000000A2   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000A6   03C5               STMIA       R5!,{R0,R1}
    415          		return;
   \                     ??turning_head_step_2:
   \   000000A8                      REQUIRE ?Subroutine27
   \   000000A8                      ;; // Fall through to label ?Subroutine27
    416              }
    417          /*-----------------------------
    418               if(turn_accel_flag==true)
    419               {
    420                 turn_accel++;
    421               }
    422               if(turn_accel==90)//3ÃëÖ®ºó Ç°·É
    423               {
    424                turn_accel=0;
    425                turn_accel_flag=false;
    426                heli_step = 3;
    427                position_t->current_target_update(next_target);      
    428               }
    429          ------------------------------*/  
    430          }
    431          

   \                                 In segment CODE, align 4, keep-with-next
    432          void Trajectory::speed_up_step()
    433          {
   \                     ??speed_up_step:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   071C               MOV         R7,R0
    434                  /*if ( ACCEL <= MAX_ACCEL)
    435                   ACCEL += a1*dt;
    436                   else
    437                   ACCEL -= a1*dt; */
    438          
    439               if (com_velocity[0] < top_speed[0])
   \   00000004   061C               MOV         R6,R0
   \   00000006   8036               ADD         R6,#+128
   \   00000008   30CE               LDMIA       R6!,{R4,R5}
   \   0000000A   083E               SUB         R6,#+8
   \   0000000C   201C               MOV         R0,R4
   \   0000000E   291C               MOV         R1,R5
   \   00000010   0CCF               LDMIA       R7!,{R2,R3}
   \   00000012   083F               SUB         R7,#+8
   \   00000014   ........           _BLF        __dLess,??__dLess??rT
   \   00000018   0028               CMP         R0,#+0
   \   0000001A   04D0               BEQ         ??speed_up_step_1
    440                   com_velocity[0] +=  dt * ACCEL ; 
   \   0000001C   221C               MOV         R2,R4
   \   0000001E   2B1C               MOV         R3,R5
   \   00000020   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   00000022   1049               LDR         R1,??speed_up_step_2  ;; 0x3fb110a1
   \   00000024   03E0               B           ??speed_up_step_3
    441               else
    442                   com_velocity[0] -=  dt * ACCEL ; 
   \                     ??speed_up_step_1:
   \   00000026   221C               MOV         R2,R4
   \   00000028   2B1C               MOV         R3,R5
   \   0000002A   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   0000002C   ....               LDR         R1,??DataTable42   ;; 0xbfb110a1
   \                     ??speed_up_step_3:
   \   0000002E   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000032   03C6               STMIA       R6!,{R0,R1}
   \   00000034   083E               SUB         R6,#+8
    443               how_long[0] -= com_velocity[0]*dt; 
   \   00000036   0CCE               LDMIA       R6!,{R2,R3}
   \   00000038   083E               SUB         R6,#+8
   \   0000003A   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   0000003C   ....               LDR         R1,??DataTable45   ;; 0x3fa110a1
   \   0000003E   ........           _BLF        __dMul,??__dMul??rT
   \   00000042   021C               MOV         R2,R0
   \   00000044   0B1C               MOV         R3,R1
   \   00000046   381C               MOV         R0,R7
   \   00000048   1830               ADD         R0,#+24
   \   0000004A   03C8               LDMIA       R0!,{R0,R1}
   \   0000004C   ........           _BLF        __dSub,??__dSub??rT
   \   00000050   3A1C               MOV         R2,R7
   \   00000052   1832               ADD         R2,#+24
   \   00000054   03C2               STMIA       R2!,{R0,R1}
    444                //ÒòGPSµÃµ½µÄÊµÊ±Î»ÒÆÊÇÒÔÄ¿±êµã×÷ÎªÔ­µã£¬ÔòÈ·¶¨¹æ»®Î»ÒÆÊ±Ò²Ó¦ÒÔÄ¿±êµã×÷ÎªÔ­µã£¬10.11.03
    445                //********************************************
    446               com_position[0]= -how_long[0];
   \   00000056   1836               ADD         R6,#+24
   \   00000058   8022               MOV         R2,#+128
   \   0000005A   1206               LSL         R2,R2,#+24         ;; #-2147483648
   \   0000005C   5140               EOR         R1,R2
   \   0000005E   03C6               STMIA       R6!,{R0,R1}
    447               //*********************************************
    448               climbing_step();
   \   00000060   ....               B           ?Subroutine26
   \   00000062   C046               NOP         
   \                     ??speed_up_step_2:
   \   00000064   A110B13F           DC32        0x3fb110a1
    449               
    450          #ifdef circle_test
    451               if(com_velocity[0] >= 0.5)
    452               {   
    453                   heli_step = 9;
    454                   return ;
    455               }
    456          #endif
    457          /*----------------------------
    458               if ( how_long[0] <= 0.5 * ( top_speed[0] * top_speed[0] )/ACCEL ) **ÓÉ2.0¸ÄÎª0.5,0,75****************
    459               {    
    460                   heli_step = 4;
    461               }
    462          
    463          -----------------------------*/
    464          }
    465          

   \                                 In segment CODE, align 4, keep-with-next
    466          void Trajectory::speed_down_step()
    467          {
   \                     ??speed_down_step:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   071C               MOV         R7,R0
    468              /*if(com_velocity[0] <= MAX_ACCEL*MAX_ACCEL/(2*a1))
    469                  ACCEL -= dt * a1;
    470          	if(ACCEL <= 0)
    471          	ACCEL = 0;
    472              */
    473              if ( com_velocity[0] > 0) 
   \   00000004   061C               MOV         R6,R0
   \   00000006   1836               ADD         R6,#+24
   \   00000008   B46E               LDR         R4,[R6, #+104]
   \   0000000A   F56E               LDR         R5,[R6, #+108]
   \   0000000C   201C               MOV         R0,R4
   \   0000000E   291C               MOV         R1,R5
   \   00000010   0122               MOV         R2,#+1
   \   00000012   0023               MOV         R3,#+0
   \   00000014   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000018   0028               CMP         R0,#+0
   \   0000001A   08D0               BEQ         ??speed_down_step_1
    474                   com_velocity[0] -=  dt *ACCEL ; 
   \   0000001C   221C               MOV         R2,R4
   \   0000001E   2B1C               MOV         R3,R5
   \   00000020   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   00000022   ....               LDR         R1,??DataTable42   ;; 0xbfb110a1
   \   00000024   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000028   B066               STR         R0,[R6, #+104]
   \   0000002A   F166               STR         R1,[R6, #+108]
   \   0000002C   07E0               B           ??speed_down_step_2
    475              else
    476                    how_long[0] -= dt; //????
   \                     ??speed_down_step_1:
   \   0000002E   0CCE               LDMIA       R6!,{R2,R3}
   \   00000030   083E               SUB         R6,#+8
   \   00000032   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   00000034   ....               LDR         R1,??Subroutine26_1  ;; 0xbfa110a1
   \   00000036   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000003A   03C6               STMIA       R6!,{R0,R1}
   \   0000003C   083E               SUB         R6,#+8
    477              how_long[0] -= com_velocity[0]*dt;
   \                     ??speed_down_step_2:
   \   0000003E   B26E               LDR         R2,[R6, #+104]
   \   00000040   F36E               LDR         R3,[R6, #+108]
   \   00000042   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   00000044   ....               LDR         R1,??DataTable45   ;; 0x3fa110a1
   \   00000046   ........           _BLF        __dMul,??__dMul??rT
   \   0000004A   021C               MOV         R2,R0
   \   0000004C   0B1C               MOV         R3,R1
   \   0000004E   03CE               LDMIA       R6!,{R0,R1}
   \   00000050   083E               SUB         R6,#+8
   \   00000052   ........           _BLF        __dSub,??__dSub??rT
   \   00000056   03C6               STMIA       R6!,{R0,R1}
    478               //******************10.11.03*******************
    479              com_position[0]= -how_long[0];
   \   00000058   3A1C               MOV         R2,R7
   \   0000005A   9832               ADD         R2,#+152
   \   0000005C   8023               MOV         R3,#+128
   \   0000005E   1B06               LSL         R3,R3,#+24         ;; #-2147483648
   \   00000060   5940               EOR         R1,R3
   \   00000062   03C2               STMIA       R2!,{R0,R1}
    480                //*********************************************
    481              climbing_step();
   \   00000064                      REQUIRE ?Subroutine26
   \   00000064                      ;; // Fall through to label ?Subroutine26
    482          /*------------------------
    483              if ( how_long[0] <=0.0)
    484          	{
    485                  how_long[0] = 0.0 ;
    486                  heli_step = 1;
    487              }
    488          ---------------------------*/     
    489          }
    490          

   \                                 In segment CODE, align 4, keep-with-next
    491          void Trajectory::brake_down_step()  // ÓÉµØÃæÕ¾µÄ¡°È¡ÏûÄ¿±ê¶ÓÁÐ¡±ÃüÁî¼¤»î
    492          {
   \                     ??brake_down_step:
   \   00000000   F1B5               PUSH        {R0,R4-R7,LR}
    493              hover_time = DEFAULT_HOVER_TIEM;
   \   00000002   061C               MOV         R6,R0
   \   00000004   1836               ADD         R6,#+24
   \   00000006   0020               MOV         R0,#+0
   \   00000008   ....               LDR         R1,??DataTable40   ;; 0x407c2000
   \   0000000A   B064               STR         R0,[R6, #+72]
   \   0000000C   F164               STR         R1,[R6, #+76]
    494              
    495              if ( com_velocity[0] > 0)
   \   0000000E   009F               LDR         R7,[SP, #+0]
   \   00000010   9837               ADD         R7,#+152
   \   00000012   0024               MOV         R4,#+0
   \   00000014   051C               MOV         R5,R0
   \   00000016   B06E               LDR         R0,[R6, #+104]
   \   00000018   F16E               LDR         R1,[R6, #+108]
   \   0000001A   0122               MOV         R2,#+1
   \   0000001C   231C               MOV         R3,R4
   \   0000001E   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000022   0028               CMP         R0,#+0
   \   00000024   1DD0               BEQ         ??brake_down_step_1
    496          	{ 
    497          		for(int i =0 ; i!= 3 ;  ++i)
   \   00000026   0020               MOV         R0,#+0
    498                 { 
    499                  	com_position[i] = 0.0;
   \                     ??brake_down_step_2:
   \   00000028   C100               LSL         R1,R0,#+3
   \   0000002A   7A18               ADD         R2,R7,R1
   \   0000002C   30C2               STMIA       R2!,{R4,R5}
    500                  	com_pqr[i]      = 0.0;
   \   0000002E   3A1C               MOV         R2,R7
   \   00000030   1832               ADD         R2,#+24
   \   00000032   5218               ADD         R2,R2,R1
   \   00000034   30C2               STMIA       R2!,{R4,R5}
    501                  	com_theta[i]    = 0.0;       
   \   00000036   3A1C               MOV         R2,R7
   \   00000038   3032               ADD         R2,#+48
   \   0000003A   5218               ADD         R2,R2,R1
   \   0000003C   30C2               STMIA       R2!,{R4,R5}
    502                  	top_speed[i] 	= 0.0;
   \   0000003E   009A               LDR         R2,[SP, #+0]
   \   00000040   5218               ADD         R2,R2,R1
   \   00000042   30C2               STMIA       R2!,{R4,R5}
    503                  	how_long[i] 	= 0.0;
   \   00000044   7118               ADD         R1,R6,R1
   \   00000046   30C1               STMIA       R1!,{R4,R5}
    504                 }
   \   00000048   401C               ADD         R0,R0,#+1
   \   0000004A   0328               CMP         R0,#+3
   \   0000004C   ECD1               BNE         ??brake_down_step_2
    505                  com_velocity[0] -=  dt *ACCEL ;  // É²³µ¹ý³ÌÖ»¶ÔËÙ¶È½øÐÐ¹æ»®
   \   0000004E   B26E               LDR         R2,[R6, #+104]
   \   00000050   F36E               LDR         R3,[R6, #+108]
   \   00000052   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   00000054   ....               LDR         R1,??DataTable42   ;; 0xbfb110a1
   \   00000056   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000005A   B066               STR         R0,[R6, #+104]
   \   0000005C   F166               STR         R1,[R6, #+108]
    506                  heli_step = 8;
   \   0000005E   0820               MOV         R0,#+8
   \   00000060   02E0               B           ??brake_down_step_3
    507              }
    508              else
    509          	{
    510                  com_velocity[0] = 0;
   \                     ??brake_down_step_1:
   \   00000062   B466               STR         R4,[R6, #+104]
   \   00000064   F566               STR         R5,[R6, #+108]
    511                  heli_step = 1;
   \   00000066   0120               MOV         R0,#+1
   \                     ??brake_down_step_3:
   \   00000068   B864               STR         R0,[R7, #+72]
    512              }
    513              position_t->current_target_update(position_t->current_xyz);
   \   0000006A   F169               LDR         R1,[R6, #+28]
   \   0000006C   081C               MOV         R0,R1
   \   0000006E   ........           BL          ??current_target_update
    514              position_t->heading = ahrs_theta[2];
   \   00000072   F269               LDR         R2,[R6, #+28]
   \   00000074   C032               ADD         R2,#+192
   \   00000076   ....               LDR         R0,??DataTable43   ;; ahrs_theta + 16
   \   00000078   03C8               LDMIA       R0!,{R0,R1}
   \   0000007A   03C2               STMIA       R2!,{R0,R1}
    515          }
   \   0000007C                      REQUIRE ?Subroutine24
   \   0000007C                      ;; // Fall through to label ?Subroutine24
    516          //------------------------------syc------------------//
    517          /*bool Trajectory::climbing_step()
    518          {  
    519              if(abs(how_long[2]) >2)
    520              {
    521          	if (  com_velocity[2]  < top_speed[2])
    522                        com_velocity[2] +=  dt * ACCEL *0.5; 
    523                  else
    524                        com_velocity[2] -=  dt * ACCEL *0.5; 
    525                  how_long[2] += com_velocity[2]*dt;
    526              }
    527              
    528              com_position[2] = how_long[2] ;
    529              if(abs(how_long[2]) <= 2)
    530              {   
    531                  how_long[2] = 0.0 ;
    532                  top_speed[2] = 0.0 ;
    533                  
    534                  if (  com_velocity[2]  < top_speed[2])
    535                        com_velocity[2] +=  dt * ACCEL *0.5; 
    536                  else
    537                        com_velocity[2] -=  dt * ACCEL *0.5; 
    538                  
    539                  hover_xyz[2] = next_target[2];
    540                  return true ;
    541              }
    542              return false ;
    543          }*/
    544          

   \                                 In segment CODE, align 4, keep-with-next
    545          bool Trajectory::climbing_step()
    546          {
   \                     ??climbing_step:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   061C               MOV         R6,R0
    547              com_position[2] = how_long[2] ;
   \   00000004   071C               MOV         R7,R0
   \   00000006   1037               ADD         R7,#+16
   \   00000008   021C               MOV         R2,R0
   \   0000000A   9032               ADD         R2,#+144
   \   0000000C   131C               MOV         R3,R2
   \   0000000E   1833               ADD         R3,#+24
   \   00000010   381C               MOV         R0,R7
   \   00000012   1830               ADD         R0,#+24
   \   00000014   03C8               LDMIA       R0!,{R0,R1}
   \   00000016   03C3               STMIA       R3!,{R0,R1}
    548              com_velocity[2] = top_speed[2] ;
   \   00000018   30CF               LDMIA       R7!,{R4,R5}
   \   0000001A   083F               SUB         R7,#+8
   \   0000001C   30C2               STMIA       R2!,{R4,R5}
    549              
    550              if(abs(how_long[2]) > 2)
   \   0000001E   301C               MOV         R0,R6
   \   00000020   1030               ADD         R0,#+16
   \   00000022   1830               ADD         R0,#+24
   \   00000024   03C8               LDMIA       R0!,{R0,R1}
   \   00000026   4900               LSL         R1,R1,#+1
   \   00000028   4908               LSR         R1,R1,#+1
   \   0000002A   0122               MOV         R2,#+1
   \   0000002C   9307               LSL         R3,R2,#+30
   \   0000002E   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000032   0028               CMP         R0,#+0
   \   00000034   0DD0               BEQ         ??climbing_step_1
    551          	{
    552                  how_long[2] += com_velocity[2]*dt;
   \   00000036   3E1C               MOV         R6,R7
   \   00000038   1836               ADD         R6,#+24
   \   0000003A   221C               MOV         R2,R4
   \   0000003C   2B1C               MOV         R3,R5
   \   0000003E   ....               LDR         R0,??DataTable44   ;; 0x37f38c54
   \   00000040   ....               LDR         R1,??DataTable45   ;; 0x3fa110a1
   \   00000042   ........           _BLF        __dMul,??__dMul??rT
   \   00000046   1837               ADD         R7,#+24
   \   00000048   0CCF               LDMIA       R7!,{R2,R3}
   \   0000004A   ........           _BLF        __dAdd,??__dAdd??rT
   \   0000004E   03C6               STMIA       R6!,{R0,R1}
    553          		return false;
   \   00000050   18E0               B           ??climbing_step_2
    554          	}
    555            
    556              if(abs(how_long[2]) <= 2)
   \                     ??climbing_step_1:
   \   00000052   1036               ADD         R6,#+16
   \   00000054   1836               ADD         R6,#+24
   \   00000056   03CE               LDMIA       R6!,{R0,R1}
   \   00000058   4900               LSL         R1,R1,#+1
   \   0000005A   4908               LSR         R1,R1,#+1
   \   0000005C   0122               MOV         R2,#+1
   \   0000005E   9307               LSL         R3,R2,#+30
   \   00000060   ........           _BLF        __dLess,??__dLess??rT
   \   00000064   0028               CMP         R0,#+0
   \   00000066   0DD0               BEQ         ??climbing_step_2
    557              {   
    558                  how_long[2] = 0.0 ;
   \   00000068   0020               MOV         R0,#+0
   \   0000006A   0021               MOV         R1,#+0
   \   0000006C   3A1C               MOV         R2,R7
   \   0000006E   1832               ADD         R2,#+24
   \   00000070   03C2               STMIA       R2!,{R0,R1}
    559                  top_speed[2] = 0.0 ;
   \   00000072   03C7               STMIA       R7!,{R0,R1}
   \   00000074   083F               SUB         R7,#+8
    560                  hover_xyz[2] = next_target[2];
   \   00000076   381C               MOV         R0,R7
   \   00000078   3830               ADD         R0,#+56
   \   0000007A   03C8               LDMIA       R0!,{R0,R1}
   \   0000007C   B866               STR         R0,[R7, #+104]
   \   0000007E   F966               STR         R1,[R7, #+108]
    561                  return true;
   \   00000080   0120               MOV         R0,#+1
   \   00000082   00E0               B           ??climbing_step_3
    562              }
    563              return false;
   \                     ??climbing_step_2:
   \   00000084   0020               MOV         R0,#+0
   \                     ??climbing_step_3:
   \   00000086   C046               NOP         
   \   00000088                      REQUIRE ?Subroutine25
   \   00000088                      ;; // Fall through to label ?Subroutine25
    564          }
    565          /****************************************************************
    566           *º¯ÊýÃû: void Trajectory::circle_step(double _circle_velocity, int _radius,
    567           *							 		   double _helix_velocity, double _angle)
    568           *²ÎÊý: circle_velocityÎªÔ²ÖÜÏßËÙ¶È
    569           *      radiusÎªÔ²ÖÜ°ë¾¶(ÒÔºó»á¼ÓÈëÇÐÈëµã×ø±ê¡¢Ô²»¡½Ç¶È£©   
    570           *		climbing_velocityÎª´¹Ö±ÅÀÉýËÙ¶È£¬¸ºÖµÏòÉÏ£¬·ÉÂÝÐýÏßÓÃ
    571           *		angleÎª·ÉÔ²»¡µÄÉÈÐÎ½Ç¶È
    572           *
    573           *¹¦ÄÜ£ºÏÈ¼ÓËÙ²¢ÔÈËÙµ½circle_velocity
    574           *		È»ºó¼ÓÈëROLLÇã½ÇºÍPITCH½ÇËÙ¶ÈÇÐÈëÔ²ÄÚ
    575           *		°ë¾¶Îªradius,³õÊ¼ËÙ¶ÈÎªinit_velocity_on_circle
    576           *		½ÇËÙ¶ÈÎªinit_velocity_on_circle/radiusÒÔÄÚ
    577           *      circle_turn = 1Ê±Ë³Ê±ÕëÅÌÐý(»úÍ·ÓÒÐý)
    578           *		circle_turn = 2Ê±ÄæÊ±ÕëÅÌÐý(»úÍ·×óÐý)
    579           *
    580           *·µ»ØÖµ£ºÔÝÎÞ
    581           *
    582           *×÷    Õß£ºÎâÒã±ò
    583           *Íê³ÉÈÕÆÚ: 2012-11-15
    584           *
    585           *Ô­ ×÷ Õß£ºËïÔ¥´¨
    586           *Íê³ÉÈÕÆÚ£º2012-7-21
    587           *
    588           ****************************************************************/

   \                                 In segment CODE, align 4, keep-with-next
    589          void Trajectory::circle_step(double _circle_velocity, int _radius,
    590          							 double _helix_velocity, double _angle)
    591          
    592          {
   \                     ??circle_step:
   \   00000000   F7B5               PUSH        {R0-R2,R4-R7,LR}
   \   00000002   83B0               SUB         SP,#+12
   \   00000004   181C               MOV         R0,R3
   \   00000006   039C               LDR         R4,[SP, #+12]
   \   00000008   1834               ADD         R4,#+24
   \   0000000A   6D46               MOV         R5,SP
   \   0000000C   ........           _BLF        __longToDouble,??__longToDouble??rT
   \   00000010   03C5               STMIA       R5!,{R0,R1}
   \   00000012   039D               LDR         R5,[SP, #+12]
   \   00000014   9835               ADD         R5,#+152
   \   00000016   0026               MOV         R6,#+0
   \   00000018   0027               MOV         R7,#+0
   \   0000001A   AB48               LDR         R0,??circle_step_1  ;; turn_accel_flag + 44
   \   0000001C   0068               LDR         R0,[R0, #+0]
   \   0000001E   0128               CMP         R0,#+1
   \   00000020   35D1               BNE         ??circle_step_2
    593          	static double init_theta,init_position[2],circle_angle;
    594          
    595          	if (first_entry_circle == 1)
    596              {
    597          		com_position[0] = 0.0;
   \   00000022   C0C5               STMIA       R5!,{R6,R7}
   \   00000024   083D               SUB         R5,#+8
    598          		com_position[1] = 0.0;
   \   00000026   281C               MOV         R0,R5
   \   00000028   0830               ADD         R0,#+8
   \   0000002A   C0C0               STMIA       R0!,{R6,R7}
    599          		com_position[2] = 0.0;
   \   0000002C   281C               MOV         R0,R5
   \   0000002E   1030               ADD         R0,#+16
   \   00000030   C0C0               STMIA       R0!,{R6,R7}
    600          		com_velocity[2] = _helix_velocity;
   \   00000032   0BA8               ADD         R0,SP,#+44
   \   00000034   03C8               LDMIA       R0!,{R0,R1}
   \   00000036   A067               STR         R0,[R4, #+120]
   \   00000038   E167               STR         R1,[R4, #+124]
    601                  
    602                  com_velocity[0] = _circle_velocity; //ÏßËÙ¶È³õÊ¼»¯
   \   0000003A   04A8               ADD         R0,SP,#+16
   \   0000003C   03C8               LDMIA       R0!,{R0,R1}
   \   0000003E   A066               STR         R0,[R4, #+104]
   \   00000040   E166               STR         R1,[R4, #+108]
    603                  com_pqr[2] = com_velocity[0]/_radius;       //º½Ïò½ÇËÙ¶È³õÊ¼»¯
   \   00000042   2A1C               MOV         R2,R5
   \   00000044   2832               ADD         R2,#+40
   \   00000046   04B4               PUSH        {R2}
   \   00000048   A06E               LDR         R0,[R4, #+104]
   \   0000004A   E16E               LDR         R1,[R4, #+108]
   \   0000004C   01AA               ADD         R2,SP,#+4
   \   0000004E   0CCA               LDMIA       R2!,{R2,R3}
   \   00000050   ........           _BLF        __dDiv,??__dDiv??rT
   \   00000054   04BC               POP         {R2}
   \   00000056   03C2               STMIA       R2!,{R0,R1}
    604                  position_t->heading = ahrs_theta[2];	  //º½Ïò½Ç³õÊ¼»¯
   \   00000058   ....               LDR         R2,??DataTable46   ;; ahrs_theta
   \   0000005A   E369               LDR         R3,[R4, #+28]
   \   0000005C   C033               ADD         R3,#+192
   \   0000005E   101C               MOV         R0,R2
   \   00000060   1030               ADD         R0,#+16
   \   00000062   03C8               LDMIA       R0!,{R0,R1}
   \   00000064   03C3               STMIA       R3!,{R0,R1}
    605          
    606          		circle_angle = 0.0;                    //Ô²»¡×ª½Ç£¬ÉÈÐÎ½Ç
   \   00000066   9948               LDR         R0,??circle_step_1+0x4  ;; turn_accel_flag + 36
   \   00000068   C0C0               STMIA       R0!,{R6,R7}
    607                  init_theta = ahrs_theta[2];           //³õÊ¼º½Ïò½Ç     
   \   0000006A   994B               LDR         R3,??circle_step_1+0x8  ;; turn_accel_flag + 28
   \   0000006C   1032               ADD         R2,#+16
   \   0000006E   03CA               LDMIA       R2!,{R0,R1}
   \   00000070   03C3               STMIA       R3!,{R0,R1}
    608                  init_position[0] = position_t->current_xyz[0]; //³õÊ¼Î»ÖÃ
   \   00000072   984A               LDR         R2,??circle_step_1+0xC  ;; turn_accel_flag + 4
   \   00000074   E069               LDR         R0,[R4, #+28]
   \   00000076   03C8               LDMIA       R0!,{R0,R1}
   \   00000078   03C2               STMIA       R2!,{R0,R1}
    609                  init_position[1] = position_t->current_xyz[1];
   \   0000007A   E069               LDR         R0,[R4, #+28]
   \   0000007C   0830               ADD         R0,#+8
   \   0000007E   03C8               LDMIA       R0!,{R0,R1}
   \   00000080   03C2               STMIA       R2!,{R0,R1}
    610                  position_t->current_target[2] = next_target[2];
   \   00000082   E269               LDR         R2,[R4, #+28]
   \   00000084   B832               ADD         R2,#+184
   \   00000086   201C               MOV         R0,R4
   \   00000088   3030               ADD         R0,#+48
   \   0000008A   03C8               LDMIA       R0!,{R0,R1}
   \   0000008C   03C2               STMIA       R2!,{R0,R1}
    611              }
    612          
    613          		circle_angle += com_pqr[2]*dt;	
   \                     ??circle_step_2:
   \   0000008E   281C               MOV         R0,R5
   \   00000090   2830               ADD         R0,#+40
   \   00000092   0CC8               LDMIA       R0!,{R2,R3}
   \   00000094   ....               LDR         R0,??DataTable61   ;; 0x37f38c54
   \   00000096   ....               LDR         R1,??DataTable62   ;; 0x3fa110a1
   \   00000098   ........           _BLF        __dMul,??__dMul??rT
   \   0000009C   021C               MOV         R2,R0
   \   0000009E   0B1C               MOV         R3,R1
   \   000000A0   8A48               LDR         R0,??circle_step_1+0x4  ;; turn_accel_flag + 36
   \   000000A2   03C8               LDMIA       R0!,{R0,R1}
   \   000000A4   ........           _BLF        __dAdd,??__dAdd??rT
   \   000000A8   884A               LDR         R2,??circle_step_1+0x4  ;; turn_accel_flag + 36
   \   000000AA   03C2               STMIA       R2!,{R0,R1}
    614          		if (circle_angle >= _angle)
   \   000000AC   0DAA               ADD         R2,SP,#+52
   \   000000AE   0CCA               LDMIA       R2!,{R2,R3}
   \   000000B0   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   000000B4   0028               CMP         R0,#+0
   \   000000B6   1BD0               BEQ         ??circle_step_3
    615          		{
    616          			for(int i =0 ; i!= 3 ;  ++i)
   \   000000B8   0020               MOV         R0,#+0
    617              		{ 
    618                  		com_position[i] = 0.0;
   \                     ??circle_step_4:
   \   000000BA   C100               LSL         R1,R0,#+3
   \   000000BC   6A18               ADD         R2,R5,R1
   \   000000BE   C0C2               STMIA       R2!,{R6,R7}
    619                  		com_pqr[i]      = 0.0; 
   \   000000C0   2A1C               MOV         R2,R5
   \   000000C2   1832               ADD         R2,#+24
   \   000000C4   5218               ADD         R2,R2,R1
   \   000000C6   C0C2               STMIA       R2!,{R6,R7}
    620                  		com_theta[i]    = 0.0;
   \   000000C8   2A1C               MOV         R2,R5
   \   000000CA   3032               ADD         R2,#+48
   \   000000CC   5218               ADD         R2,R2,R1
   \   000000CE   C0C2               STMIA       R2!,{R6,R7}
    621                  
    622                  		top_speed[i] = 0.0;
   \   000000D0   039A               LDR         R2,[SP, #+12]
   \   000000D2   5218               ADD         R2,R2,R1
   \   000000D4   C0C2               STMIA       R2!,{R6,R7}
    623                  		how_long[i] = 0.0;
   \   000000D6   6118               ADD         R1,R4,R1
   \   000000D8   C0C1               STMIA       R1!,{R6,R7}
    624              		}
   \   000000DA   401C               ADD         R0,R0,#+1
   \   000000DC   0328               CMP         R0,#+3
   \   000000DE   ECD1               BNE         ??circle_step_4
    625          			circle_finish_flag = true;
   \   000000E0   ....               LDR         R0,??DataTable49   ;; turn_accel_flag + 1
   \   000000E2   0121               MOV         R1,#+1
   \   000000E4   0170               STRB        R1,[R0, #+0]
    626          			first_entry_circle = 1;
   \   000000E6   7848               LDR         R0,??circle_step_1  ;; turn_accel_flag + 44
   \   000000E8   0160               STR         R1,[R0, #+0]
    627          			heli_step = 8;//Ô²»¡½áÊø£¬Èç¹ûÃ»ÓÐ¸üÐÂÏÂ¸öÄ¿±êµã£¬ÔòÄ¬ÈÏÉ²³µÄ£Ê½¡£
   \   000000EA   0820               MOV         R0,#+8
   \   000000EC   A864               STR         R0,[R5, #+72]
    628          			return;
   \   000000EE   E9E0               B           ??circle_step_5
    629          		}
   \                     ??circle_step_3:
   \   000000F0   9A20               MOV         R0,#+154
   \   000000F2   4000               LSL         R0,R0,#+1          ;; #+308
   \   000000F4   0399               LDR         R1,[SP, #+12]
   \   000000F6   0818               ADD         R0,R1,R0
   \   000000F8   0290               STR         R0,[SP, #+8]
   \   000000FA   0068               LDR         R0,[R0, #+0]
   \   000000FC   0128               CMP         R0,#+1
   \   000000FE   65D1               BNE         ??circle_step_6
    630          		
    631          		if (circle_turn == 1)//Ë³Ê±Õë×ª
    632          		{
    633          			position_t->heading += com_pqr[2]*dt;
   \   00000100   E669               LDR         R6,[R4, #+28]
   \   00000102   C036               ADD         R6,#+192
   \   00000104   281C               MOV         R0,R5
   \   00000106   2830               ADD         R0,#+40
   \   00000108   0CC8               LDMIA       R0!,{R2,R3}
   \   0000010A   ....               LDR         R0,??DataTable61   ;; 0x37f38c54
   \   0000010C   ....               LDR         R1,??DataTable62   ;; 0x3fa110a1
   \   0000010E   ........           _BLF        __dMul,??__dMul??rT
   \   00000112   021C               MOV         R2,R0
   \   00000114   0B1C               MOV         R3,R1
   \   00000116   E069               LDR         R0,[R4, #+28]
   \   00000118   C030               ADD         R0,#+192
   \   0000011A   03C8               LDMIA       R0!,{R0,R1}
   \   0000011C   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000120   03C6               STMIA       R6!,{R0,R1}
    634          			if (position_t->heading > PI)
   \   00000122   E069               LDR         R0,[R4, #+28]
   \   00000124   C030               ADD         R0,#+192
   \   00000126   03C8               LDMIA       R0!,{R0,R1}
   \   00000128   6B4A               LDR         R2,??circle_step_1+0x10  ;; 0x53c8d4f2
   \   0000012A   ....               LDR         R3,??DataTable52   ;; 0x400921fb
   \   0000012C   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000130   0028               CMP         R0,#+0
   \   00000132   09D0               BEQ         ??circle_step_7
    635          			{
    636                  		position_t->heading -= 2*PI;
   \   00000134   E669               LDR         R6,[R4, #+28]
   \   00000136   C036               ADD         R6,#+192
   \   00000138   E069               LDR         R0,[R4, #+28]
   \   0000013A   C030               ADD         R0,#+192
   \   0000013C   0CC8               LDMIA       R0!,{R2,R3}
   \   0000013E   ....               LDR         R0,??DataTable59   ;; 0x53c8d4f1
   \   00000140   ....               LDR         R1,??DataTable54   ;; 0xc01921fb
   \   00000142   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000146   03C6               STMIA       R6!,{R0,R1}
    637          			}
    638          			position_t->current_target[0] = init_position[0]+_radius*(-sin(init_theta)+sin(position_t->heading));
   \                     ??circle_step_7:
   \   00000148   0022               MOV         R2,#+0
   \   0000014A   6148               LDR         R0,??circle_step_1+0x8  ;; turn_accel_flag + 28
   \   0000014C   03C8               LDMIA       R0!,{R0,R1}
   \   0000014E   ........           _BLF        _Sin,??_Sin??rT
   \   00000152   061C               MOV         R6,R0
   \   00000154   0F1C               MOV         R7,R1
   \   00000156   0022               MOV         R2,#+0
   \   00000158   E069               LDR         R0,[R4, #+28]
   \   0000015A   C030               ADD         R0,#+192
   \   0000015C   03C8               LDMIA       R0!,{R0,R1}
   \   0000015E   ........           _BLF        _Sin,??_Sin??rT
   \   00000162   321C               MOV         R2,R6
   \   00000164   3B1C               MOV         R3,R7
   \   00000166   ........           _BLF        __dSub,??__dSub??rT
   \   0000016A   021C               MOV         R2,R0
   \   0000016C   0B1C               MOV         R3,R1
   \   0000016E   6846               MOV         R0,SP
   \   00000170   03C8               LDMIA       R0!,{R0,R1}
   \   00000172   ........           _BLF        __dMul,??__dMul??rT
   \   00000176   021C               MOV         R2,R0
   \   00000178   0B1C               MOV         R3,R1
   \   0000017A   5648               LDR         R0,??circle_step_1+0xC  ;; turn_accel_flag + 4
   \   0000017C   03C8               LDMIA       R0!,{R0,R1}
   \   0000017E   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000182   E269               LDR         R2,[R4, #+28]
   \   00000184   A832               ADD         R2,#+168
   \   00000186   03C2               STMIA       R2!,{R0,R1}
    639              		position_t->current_target[1] = init_position[1]+_radius*(cos(init_theta)-cos(position_t->heading));		
   \   00000188   0122               MOV         R2,#+1
   \   0000018A   5148               LDR         R0,??circle_step_1+0x8  ;; turn_accel_flag + 28
   \   0000018C   03C8               LDMIA       R0!,{R0,R1}
   \   0000018E   ........           _BLF        _Sin,??_Sin??rT
   \   00000192   061C               MOV         R6,R0
   \   00000194   0F1C               MOV         R7,R1
   \   00000196   0122               MOV         R2,#+1
   \   00000198   E069               LDR         R0,[R4, #+28]
   \   0000019A   C030               ADD         R0,#+192
   \   0000019C   03C8               LDMIA       R0!,{R0,R1}
   \   0000019E   ........           _BLF        _Sin,??_Sin??rT
   \   000001A2   021C               MOV         R2,R0
   \   000001A4   0B1C               MOV         R3,R1
   \   000001A6   301C               MOV         R0,R6
   \   000001A8   391C               MOV         R1,R7
   \   000001AA   ........           _BLF        __dSub,??__dSub??rT
   \   000001AE   021C               MOV         R2,R0
   \   000001B0   0B1C               MOV         R3,R1
   \   000001B2   6846               MOV         R0,SP
   \   000001B4   03C8               LDMIA       R0!,{R0,R1}
   \   000001B6   ........           _BLF        __dMul,??__dMul??rT
   \   000001BA   021C               MOV         R2,R0
   \   000001BC   0B1C               MOV         R3,R1
   \   000001BE   4748               LDR         R0,??circle_step_1+0x14  ;; turn_accel_flag + 12
   \   000001C0   03C8               LDMIA       R0!,{R0,R1}
   \   000001C2   ........           _BLF        __dAdd,??__dAdd??rT
   \   000001C6   E269               LDR         R2,[R4, #+28]
   \   000001C8   B032               ADD         R2,#+176
   \   000001CA   03C2               STMIA       R2!,{R0,R1}
    640                  	
    641          			//com_theta[0] = atan2((com_velocity[0]*com_pqr[2]),accel_g);//rollÈÆÔ²Çã½Ç		
    642          		}
    643          		if (circle_turn == 2)//ÄæÊ±Õë×ª
   \                     ??circle_step_6:
   \   000001CC   0298               LDR         R0,[SP, #+8]
   \   000001CE   0068               LDR         R0,[R0, #+0]
   \   000001D0   0228               CMP         R0,#+2
   \   000001D2   5CD1               BNE         ??circle_step_8
    644          		{
    645          			position_t->heading -= com_pqr[2]*dt;
   \   000001D4   E669               LDR         R6,[R4, #+28]
   \   000001D6   C036               ADD         R6,#+192
   \   000001D8   2835               ADD         R5,#+40
   \   000001DA   0CCD               LDMIA       R5!,{R2,R3}
   \   000001DC   ....               LDR         R0,??DataTable61   ;; 0x37f38c54
   \   000001DE   ....               LDR         R1,??DataTable62   ;; 0x3fa110a1
   \   000001E0   ........           _BLF        __dMul,??__dMul??rT
   \   000001E4   021C               MOV         R2,R0
   \   000001E6   0B1C               MOV         R3,R1
   \   000001E8   E069               LDR         R0,[R4, #+28]
   \   000001EA   C030               ADD         R0,#+192
   \   000001EC   03C8               LDMIA       R0!,{R0,R1}
   \   000001EE   ........           _BLF        __dSub,??__dSub??rT
   \   000001F2   03C6               STMIA       R6!,{R0,R1}
    646          			if (position_t->heading < -PI)
   \   000001F4   E069               LDR         R0,[R4, #+28]
   \   000001F6   C030               ADD         R0,#+192
   \   000001F8   03C8               LDMIA       R0!,{R0,R1}
   \   000001FA   ....               LDR         R2,??DataTable59   ;; 0x53c8d4f1
   \   000001FC   ....               LDR         R3,??DataTable58   ;; 0xc00921fb
   \   000001FE   ........           _BLF        __dLess,??__dLess??rT
   \   00000202   0028               CMP         R0,#+0
   \   00000204   09D0               BEQ         ??circle_step_9
    647          			{
    648                  		position_t->heading += 2*PI;
   \   00000206   E569               LDR         R5,[R4, #+28]
   \   00000208   C035               ADD         R5,#+192
   \   0000020A   E069               LDR         R0,[R4, #+28]
   \   0000020C   C030               ADD         R0,#+192
   \   0000020E   0CC8               LDMIA       R0!,{R2,R3}
   \   00000210   ....               LDR         R0,??DataTable59   ;; 0x53c8d4f1
   \   00000212   ....               LDR         R1,??DataTable60   ;; 0x401921fb
   \   00000214   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000218   03C5               STMIA       R5!,{R0,R1}
    649          			}
    650          			position_t->current_target[0] = init_position[0]+_radius*(sin(init_theta)-sin(position_t->heading));
   \                     ??circle_step_9:
   \   0000021A   0022               MOV         R2,#+0
   \   0000021C   2C48               LDR         R0,??circle_step_1+0x8  ;; turn_accel_flag + 28
   \   0000021E   03C8               LDMIA       R0!,{R0,R1}
   \   00000220   ........           _BLF        _Sin,??_Sin??rT
   \   00000224   061C               MOV         R6,R0
   \   00000226   0F1C               MOV         R7,R1
   \   00000228   0022               MOV         R2,#+0
   \   0000022A   E069               LDR         R0,[R4, #+28]
   \   0000022C   C030               ADD         R0,#+192
   \   0000022E   03C8               LDMIA       R0!,{R0,R1}
   \   00000230   ........           _BLF        _Sin,??_Sin??rT
   \   00000234   021C               MOV         R2,R0
   \   00000236   0B1C               MOV         R3,R1
   \   00000238   301C               MOV         R0,R6
   \   0000023A   391C               MOV         R1,R7
   \   0000023C   ........           _BLF        __dSub,??__dSub??rT
   \   00000240   6A46               MOV         R2,SP
   \   00000242   0CCA               LDMIA       R2!,{R2,R3}
   \   00000244   ........           _BLF        __dMul,??__dMul??rT
   \   00000248   224A               LDR         R2,??circle_step_1+0xC  ;; turn_accel_flag + 4
   \   0000024A   0CCA               LDMIA       R2!,{R2,R3}
   \   0000024C   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000250   E269               LDR         R2,[R4, #+28]
   \   00000252   A832               ADD         R2,#+168
   \   00000254   03C2               STMIA       R2!,{R0,R1}
    651              		position_t->current_target[1] = init_position[1]+_radius*(-cos(init_theta)+cos(position_t->heading));		
   \   00000256   0122               MOV         R2,#+1
   \   00000258   1D48               LDR         R0,??circle_step_1+0x8  ;; turn_accel_flag + 28
   \   0000025A   03C8               LDMIA       R0!,{R0,R1}
   \   0000025C   ........           _BLF        _Sin,??_Sin??rT
   \   00000260   061C               MOV         R6,R0
   \   00000262   0F1C               MOV         R7,R1
   \   00000264   0122               MOV         R2,#+1
   \   00000266   E069               LDR         R0,[R4, #+28]
   \   00000268   C030               ADD         R0,#+192
   \   0000026A   03C8               LDMIA       R0!,{R0,R1}
   \   0000026C   ........           _BLF        _Sin,??_Sin??rT
   \   00000270   321C               MOV         R2,R6
   \   00000272   3B1C               MOV         R3,R7
   \   00000274   ........           _BLF        __dSub,??__dSub??rT
   \   00000278   6A46               MOV         R2,SP
   \   0000027A   0CCA               LDMIA       R2!,{R2,R3}
   \   0000027C   ........           _BLF        __dMul,??__dMul??rT
   \   00000280   164A               LDR         R2,??circle_step_1+0x14  ;; turn_accel_flag + 12
   \   00000282   0CCA               LDMIA       R2!,{R2,R3}
   \   00000284   ........           _BLF        __dAdd,??__dAdd??rT
   \   00000288   E269               LDR         R2,[R4, #+28]
   \   0000028A   B032               ADD         R2,#+176
   \   0000028C   03C2               STMIA       R2!,{R0,R1}
    652          		
    653          			//com_theta[0] = -atan2((com_velocity[0]*com_pqr[2]),accel_g);//rollÈÆÔ²Çã½Ç
    654          		}		
    655              	
    656          		position_t->current_target[2] -= com_velocity[2]*dt ;
   \                     ??circle_step_8:
   \   0000028E   E569               LDR         R5,[R4, #+28]
   \   00000290   B835               ADD         R5,#+184
   \   00000292   A26F               LDR         R2,[R4, #+120]
   \   00000294   E36F               LDR         R3,[R4, #+124]
   \   00000296   ....               LDR         R0,??DataTable61   ;; 0x37f38c54
   \   00000298   ....               LDR         R1,??DataTable62   ;; 0x3fa110a1
   \   0000029A   ........           _BLF        __dMul,??__dMul??rT
   \   0000029E   021C               MOV         R2,R0
   \   000002A0   0B1C               MOV         R3,R1
   \   000002A2   E069               LDR         R0,[R4, #+28]
   \   000002A4   B830               ADD         R0,#+184
   \   000002A6   03C8               LDMIA       R0!,{R0,R1}
   \   000002A8   ........           _BLF        __dSub,??__dSub??rT
   \   000002AC   03C5               STMIA       R5!,{R0,R1}
    657          		//com_pqr[1] = com_pqr[2]*cos(com_theta[0]);//pitchÈÆÔ²½ÇËÙ¶È
    658          	
    659          	first_entry_circle ++;
   \   000002AE   0648               LDR         R0,??circle_step_1  ;; turn_accel_flag + 44
   \   000002B0   0068               LDR         R0,[R0, #+0]
   \   000002B2   401C               ADD         R0,R0,#+1
   \   000002B4   0449               LDR         R1,??circle_step_1  ;; turn_accel_flag + 44
   \   000002B6   0860               STR         R0,[R1, #+0]
    660              if(first_entry_circle >= 10000)
   \   000002B8   ....               LDR         R1,??DataTable63   ;; 0x2710
   \   000002BA   8842               CMP         R0,R1
   \   000002BC   02DB               BLT         ??circle_step_5
    661                first_entry_circle = 200;
   \   000002BE   0248               LDR         R0,??circle_step_1  ;; turn_accel_flag + 44
   \   000002C0   C821               MOV         R1,#+200
   \   000002C2   0160               STR         R1,[R0, #+0]
   \                     ??circle_step_5:
   \   000002C4   06B0               ADD         SP,#+24
   \   000002C6   ....               B           ??Subroutine26_0
   \                     ??circle_step_1:
   \   000002C8   ........           DC32        turn_accel_flag + 44
   \   000002CC   ........           DC32        turn_accel_flag + 36
   \   000002D0   ........           DC32        turn_accel_flag + 28
   \   000002D4   ........           DC32        turn_accel_flag + 4
   \   000002D8   F2D4C853           DC32        0x53c8d4f2
   \   000002DC   ........           DC32        turn_accel_flag + 12
    662          }

   \                                 In segment DATA_I, align 4, align-sorted
   \                     turn_accel_flag:
   \   00000000                      DS8 1
   \   00000001                      REQUIRE `?<Initializer for turn_accel_flag>`
   \                     circle_finish_flag:
   \   00000001                      DS8 1
   \   00000002                      REQUIRE `?<Initializer for circle_finish_flag>`
   \                     Mixture_to_Pointtopoint_flag:
   \   00000002                      DS8 1
   \   00000003                      REQUIRE `?<Initializer for Mixture_to_Pointtopoint_flag`
   \   00000003                      DS8 1
   \   00000004                      DS8 16
   \   00000014                      REQUIRE `?<Initializer for init_position>`
   \                     init_velocity_on_circle:
   \   00000014                      DS8 8
   \   0000001C                      REQUIRE `?<Initializer for init_velocity_on_circle>`
   \   0000001C                      DS8 8
   \   00000024                      REQUIRE `?<Initializer for init_theta>`
   \   00000024                      DS8 8
   \   0000002C                      REQUIRE `?<Initializer for circle_angle>`
   \                     first_entry_circle:
   \   0000002C                      DS8 4
   \   00000030                      REQUIRE `?<Initializer for first_entry_circle>`
   \                     turn_accel:
   \   00000030                      DS8 4
   \   00000034                      REQUIRE `?<Initializer for turn_accel>`
    663          /****************************************************************
    664           *º¯ Êý Ãû: void Trajectory::speed_up_and_down_step(double *velocity_array)
    665           *²Î    Êý: *velocity_array  Ö¸Ïò¹æ»®Ö±Ïß¼Ó¼õËÙÖÐËÙÂÊÊý×éÍ·µØÖ·£¬Ô­µãÄ¬ÈÏÎª0
    666           *                 
    667           *
    668           *¹¦    ÄÜ£ºÖ§³ÖÂ·¾¶¹æ»®Ö±Ïß¼Ó¼õËÙ£¬±¾ÎÄ¼þÈ«¾ÖÊý×é±äÁ¿speed_up_down_velocity
    669           *			Îª¸÷µãËÙÂÊ¼¯ºÏ£¬Ô­µãºÍÖÕµãÄ¬ÈÏÎªÁã
    670           *                  
    671           *
    672           *·µ »Ø Öµ: ÔÝÎÞ
    673           *                
    674           *
    675           *×÷    Õß£ºÎâÒã±ò
    676           *Íê³ÉÈÕÆÚ£º2012-11-15
    677           ****************************************************************/
    678          /*
    679          void Trajectory::speed_up_and_down_step(double *velocity_array)
    680          {
    681          	//double velocity1 = 0, velocity2 = 0;
    682          	
    683          	ps_velocity = velocity_array;
    684              
    685          	if (num == speed_count)
    686          	{
    687          		if (*ps_velocity < *(ps_velocity+1))
    688          		{
    689          			how_long[0] = 0.25*(*(ps_velocity+1)-*ps_velocity)
    690          							  *(*(ps_velocity+1)-*ps_velocity);
    691              		speed_count += (*(ps_velocity+1)-*ps_velocity)*30/ACCEL;
    692          		}
    693          		else
    694          		{
    695          			how_long[0] = 0.25*(*ps_velocity-*(ps_velocity+1))
    696          							  *(*ps_velocity-*(ps_velocity+1));
    697              		speed_count += (*ps_velocity-*(ps_velocity+1))*30/ACCEL;
    698          			
    699          		}
    700          	   
    701              position_t->current_target[0] += how_long[0]*cos(position_t->heading);
    702          	position_t->current_target[1] += how_long[0]*sin(position_t->heading);
    703          	position_t->current_target[2] = hover_xyz[2];
    704          	
    705          	ps_velocity++;
    706          	}
    707          	
    708              if (num < speed_count)
    709              {   
    710          		//velocity1 = (*ps_velocity) > *(ps_velocity-1) ? *ps_velocity : *(ps_velocity-1);//High value speed
    711          		//velocity2 = (*ps_velocity) < *(ps_velocity-1) ? *ps_velocity : *(ps_velocity-1);//low value speed
    712                  
    713                  if (com_velocity[0] < *ps_velocity)
    714          		{
    715          			com_velocity[0] += ACCEL*dt;
    716          		}
    717          		else
    718          		{
    719                   	com_velocity[0] -= ACCEL*dt;	
    720          		}
    721          		
    722          		
    723               	how_long[0] -= com_velocity[0]*dt; 
    724          	    com_position[0]= -how_long[0];
    725          		climbing_step();
    726          	}	
    727          	num++;     
    728          }
    729          */

   \                                 In segment CODE, align 4, keep-with-next
    730          void Trajectory::step(int trajectory_mode)
    731          {
   \                     ??step:
   \   00000000   00B5               PUSH        {LR}
    732              switch (trajectory_mode)
   \   00000002   0429               CMP         R1,#+4
   \   00000004   14D8               BHI         ??step_2
   \   00000006   01A2               ADR         R2,??step_1
   \   00000008   525C               LDRB        R2,[R2, R1]
   \   0000000A   9744               ADD         PC,R2
   \                     ??step_1:
   \   0000000C   040A1016           DC8         +4,+10,+16,+22
   \   00000010   1C00               DC8         +28,+0
    733          	{
    734          		case Hover : Hover_Mode_Step();//ÐüÍ£Ä£Ê½
   \                     ??step_3:
   \   00000012   ........           BL          ??Hover_Mode_Step
   \   00000016   0DE0               B           ??step_4
    735          					 break;
    736          				 
    737          		case Point_to_point : Point_to_point_Mode_Step();//µã¶ÔµãÄ£Ê½
   \                     ??step_5:
   \   00000018   ........           BL          ??Point_to_point_Mode_Step
   \   0000001C   0AE0               B           ??step_4
    738          							  break;
    739          				 
    740          		case Circle : Circle_Mode_Step();//·ÉÔ²Ä£Ê½
   \                     ??step_6:
   \   0000001E   ........           BL          ??Circle_Mode_Step
   \   00000022   07E0               B           ??step_4
    741          					  break;
    742          				 
    743          		case Mixture : Mixture_Mode_Step();//»ìºÏÄ£Ê½
   \                     ??step_7:
   \   00000024   ........           BL          ??Mixture_Mode_Step
   \   00000028   04E0               B           ??step_4
    744          			 		   break; 
    745          				 
    746          		case Test : Test_Mode_Step();//²âÊÔÄ£Ê½
   \                     ??step_8:
   \   0000002A   ........           BL          ??Test_Mode_Step
   \   0000002E   01E0               B           ??step_4
    747          			 		break;
    748          				 
    749          		default : brake_down_step();	//É²³µ
   \                     ??step_2:
   \   00000030   ........           BL          ??brake_down_step
    750          				  break;
    751          		
    752          	}
    753          }
   \                     ??step_4:
   \   00000034   01BC               POP         {R0}
   \   00000036   0047               BX          R0                 ;; return
    754          

   \                                 In segment CODE, align 4, keep-with-next
    755          void Trajectory::Hover_Mode_Step()
    756          {
   \                     ??Hover_Mode_Step:
   \   00000000   10B5               PUSH        {R4,LR}
   \   00000002   041C               MOV         R4,R0
    757             	if (heli_step == 1) 
   \   00000004   E020               MOV         R0,#+224
   \   00000006   2058               LDR         R0,[R4, R0]
   \   00000008   0128               CMP         R0,#+1
   \   0000000A   02D1               BNE         ??Hover_Mode_Step_1
    758                	hover_step();
   \   0000000C   201C               MOV         R0,R4
   \   0000000E   ........           BL          ??hover_step
    759          	if (hover_time <= 0)
   \                     ??Hover_Mode_Step_1:
   \   00000012   206E               LDR         R0,[R4, #+96]
   \   00000014   616E               LDR         R1,[R4, #+100]
   \   00000016   0122               MOV         R2,#+1
   \   00000018   0023               MOV         R3,#+0
   \   0000001A   ........           _BLF        __dLess,??__dLess??rT
   \   0000001E   0028               CMP         R0,#+0
   \   00000020   03D0               BEQ         ??Hover_Mode_Step_2
    760          		hover_time = FLY_TIME;
   \   00000022   6034               ADD         R4,#+96
   \   00000024   0020               MOV         R0,#+0
   \   00000026   ....               LDR         R1,??DataTable64   ;; 0x40cf4000
   \   00000028   03C4               STMIA       R4!,{R0,R1}
    761          }
   \                     ??Hover_Mode_Step_2:
   \   0000002A   10BC               POP         {R4}
   \   0000002C   01BC               POP         {R0}
   \   0000002E   0047               BX          R0                 ;; return
    762          

   \                                 In segment CODE, align 4, keep-with-next
    763          void Trajectory::Point_to_point_Mode_Step()
    764          {
   \                     ??Point_to_point_Mode_Step:
   \   00000000   70B5               PUSH        {R4-R6,LR}
   \   00000002   041C               MOV         R4,R0
    765          	if (target_update(Point_to_point))					// ÅÐ¶ÏÊÇ·ñ¸üÐÂnext_target
   \   00000004   051C               MOV         R5,R0
   \   00000006   E035               ADD         R5,#+224
   \   00000008   0126               MOV         R6,#+1
   \   0000000A   0121               MOV         R1,#+1
   \   0000000C   ........           BL          ??target_update
   \   00000010   0028               CMP         R0,#+0
   \   00000012   2FD0               BEQ         ??Point_to_point_Mode_Step_1
    766          	{	
    767              	schedule(MAX_COM_SPEED, Point_to_point);		// ¶Ônext_target½øÐÐ¹æ»®
   \   00000014   0122               MOV         R2,#+1
   \   00000016   1421               MOV         R1,#+20
   \   00000018   201C               MOV         R0,R4
   \   0000001A   ........           BL          ??schedule
    768          		if (how_long[0] > BOUNDARY_DISTANCE)
   \   0000001E   201C               MOV         R0,R4
   \   00000020   1830               ADD         R0,#+24
   \   00000022   03C8               LDMIA       R0!,{R0,R1}
   \   00000024   321C               MOV         R2,R6
   \   00000026   ....               LDR         R3,??DataTable66   ;; 0x40200000
   \   00000028   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   0000002C   0028               CMP         R0,#+0
   \   0000002E   06D0               BEQ         ??Point_to_point_Mode_Step_2
    769               	{
    770                    	turn_heading(&end_heading);
   \   00000030   211C               MOV         R1,R4
   \   00000032   5831               ADD         R1,#+88
   \   00000034   201C               MOV         R0,R4
   \   00000036   ........           BL          ??turn_heading
    771                    	heli_step = 2;
   \   0000003A   0220               MOV         R0,#+2
   \   0000003C   2860               STR         R0,[R5, #+0]
    772                	}
    773               	if (how_long[0] <= BOUNDARY_DISTANCE)
   \                     ??Point_to_point_Mode_Step_2:
   \   0000003E   201C               MOV         R0,R4
   \   00000040   1830               ADD         R0,#+24
   \   00000042   03C8               LDMIA       R0!,{R0,R1}
   \   00000044   0122               MOV         R2,#+1
   \   00000046   ....               LDR         R3,??DataTable66   ;; 0x40200000
   \   00000048   ........           _BLF        __dLess,??__dLess??rT
   \   0000004C   0028               CMP         R0,#+0
   \   0000004E   11D0               BEQ         ??Point_to_point_Mode_Step_1
    774                	{
    775                    	position_t->current_target_update(next_target);
   \   00000050   211C               MOV         R1,R4
   \   00000052   3831               ADD         R1,#+56
   \   00000054   606B               LDR         R0,[R4, #+52]
   \   00000056   ........           BL          ??current_target_update
    776                    	position_t->heading = ahrs_theta[2];
   \   0000005A   ....               LDR         R2,??DataTable72   ;; ahrs_theta
   \   0000005C   636B               LDR         R3,[R4, #+52]
   \   0000005E   C033               ADD         R3,#+192
   \   00000060   101C               MOV         R0,R2
   \   00000062   1030               ADD         R0,#+16
   \   00000064   03C8               LDMIA       R0!,{R0,R1}
   \   00000066   03C3               STMIA       R3!,{R0,R1}
    777                    	end_heading = ahrs_theta[2]; 
   \   00000068   1032               ADD         R2,#+16
   \   0000006A   03CA               LDMIA       R2!,{R0,R1}
   \   0000006C   A065               STR         R0,[R4, #+88]
   \   0000006E   E165               STR         R1,[R4, #+92]
    778                    	heli_step = 1;
   \   00000070   2E60               STR         R6,[R5, #+0]
   \   00000072   02E0               B           ??Point_to_point_Mode_Step_3
    779                	} 
    780          	}	
    781             	if (heli_step == 1)
   \                     ??Point_to_point_Mode_Step_1:
   \   00000074   2868               LDR         R0,[R5, #+0]
   \   00000076   0128               CMP         R0,#+1
   \   00000078   02D1               BNE         ??Point_to_point_Mode_Step_4
    782          	{	
    783                	hover_step();//ÐüÍ£
   \                     ??Point_to_point_Mode_Step_3:
   \   0000007A   201C               MOV         R0,R4
   \   0000007C   ........           BL          ??hover_step
    784          	}
    785             	if (heli_step == 2)
   \                     ??Point_to_point_Mode_Step_4:
   \   00000080   2868               LDR         R0,[R5, #+0]
   \   00000082   0228               CMP         R0,#+2
   \   00000084   16D1               BNE         ??Point_to_point_Mode_Step_5
    786          	{
    787                	turning_head_step();   //×ªÏò
   \   00000086   201C               MOV         R0,R4
   \   00000088   ........           BL          ??turning_head_step
    788          		
    789          		if(turn_accel_flag==true)
   \   0000008C   ....               LDR         R0,??DataTable70   ;; turn_accel_flag
   \   0000008E   0178               LDRB        R1,[R0, #+0]
   \   00000090   0029               CMP         R1,#+0
   \   00000092   02D0               BEQ         ??Point_to_point_Mode_Step_6
    790               	{
    791                 		turn_accel++;
   \   00000094   016B               LDR         R1,[R0, #+48]
   \   00000096   491C               ADD         R1,R1,#+1
   \   00000098   0163               STR         R1,[R0, #+48]
    792               	}
    793          		if(turn_accel==90)//3ÃëÖ®ºó Ç°·É
   \                     ??Point_to_point_Mode_Step_6:
   \   0000009A   016B               LDR         R1,[R0, #+48]
   \   0000009C   5A29               CMP         R1,#+90
   \   0000009E   09D1               BNE         ??Point_to_point_Mode_Step_5
    794               	{
    795                		turn_accel=0;
   \   000000A0   0021               MOV         R1,#+0
   \   000000A2   0163               STR         R1,[R0, #+48]
    796                		turn_accel_flag=false;
   \   000000A4   0170               STRB        R1,[R0, #+0]
    797                		heli_step = 3;
   \   000000A6   0320               MOV         R0,#+3
   \   000000A8   2860               STR         R0,[R5, #+0]
    798                		position_t->current_target_update(next_target);      
   \   000000AA   211C               MOV         R1,R4
   \   000000AC   3831               ADD         R1,#+56
   \   000000AE   606B               LDR         R0,[R4, #+52]
   \   000000B0   ........           BL          ??current_target_update
    799               	}
    800          	}
    801             	if (heli_step == 3)
   \                     ??Point_to_point_Mode_Step_5:
   \   000000B4   2868               LDR         R0,[R5, #+0]
   \   000000B6   0328               CMP         R0,#+3
   \   000000B8   1AD1               BNE         ??Point_to_point_Mode_Step_7
    802          	{
    803                	speed_up_step();        //¼ÓËÙ
   \   000000BA   201C               MOV         R0,R4
   \   000000BC   ........           BL          ??speed_up_step
    804          		if (how_long[0] <= 0.5*(top_speed[0]*top_speed[0])/ACCEL) //**ÓÉ2.0¸ÄÎª0.5,0,75****************
   \   000000C0   03CC               LDMIA       R4!,{R0,R1}
   \   000000C2   083C               SUB         R4,#+8
   \   000000C4   021C               MOV         R2,R0
   \   000000C6   0B1C               MOV         R3,R1
   \   000000C8   ........           _BLF        __dMul,??__dMul??rT
   \   000000CC   0022               MOV         R2,#+0
   \   000000CE   ....               LDR         R3,??DataTable71   ;; 0x3fe00000
   \   000000D0   ........           _BLF        __dMul,??__dMul??rT
   \   000000D4   0022               MOV         R2,#+0
   \   000000D6   B307               LSL         R3,R6,#+30
   \   000000D8   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000DC   221C               MOV         R2,R4
   \   000000DE   1832               ADD         R2,#+24
   \   000000E0   0CCA               LDMIA       R2!,{R2,R3}
   \   000000E2   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   000000E6   0028               CMP         R0,#+0
   \   000000E8   02D0               BEQ         ??Point_to_point_Mode_Step_7
    805               	  	heli_step = 4;
   \   000000EA   0420               MOV         R0,#+4
   \   000000EC   2860               STR         R0,[R5, #+0]
   \   000000EE   02E0               B           ??Point_to_point_Mode_Step_8
    806          	}
    807             	if (heli_step == 4)
   \                     ??Point_to_point_Mode_Step_7:
   \   000000F0   2868               LDR         R0,[R5, #+0]
   \   000000F2   0428               CMP         R0,#+4
   \   000000F4   11D1               BNE         ??Point_to_point_Mode_Step_9
    808          	{
    809                	speed_down_step();      //¼õËÙ
   \                     ??Point_to_point_Mode_Step_8:
   \   000000F6   201C               MOV         R0,R4
   \   000000F8   ........           BL          ??speed_down_step
    810          	    if (how_long[0] <= 0.0)
   \   000000FC   201C               MOV         R0,R4
   \   000000FE   1830               ADD         R0,#+24
   \   00000100   03C8               LDMIA       R0!,{R0,R1}
   \   00000102   0122               MOV         R2,#+1
   \   00000104   0023               MOV         R3,#+0
   \   00000106   ........           _BLF        __dLess,??__dLess??rT
   \   0000010A   0028               CMP         R0,#+0
   \   0000010C   05D0               BEQ         ??Point_to_point_Mode_Step_9
    811          		{
    812                  	how_long[0] = 0.0 ;
   \   0000010E   1834               ADD         R4,#+24
   \   00000110   0020               MOV         R0,#+0
   \   00000112   0021               MOV         R1,#+0
   \   00000114   03C4               STMIA       R4!,{R0,R1}
    813                  	heli_step = 1;
   \   00000116   2E60               STR         R6,[R5, #+0]
   \   00000118   05E0               B           ??Point_to_point_Mode_Step_10
    814              	}
    815          	}
    816          	if (heli_step == 8)
   \                     ??Point_to_point_Mode_Step_9:
   \   0000011A   2868               LDR         R0,[R5, #+0]
   \   0000011C   0828               CMP         R0,#+8
   \   0000011E   02D1               BNE         ??Point_to_point_Mode_Step_10
    817          	{	
    818          		brake_down_step();
   \   00000120   201C               MOV         R0,R4
   \   00000122   ........           BL          ??brake_down_step
    819          	}
    820          }
   \                     ??Point_to_point_Mode_Step_10:
   \   00000126   ....               B           ?Subroutine27
    821          

   \                                 In segment CODE, align 4, keep-with-next
    822          void Trajectory::Circle_Mode_Step()
    823          {
   \                     ??Circle_Mode_Step:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   061C               MOV         R6,R0
    824          	if (target_update(Circle))
   \   00000004   051C               MOV         R5,R0
   \   00000006   E035               ADD         R5,#+224
   \   00000008   071C               MOV         R7,R0
   \   0000000A   1837               ADD         R7,#+24
   \   0000000C   ....               LDR         R4,??DataTable70   ;; turn_accel_flag
   \   0000000E   0221               MOV         R1,#+2
   \   00000010   ........           BL          ??target_update
   \   00000014   0028               CMP         R0,#+0
   \   00000016   41D0               BEQ         ??Circle_Mode_Step_1
    825          	{	
    826              	schedule(init_velocity_on_circle, Circle);
   \   00000018   0222               MOV         R2,#+2
   \   0000001A   04B4               PUSH        {R2}
   \   0000001C   201C               MOV         R0,R4
   \   0000001E   1430               ADD         R0,#+20
   \   00000020   03C8               LDMIA       R0!,{R0,R1}
   \   00000022   ........           _BLF        __doubleToLong,??__doubleToLong??rT
   \   00000026   011C               MOV         R1,R0
   \   00000028   04BC               POP         {R2}
   \   0000002A   301C               MOV         R0,R6
   \   0000002C   ........           BL          ??schedule
   \   00000030   201C               MOV         R0,R4
   \   00000032   1430               ADD         R0,#+20
   \   00000034   03C8               LDMIA       R0!,{R0,R1}
   \   00000036   021C               MOV         R2,R0
   \   00000038   0B1C               MOV         R3,R1
   \   0000003A   0020               MOV         R0,#+0
   \   0000003C   ....               LDR         R1,??DataTable71   ;; 0x3fe00000
   \   0000003E   ........           _BLF        __dMul,??__dMul??rT
   \   00000042   021C               MOV         R2,R0
   \   00000044   0B1C               MOV         R3,R1
   \   00000046   201C               MOV         R0,R4
   \   00000048   1430               ADD         R0,#+20
   \   0000004A   03C8               LDMIA       R0!,{R0,R1}
   \   0000004C   ........           _BLF        __dMul,??__dMul??rT
   \   00000050   0022               MOV         R2,#+0
   \   00000052   8023               MOV         R3,#+128
   \   00000054   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   00000056   ........           _BLF        __dDiv,??__dDiv??rT
   \   0000005A   0CCF               LDMIA       R7!,{R2,R3}
   \   0000005C   083F               SUB         R7,#+8
   \   0000005E   ........           _BLF        __dLess,??__dLess??rT
   \   00000062   0028               CMP         R0,#+0
   \   00000064   07D0               BEQ         ??Circle_Mode_Step_2
    827          		if (how_long[0] > 0.5*init_velocity_on_circle*init_velocity_on_circle/ACCEL)
    828               	{
    829                    	turn_heading(&end_heading);
   \   00000066   311C               MOV         R1,R6
   \   00000068   5831               ADD         R1,#+88
   \   0000006A   301C               MOV         R0,R6
   \   0000006C   ........           BL          ??turn_heading
    830                    	heli_step = 2;
   \   00000070   0220               MOV         R0,#+2
   \   00000072   2860               STR         R0,[R5, #+0]
   \   00000074   1BE0               B           ??Circle_Mode_Step_3
    831                	}
    832               	else
    833                	{
    834                    	position_t->current_target_update(hover_xyz);
   \                     ??Circle_Mode_Step_2:
   \   00000076   311C               MOV         R1,R6
   \   00000078   6831               ADD         R1,#+104
   \   0000007A   F869               LDR         R0,[R7, #+28]
   \   0000007C   ........           BL          ??current_target_update
    835                    	position_t->heading = ahrs_theta[2];
   \   00000080   ....               LDR         R2,??DataTable72   ;; ahrs_theta
   \   00000082   FB69               LDR         R3,[R7, #+28]
   \   00000084   C033               ADD         R3,#+192
   \   00000086   101C               MOV         R0,R2
   \   00000088   1030               ADD         R0,#+16
   \   0000008A   03C8               LDMIA       R0!,{R0,R1}
   \   0000008C   03C3               STMIA       R3!,{R0,R1}
    836                    	end_heading = ahrs_theta[2]; 
   \   0000008E   1032               ADD         R2,#+16
   \   00000090   03CA               LDMIA       R2!,{R0,R1}
   \   00000092   3864               STR         R0,[R7, #+64]
   \   00000094   7964               STR         R1,[R7, #+68]
    837                    	heli_step = 1;  
   \   00000096   0120               MOV         R0,#+1
   \   00000098   2860               STR         R0,[R5, #+0]
   \   0000009A   02E0               B           ??Circle_Mode_Step_4
    838                	}
    839          		
    840          	}
    841          	if (heli_step == 1)
   \                     ??Circle_Mode_Step_1:
   \   0000009C   2868               LDR         R0,[R5, #+0]
   \   0000009E   0128               CMP         R0,#+1
   \   000000A0   02D1               BNE         ??Circle_Mode_Step_5
    842          	{
    843                	hover_step();
   \                     ??Circle_Mode_Step_4:
   \   000000A2   301C               MOV         R0,R6
   \   000000A4   ........           BL          ??hover_step
    844              }
    845          	if (heli_step == 2)
   \                     ??Circle_Mode_Step_5:
   \   000000A8   2868               LDR         R0,[R5, #+0]
   \   000000AA   0228               CMP         R0,#+2
   \   000000AC   15D1               BNE         ??Circle_Mode_Step_6
    846          	{
    847                	turning_head_step();   //×ªÏò
   \                     ??Circle_Mode_Step_3:
   \   000000AE   301C               MOV         R0,R6
   \   000000B0   ........           BL          ??turning_head_step
    848          		
    849          		if(turn_accel_flag==true)
   \   000000B4   2078               LDRB        R0,[R4, #+0]
   \   000000B6   0028               CMP         R0,#+0
   \   000000B8   02D0               BEQ         ??Circle_Mode_Step_7
    850               	{
    851                 		turn_accel++;
   \   000000BA   206B               LDR         R0,[R4, #+48]
   \   000000BC   401C               ADD         R0,R0,#+1
   \   000000BE   2063               STR         R0,[R4, #+48]
    852               	}
    853          		if(turn_accel==90)//3ÃëÖ®ºó Ç°·É
   \                     ??Circle_Mode_Step_7:
   \   000000C0   206B               LDR         R0,[R4, #+48]
   \   000000C2   5A28               CMP         R0,#+90
   \   000000C4   09D1               BNE         ??Circle_Mode_Step_6
    854               	{
    855                		turn_accel=0;
   \   000000C6   0020               MOV         R0,#+0
   \   000000C8   2063               STR         R0,[R4, #+48]
    856                		turn_accel_flag=false;
   \   000000CA   2070               STRB        R0,[R4, #+0]
    857                		heli_step = 3;
   \   000000CC   0320               MOV         R0,#+3
   \   000000CE   2860               STR         R0,[R5, #+0]
    858                		position_t->current_target_update(next_target);      
   \   000000D0   311C               MOV         R1,R6
   \   000000D2   3831               ADD         R1,#+56
   \   000000D4   F869               LDR         R0,[R7, #+28]
   \   000000D6   ........           BL          ??current_target_update
    859               	}
    860          	}
    861          	if (heli_step == 3)
   \                     ??Circle_Mode_Step_6:
   \   000000DA   2868               LDR         R0,[R5, #+0]
   \   000000DC   0328               CMP         R0,#+3
   \   000000DE   11D1               BNE         ??Circle_Mode_Step_8
    862          	{
    863                	speed_up_step();        //¼ÓËÙ
   \   000000E0   301C               MOV         R0,R6
   \   000000E2   ........           BL          ??speed_up_step
    864          		if (how_long[0] <= 0.0)
   \   000000E6   03CF               LDMIA       R7!,{R0,R1}
   \   000000E8   083F               SUB         R7,#+8
   \   000000EA   0122               MOV         R2,#+1
   \   000000EC   0023               MOV         R3,#+0
   \   000000EE   ........           _BLF        __dLess,??__dLess??rT
   \   000000F2   0028               CMP         R0,#+0
   \   000000F4   06D0               BEQ         ??Circle_Mode_Step_8
    865          		{
    866                  	how_long[0] = 0.0;
   \   000000F6   0020               MOV         R0,#+0
   \   000000F8   0021               MOV         R1,#+0
   \   000000FA   03C7               STMIA       R7!,{R0,R1}
    867          			heli_step = 9;
   \   000000FC   0920               MOV         R0,#+9
   \   000000FE   2860               STR         R0,[R5, #+0]
    868          			circle_finish_flag = false;
   \   00000100   6170               STRB        R1,[R4, #+1]
   \   00000102   05E0               B           ??Circle_Mode_Step_9
    869          		}
    870          	}
    871          	if (heli_step == 9 && circle_finish_flag == false)
   \                     ??Circle_Mode_Step_8:
   \   00000104   2868               LDR         R0,[R5, #+0]
   \   00000106   0928               CMP         R0,#+9
   \   00000108   11D1               BNE         ??Circle_Mode_Step_10
   \   0000010A   6078               LDRB        R0,[R4, #+1]
   \   0000010C   0028               CMP         R0,#+0
   \   0000010E   13D1               BNE         ??Circle_Mode_Step_11
    872          	{
    873          		circle_turn = 1;
   \                     ??Circle_Mode_Step_9:
   \   00000110   0120               MOV         R0,#+1
   \   00000112   6865               STR         R0,[R5, #+84]
    874          		//circle_step(5.0, 25, 0.0, 15*PI);//ÅÌÐýby wybb
    875          		circle_step(5.0, 25, 0.0, 1*PI);//ÅÌÐýby wybb
   \   00000114   ....               LDR         R0,??DataTable73   ;; 0x53c8d4f1
   \   00000116   ....               LDR         R1,??DataTable74   ;; 0x400921fb
   \   00000118   03B4               PUSH        {R0,R1}
   \   0000011A   0020               MOV         R0,#+0
   \   0000011C   0021               MOV         R1,#+0
   \   0000011E   03B4               PUSH        {R0,R1}
   \   00000120   1923               MOV         R3,#+25
   \   00000122   064A               LDR         R2,??Circle_Mode_Step_12  ;; 0x40140000
   \   00000124   301C               MOV         R0,R6
   \   00000126   ........           BL          ??circle_step
    876          		return;
   \   0000012A   04B0               ADD         SP,#+16
   \   0000012C   04E0               B           ??Circle_Mode_Step_11
    877          	}
    878              if (heli_step == 8)
   \                     ??Circle_Mode_Step_10:
   \   0000012E   0828               CMP         R0,#+8
   \   00000130   02D1               BNE         ??Circle_Mode_Step_11
    879          	{	
    880          		brake_down_step();
   \   00000132   301C               MOV         R0,R6
   \   00000134   ........           BL          ??brake_down_step
   \                     ??Circle_Mode_Step_11:
   \   00000138   ....               B           ??Subroutine26_0
   \   0000013A   C046               NOP         
   \                     ??Circle_Mode_Step_12:
   \   0000013C   00001440           DC32        0x40140000
    881          	}
    882          }
    883          

   \                                 In segment CODE, align 4, keep-with-next
    884          void Trajectory::Mixture_Mode_Step()
    885          {
   \                     ??Mixture_Mode_Step:
   \   00000000   F0B5               PUSH        {R4-R7,LR}
   \   00000002   071C               MOV         R7,R0
    886          	if (target_update(Mixture))
   \   00000004   051C               MOV         R5,R0
   \   00000006   E035               ADD         R5,#+224
   \   00000008   061C               MOV         R6,R0
   \   0000000A   1836               ADD         R6,#+24
   \   0000000C   ....               LDR         R4,??DataTable75   ;; turn_accel_flag
   \   0000000E   0321               MOV         R1,#+3
   \   00000010   ........           BL          ??target_update
   \   00000014   0028               CMP         R0,#+0
   \   00000016   ....               BNE         .+5
   \   00000018   80E0               B           ??Mixture_Mode_Step_1
    887          	{	
    888              	schedule(init_velocity_on_circle, Mixture);
   \   0000001A   0322               MOV         R2,#+3
   \   0000001C   04B4               PUSH        {R2}
   \   0000001E   201C               MOV         R0,R4
   \   00000020   1430               ADD         R0,#+20
   \   00000022   03C8               LDMIA       R0!,{R0,R1}
   \   00000024   ........           _BLF        __doubleToLong,??__doubleToLong??rT
   \   00000028   011C               MOV         R1,R0
   \   0000002A   04BC               POP         {R2}
   \   0000002C   381C               MOV         R0,R7
   \   0000002E   ........           BL          ??schedule
   \   00000032   A078               LDRB        R0,[R4, #+2]
   \   00000034   0028               CMP         R0,#+0
   \   00000036   29D0               BEQ         ??Mixture_Mode_Step_2
    889          		if (Mixture_to_Pointtopoint_flag == true)
    890          		{
    891          			Mixture_to_Pointtopoint_flag = false;
   \   00000038   0020               MOV         R0,#+0
   \   0000003A   A070               STRB        R0,[R4, #+2]
    892          			if (how_long[0] > BOUNDARY_DISTANCE)
   \   0000003C   03CE               LDMIA       R6!,{R0,R1}
   \   0000003E   083E               SUB         R6,#+8
   \   00000040   0122               MOV         R2,#+1
   \   00000042   ....               LDR         R3,??DataTable77   ;; 0x40200000
   \   00000044   ........           _BLF        __dGreaterEqual,??__dGreaterEqual??rT
   \   00000048   0028               CMP         R0,#+0
   \   0000004A   06D0               BEQ         ??Mixture_Mode_Step_3
    893               		{
    894                    	turn_heading(&end_heading);
   \   0000004C   391C               MOV         R1,R7
   \   0000004E   5831               ADD         R1,#+88
   \   00000050   381C               MOV         R0,R7
   \   00000052   ........           BL          ??turn_heading
    895                    	heli_step = 2;
   \   00000056   0220               MOV         R0,#+2
   \   00000058   2860               STR         R0,[R5, #+0]
    896                		}
    897               		if (how_long[0] <= BOUNDARY_DISTANCE)
   \                     ??Mixture_Mode_Step_3:
   \   0000005A   03CE               LDMIA       R6!,{R0,R1}
   \   0000005C   083E               SUB         R6,#+8
   \   0000005E   0122               MOV         R2,#+1
   \   00000060   ....               LDR         R3,??DataTable77   ;; 0x40200000
   \   00000062   ........           _BLF        __dLess,??__dLess??rT
   \   00000066   0028               CMP         R0,#+0
   \   00000068   0FD0               BEQ         ??Mixture_Mode_Step_4
    898                		{
    899                    	position_t->current_target_update(next_target);
   \   0000006A   3837               ADD         R7,#+56
   \   0000006C   391C               MOV         R1,R7
   \   0000006E   F069               LDR         R0,[R6, #+28]
   \   00000070   ........           BL          ??current_target_update
    900                    	position_t->heading = ahrs_theta[2];
   \   00000074   F269               LDR         R2,[R6, #+28]
   \   00000076   C032               ADD         R2,#+192
   \   00000078   ....               LDR         R0,??DataTable83   ;; ahrs_theta + 16
   \   0000007A   03C8               LDMIA       R0!,{R0,R1}
   \   0000007C   03C2               STMIA       R2!,{R0,R1}
    901                    	end_heading = ahrs_theta[2]; 
   \   0000007E   4036               ADD         R6,#+64
   \   00000080   ....               LDR         R0,??DataTable83   ;; ahrs_theta + 16
   \   00000082   03C8               LDMIA       R0!,{R0,R1}
   \   00000084   03C6               STMIA       R6!,{R0,R1}
    902                    	heli_step = 1;  
   \   00000086   0120               MOV         R0,#+1
   \   00000088   2860               STR         R0,[R5, #+0]
   \                     ??Mixture_Mode_Step_4:
   \   0000008A   9AE0               B           ??Mixture_Mode_Step_5
    903                		}
    904          			return;
    905          		}
    906          		if (circle_finish_flag == true)
   \                     ??Mixture_Mode_Step_2:
   \   0000008C   6078               LDRB        R0,[R4, #+1]
   \   0000008E   0028               CMP         R0,#+0
   \   00000090   0DD0               BEQ         ??Mixture_Mode_Step_6
    907          		{
    908          			circle_finish_flag = false;
   \   00000092   0020               MOV         R0,#+0
   \   00000094   6070               STRB        R0,[R4, #+1]
    909          			position_t->current_target_update(next_target);
   \   00000096   391C               MOV         R1,R7
   \   00000098   3831               ADD         R1,#+56
   \   0000009A   F069               LDR         R0,[R6, #+28]
   \   0000009C   ........           BL          ??current_target_update
    910          			position_t->heading = ahrs_theta[2];
   \   000000A0   F269               LDR         R2,[R6, #+28]
   \   000000A2   C032               ADD         R2,#+192
   \   000000A4   ....               LDR         R0,??DataTable83   ;; ahrs_theta + 16
   \   000000A6   03C8               LDMIA       R0!,{R0,R1}
   \   000000A8   03C2               STMIA       R2!,{R0,R1}
    911          			heli_step = 3;
   \   000000AA   0320               MOV         R0,#+3
   \   000000AC   2860               STR         R0,[R5, #+0]
   \                     ??Mixture_Mode_Step_6:
   \   000000AE   201C               MOV         R0,R4
   \   000000B0   1430               ADD         R0,#+20
   \   000000B2   03C8               LDMIA       R0!,{R0,R1}
   \   000000B4   021C               MOV         R2,R0
   \   000000B6   0B1C               MOV         R3,R1
   \   000000B8   0020               MOV         R0,#+0
   \   000000BA   ....               LDR         R1,??DataTable81   ;; 0x3fe00000
   \   000000BC   ........           _BLF        __dMul,??__dMul??rT
   \   000000C0   021C               MOV         R2,R0
   \   000000C2   0B1C               MOV         R3,R1
   \   000000C4   201C               MOV         R0,R4
   \   000000C6   1430               ADD         R0,#+20
   \   000000C8   03C8               LDMIA       R0!,{R0,R1}
   \   000000CA   ........           _BLF        __dMul,??__dMul??rT
   \   000000CE   0022               MOV         R2,#+0
   \   000000D0   8023               MOV         R3,#+128
   \   000000D2   DB05               LSL         R3,R3,#+23         ;; #+1073741824
   \   000000D4   ........           _BLF        __dDiv,??__dDiv??rT
   \   000000D8   0CCE               LDMIA       R6!,{R2,R3}
   \   000000DA   083E               SUB         R6,#+8
   \   000000DC   ........           _BLF        __dLess,??__dLess??rT
   \   000000E0   0028               CMP         R0,#+0
   \   000000E2   0AD0               BEQ         ??Mixture_Mode_Step_7
   \   000000E4   6078               LDRB        R0,[R4, #+1]
   \   000000E6   0028               CMP         R0,#+0
   \   000000E8   07D1               BNE         ??Mixture_Mode_Step_7
    912          		}
    913          		if (how_long[0] > 0.5*init_velocity_on_circle*init_velocity_on_circle/ACCEL
    914          			&& circle_finish_flag == false)
    915               	{
    916                    	turn_heading(&end_heading);
   \   000000EA   391C               MOV         R1,R7
   \   000000EC   5831               ADD         R1,#+88
   \   000000EE   381C               MOV         R0,R7
   \   000000F0   ........           BL          ??turn_heading
    917                    	heli_step = 2;
   \   000000F4   0220               MOV         R0,#+2
   \   000000F6   2860               STR         R0,[R5, #+0]
   \   000000F8   19E0               B           ??Mixture_Mode_Step_8
    918                	}
    919               	else
    920                	{
    921                    	position_t->current_target_update(hover_xyz);
   \                     ??Mixture_Mode_Step_7:
   \   000000FA   391C               MOV         R1,R7
   \   000000FC   6831               ADD         R1,#+104
   \   000000FE   F069               LDR         R0,[R6, #+28]
   \   00000100   ........           BL          ??current_target_update
    922                    	position_t->heading = ahrs_theta[2];
   \   00000104   F269               LDR         R2,[R6, #+28]
   \   00000106   C032               ADD         R2,#+192
   \   00000108   ....               LDR         R0,??DataTable83   ;; ahrs_theta + 16
   \   0000010A   03C8               LDMIA       R0!,{R0,R1}
   \   0000010C   03C2               STMIA       R2!,{R0,R1}
    923                    	end_heading = ahrs_theta[2]; 
   \   0000010E   ....               LDR         R0,??DataTable83   ;; ahrs_theta + 16
   \   00000110   03C8               LDMIA       R0!,{R0,R1}
   \   00000112   3064               STR         R0,[R6, #+64]
   \   00000114   7164               STR         R1,[R6, #+68]
    924                    	heli_step = 1;  
   \   00000116   0120               MOV         R0,#+1
   \   00000118   2860               STR         R0,[R5, #+0]
   \   0000011A   02E0               B           ??Mixture_Mode_Step_9
    925                	}
    926          	}
    927          	if (heli_step == 1)
   \                     ??Mixture_Mode_Step_1:
   \   0000011C   2868               LDR         R0,[R5, #+0]
   \   0000011E   0128               CMP         R0,#+1
   \   00000120   02D1               BNE         ??Mixture_Mode_Step_10
    928          	{
    929                	hover_step();
   \                     ??Mixture_Mode_Step_9:
   \   00000122   381C               MOV         R0,R7
   \   00000124   ........           BL          ??hover_step
    930              }
    931          	if (heli_step == 2)
   \                     ??Mixture_Mode_Step_10:
   \   00000128   2868               LDR         R0,[R5, #+0]
   \   0000012A   0228               CMP         R0,#+2
   \   0000012C   15D1               BNE         ??Mixture_Mode_Step_11
    932          	{
    933                	turning_head_step();   //×ªÏò
   \                     ??Mixture_Mode_Step_8:
   \   0000012E   381C               MOV         R0,R7
   \   00000130   ........           BL          ??turning_head_step
    934          		
    935          		if(turn_accel_flag==true)
   \   00000134   2078               LDRB        R0,[R4, #+0]
   \   00000136   0028               CMP         R0,#+0
   \   00000138   02D0               BEQ         ??Mixture_Mode_Step_12
    936               	{
    937                 		turn_accel++;
   \   0000013A   206B               LDR         R0,[R4, #+48]
   \   0000013C   401C               ADD         R0,R0,#+1
   \   0000013E   2063               STR         R0,[R4, #+48]
    938               	}
    939          		if(turn_accel==90)//3ÃëÖ®ºó Ç°·É
   \                     ??Mixture_Mode_Step_12:
   \   00000140   206B               LDR         R0,[R4, #+48]
   \   00000142   5A28               CMP         R0,#+90
   \   00000144   09D1               BNE         ??Mixture_Mode_Step_11
    940               	{
    941                		turn_accel=0;
   \   00000146   0020               MOV         R0,#+0
   \   00000148   2063               STR         R0,[R4, #+48]
    942                		turn_accel_flag=false;
   \   0000014A   2070               STRB        R0,[R4, #+0]
    943                		heli_step = 3;
   \   0000014C   0320               MOV         R0,#+3
   \   0000014E   2860               STR         R0,[R5, #+0]
    944                		position_t->current_target_update(next_target);      
   \   00000150   391C               MOV         R1,R7
   \   00000152   3831               ADD         R1,#+56
   \   00000154   F069               LDR         R0,[R6, #+28]
   \   00000156   ........           BL          ??current_target_update
    945               	}
    946          	}
    947          	if (heli_step == 3)
   \                     ??Mixture_Mode_Step_11:
   \   0000015A   2868               LDR         R0,[R5, #+0]
   \   0000015C   0328               CMP         R0,#+3
   \   0000015E   10D1               BNE         ??Mixture_Mode_Step_13
    948          	{
    949                	speed_up_step();        //¼ÓËÙ
   \   00000160   381C               MOV         R0,R7
   \   00000162   ........           BL          ??speed_up_step
    950          		if (how_long[0] <= 0.0)
   \   00000166   03CE               LDMIA       R6!,{R0,R1}
   \   00000168   083E               SUB         R6,#+8
   \   0000016A   0122               MOV         R2,#+1
   \   0000016C   0023               MOV         R3,#+0
   \   0000016E   ........           _BLF        __dLess,??__dLess??rT
   \   00000172   0028               CMP         R0,#+0
   \   00000174   05D0               BEQ         ??Mixture_Mode_Step_13
    951          		{
    952                  	how_long[0] = 0.0;
   \   00000176   0020               MOV         R0,#+0
   \   00000178   0021               MOV         R1,#+0
   \   0000017A   03C6               STMIA       R6!,{R0,R1}
    953          			heli_step = 9;
   \   0000017C   0920               MOV         R0,#+9
   \   0000017E   2860               STR         R0,[R5, #+0]
   \   00000180   02E0               B           ??Mixture_Mode_Step_14
    954          		}
    955          	}
    956          	if (heli_step == 9 && circle_finish_flag == false)
   \                     ??Mixture_Mode_Step_13:
   \   00000182   2868               LDR         R0,[R5, #+0]
   \   00000184   0928               CMP         R0,#+9
   \   00000186   17D1               BNE         ??Mixture_Mode_Step_15
   \                     ??Mixture_Mode_Step_14:
   \   00000188   6078               LDRB        R0,[R4, #+1]
   \   0000018A   0028               CMP         R0,#+0
   \   0000018C   19D1               BNE         ??Mixture_Mode_Step_5
    957          	{
    958          		circle_step(circle_velocity, circle_radius, helix_velocity, sector_angle); //ÅÌÐýby wybb	
   \   0000018E   281C               MOV         R0,R5
   \   00000190   1430               ADD         R0,#+20
   \   00000192   03C8               LDMIA       R0!,{R0,R1}
   \   00000194   03B4               PUSH        {R0,R1}
   \   00000196   281C               MOV         R0,R5
   \   00000198   2430               ADD         R0,#+36
   \   0000019A   03C8               LDMIA       R0!,{R0,R1}
   \   0000019C   03B4               PUSH        {R0,R1}
   \   0000019E   281C               MOV         R0,R5
   \   000001A0   2C30               ADD         R0,#+44
   \   000001A2   03C8               LDMIA       R0!,{R0,R1}
   \   000001A4   ........           _BLF        __doubleToLong,??__doubleToLong??rT
   \   000001A8   031C               MOV         R3,R0
   \   000001AA   1C35               ADD         R5,#+28
   \   000001AC   06CD               LDMIA       R5!,{R1,R2}
   \   000001AE   381C               MOV         R0,R7
   \   000001B0   ........           BL          ??circle_step
    959          		return;
   \   000001B4   04B0               ADD         SP,#+16
   \   000001B6   04E0               B           ??Mixture_Mode_Step_5
    960          	}
    961              if (heli_step == 8)
   \                     ??Mixture_Mode_Step_15:
   \   000001B8   0828               CMP         R0,#+8
   \   000001BA   02D1               BNE         ??Mixture_Mode_Step_5
    962          	{	
    963          		brake_down_step();
   \   000001BC   381C               MOV         R0,R7
   \   000001BE   ........           BL          ??brake_down_step
   \                     ??Mixture_Mode_Step_5:
   \   000001C2   ........           BL          ??Subroutine26_0
    964          	}
    965          }
    966          

   \                                 In segment CODE, align 4, keep-with-next
    967          void Trajectory::Test_Mode_Step()
    968          {
   \                     ??Test_Mode_Step:
   \   00000000   70B5               PUSH        {R4-R6,LR}
    969          	if (heli_step == 1)
   \   00000002   041C               MOV         R4,R0
   \   00000004   C834               ADD         R4,#+200
   \   00000006   A169               LDR         R1,[R4, #+24]
   \   00000008   0129               CMP         R1,#+1
   \   0000000A   21D1               BNE         ??Test_Mode_Step_1
    970          	{
    971          		hover_step();	
   \   0000000C   ........           BL          ??hover_step
    972          		if (num == 300)
   \   00000010   ....               LDR         R0,??DataTable84   ;; num
   \   00000012   0568               LDR         R5,[R0, #+0]
   \   00000014   0F4A               LDR         R2,??Test_Mode_Step_2  ;; 0x1eb851ec
   \   00000016   104B               LDR         R3,??Test_Mode_Step_2+0x4  ;; 0xbfa1eb85
   \   00000018   9620               MOV         R0,#+150
   \   0000001A   4000               LSL         R0,R0,#+1          ;; #+300
   \   0000001C   8542               CMP         R5,R0
   \   0000001E   04D1               BNE         ??Test_Mode_Step_3
    973              	{
    974              		com_theta[0]  = 0.035;//roll
   \   00000020   101C               MOV         R0,R2
   \   00000022   0E49               LDR         R1,??Test_Mode_Step_2+0x8  ;; 0x3fa1eb85
   \   00000024   03C4               STMIA       R4!,{R0,R1}
    975                  	com_theta[1]  = -0.035;//pitch
   \   00000026   0CC4               STMIA       R4!,{R2,R3}
   \   00000028   12E0               B           ??Test_Mode_Step_1
    976              	}
    977              	if (num == 330)
   \                     ??Test_Mode_Step_3:
   \   0000002A   0020               MOV         R0,#+0
   \   0000002C   0021               MOV         R1,#+0
   \   0000002E   A526               MOV         R6,#+165
   \   00000030   7600               LSL         R6,R6,#+1          ;; #+330
   \   00000032   B542               CMP         R5,R6
   \   00000034   0AD0               BEQ         ??Test_Mode_Step_4
    978              	{
    979                		com_theta[0]  = 0;
    980                		com_theta[1]  = 0;
    981              	}
    982              	if (num == 630)
   \   00000036   0A4E               LDR         R6,??Test_Mode_Step_2+0xC  ;; 0x276
   \   00000038   B542               CMP         R5,R6
   \   0000003A   03D1               BNE         ??Test_Mode_Step_5
    983              	{
    984                		com_theta[0]  = -0.035;//roll
   \   0000003C   0CC4               STMIA       R4!,{R2,R3}
    985                		com_theta[1]  = 0.035;//pitch
   \   0000003E   101C               MOV         R0,R2
   \   00000040   0649               LDR         R1,??Test_Mode_Step_2+0x8  ;; 0x3fa1eb85
   \   00000042   04E0               B           ??Test_Mode_Step_6
    986              	}
    987              	if (num == 660)
   \                     ??Test_Mode_Step_5:
   \   00000044   A522               MOV         R2,#+165
   \   00000046   9200               LSL         R2,R2,#+2          ;; #+660
   \   00000048   9542               CMP         R5,R2
   \   0000004A   01D1               BNE         ??Test_Mode_Step_1
    988              	{
    989                		com_theta[0]  = 0;
   \                     ??Test_Mode_Step_4:
   \   0000004C   03C4               STMIA       R4!,{R0,R1}
    990                		com_theta[1]  = 0;
   \                     ??Test_Mode_Step_6:
   \   0000004E   03C4               STMIA       R4!,{R0,R1}
    991              	}
    992          	}
    993          
    994          }
   \                     ??Test_Mode_Step_1:
   \   00000050   ........           BL          ?Subroutine27
   \                     ??Test_Mode_Step_2:
   \   00000054   EC51B81E           DC32        0x1eb851ec
   \   00000058   85EBA1BF           DC32        0xbfa1eb85
   \   0000005C   85EBA13F           DC32        0x3fa1eb85
   \   00000060   76020000           DC32        0x276

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32        ahrs_theta + 16

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   0040CF40           DC32        0x40cf4000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   ........           DC32        num

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   00207C40           DC32        0x407c2000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable6:
   \   00000000   192D4454           DC32        0x54442d19

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   182D4454           DC32        0x54442d18

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable11:
   \   00000000   FB210940           DC32        0x400921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   FB2109C0           DC32        0xc00921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable13:
   \   00000000   F1D4C853           DC32        0x53c8d4f1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable14:
   \   00000000   FB210940           DC32        0x400921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable15:
   \   00000000   ........           DC32        ahrs_theta

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable17:
   \   00000000   ........           DC32        turn_accel_flag + 1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable18:
   \   00000000   0000E03F           DC32        0x3fe00000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable19:
   \   00000000   ........           DC32        num

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable20:
   \   00000000   10270000           DC32        0x2710

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable21:
   \   00000000   ........           DC32        turn_accel_flag

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable23:
   \   00000000   FB2109C0           DC32        0xc00921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable25:
   \   00000000   FB211940           DC32        0x401921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable26:
   \   00000000   192D4454           DC32        0x54442d19

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   FB210940           DC32        0x400921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   182D4454           DC32        0x54442d18

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable29:
   \   00000000   FB2119C0           DC32        0xc01921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable40:
   \   00000000   00207C40           DC32        0x407c2000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable42:
   \   00000000   A110B1BF           DC32        0xbfb110a1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable43:
   \   00000000   ........           DC32        ahrs_theta + 16

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable44:
   \   00000000   548CF337           DC32        0x37f38c54

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable45:
   \   00000000   A110A13F           DC32        0x3fa110a1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable46:
   \   00000000   ........           DC32        ahrs_theta

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable49:
   \   00000000   ........           DC32        turn_accel_flag + 1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable52:
   \   00000000   FB210940           DC32        0x400921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable54:
   \   00000000   FB2119C0           DC32        0xc01921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable58:
   \   00000000   FB2109C0           DC32        0xc00921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable59:
   \   00000000   F1D4C853           DC32        0x53c8d4f1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable60:
   \   00000000   FB211940           DC32        0x401921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable61:
   \   00000000   548CF337           DC32        0x37f38c54

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable62:
   \   00000000   A110A13F           DC32        0x3fa110a1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable63:
   \   00000000   10270000           DC32        0x2710

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable64:
   \   00000000   0040CF40           DC32        0x40cf4000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable66:
   \   00000000   00002040           DC32        0x40200000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable70:
   \   00000000   ........           DC32        turn_accel_flag

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable71:
   \   00000000   0000E03F           DC32        0x3fe00000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable72:
   \   00000000   ........           DC32        ahrs_theta

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable73:
   \   00000000   F1D4C853           DC32        0x53c8d4f1

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable74:
   \   00000000   FB210940           DC32        0x400921fb

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable75:
   \   00000000   ........           DC32        turn_accel_flag

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable77:
   \   00000000   00002040           DC32        0x40200000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable81:
   \   00000000   0000E03F           DC32        0x3fe00000

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable83:
   \   00000000   ........           DC32        ahrs_theta + 16

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable84:
   \   00000000   ........           DC32        num

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for turn_accel_flag>`:
   \   00000000   00                 DC8 0
   \                     `?<Initializer for circle_finish_flag>`:
   \   00000001   00                 DC8 0
   \                     `?<Initializer for Mixture_to_Pointtopoint_flag`:
   \   00000002   00                 DC8 0
   \   00000003   00                 DC8 0
   \                     `?<Initializer for init_position>`:
   \   00000004   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for init_velocity_on_circle>`:
   \   00000014   000000000000       DC32 0H, 40140000H
   \              1440        
   \                     `?<Initializer for init_theta>`:
   \   0000001C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for circle_angle>`:
   \   00000024   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for first_entry_circle>`:
   \   0000002C   01000000           DC32 1
   \                     `?<Initializer for turn_accel>`:
   \   00000030   00000000           DC32 0
    995          

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     Position::current_target_update(double *)
                                       12
     Position::reset()                 12
     Trajectory::Circle_Mode_Step()    36
     Trajectory::Hover_Mode_Step()      8
     Trajectory::Mixture_Mode_Step()
                                       36
     Trajectory::Point_to_point_Mode_Step()
                                       16
     Trajectory::Test_Mode_Step()      16
     Trajectory::brake_down_step()     24
     Trajectory::circle_step(double, int, double, double)
                                       48
     Trajectory::climbing_step()       20
     Trajectory::distance_calculate(int)
                                       68
     Trajectory::hover_step()          20
     Trajectory::reset()               28
     Trajectory::schedule(int, int)    16
     Trajectory::speed_calculate(int, int)
                                       52
     Trajectory::speed_down_step()     20
     Trajectory::speed_up_step()       20
     Trajectory::step(int)              4
     Trajectory::target_update(int)    20
     Trajectory::turn_heading(double *)
                                       28
     Trajectory::turning_head_step()
                                       16
     ahrs_adjust(double *, double *)
                                       24
     pow(double, int)                  40


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     pow(double, int)                116
     num                               4
     Position::reset()                36
     ?Subroutine22                     6
     Position::current_target_update(double *)
                                      28
     Trajectory::reset()             136
     ?Subroutine23                    32
     ahrs_adjust(double *, double *)
                                      72
     ?Subroutine24                     6
     Trajectory::target_update(int)  372
     ?Subroutine25                     6
     Trajectory::turn_heading(double *)
                                     252
     Trajectory::distance_calculate(int)
                                    1020
     ?Subroutine26                    16
     Trajectory::speed_calculate(int, int)
                                     400
     Trajectory::schedule(int, int)   26
     ?Subroutine27                    36
     Trajectory::hover_step()        120
     Trajectory::turning_head_step()
                                     168
     Trajectory::speed_up_step()     104
     Trajectory::speed_down_step()   100
     Trajectory::brake_down_step()   124
     Trajectory::climbing_step()     136
     Trajectory::circle_step(double, int, double, double)
                                     736
     turn_accel_flag                  52
     Trajectory::step(int)            56
     Trajectory::Hover_Mode_Step()    48
     Trajectory::Point_to_point_Mode_Step()
                                     296
     Trajectory::Circle_Mode_Step()  320
     Trajectory::Mixture_Mode_Step()
                                     454
     Trajectory::Test_Mode_Step()    100
     ??DataTable1                      4
     ??DataTable2                      4
     ??DataTable3                      4
     ??DataTable4                      4
     ??DataTable6                      4
     ??DataTable10                     4
     ??DataTable11                     4
     ??DataTable12                     4
     ??DataTable13                     4
     ??DataTable14                     4
     ??DataTable15                     4
     ??DataTable17                     4
     ??DataTable18                     4
     ??DataTable19                     4
     ??DataTable20                     4
     ??DataTable21                     4
     ??DataTable23                     4
     ??DataTable25                     4
     ??DataTable26                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable29                     4
     ??DataTable40                     4
     ??DataTable42                     4
     ??DataTable43                     4
     ??DataTable44                     4
     ??DataTable45                     4
     ??DataTable46                     4
     ??DataTable49                     4
     ??DataTable52                     4
     ??DataTable54                     4
     ??DataTable58                     4
     ??DataTable59                     4
     ??DataTable60                     4
     ??DataTable61                     4
     ??DataTable62                     4
     ??DataTable63                     4
     ??DataTable64                     4
     ??DataTable66                     4
     ??DataTable70                     4
     ??DataTable71                     4
     ??DataTable72                     4
     ??DataTable73                     4
     ??DataTable74                     4
     ??DataTable75                     4
     ??DataTable77                     4
     ??DataTable81                     4
     ??DataTable83                     4
     ??DataTable84                     4
     ?<Initializer for turn_accel_flag>
                                      52
      Others                         408

 
 5 902 bytes in segment CODE
    52 bytes in segment DATA_I
    52 bytes in segment DATA_ID
     4 bytes in segment DATA_Z
    24 bytes in segment INITTAB
 
 5 402 bytes of CODE  memory (+ 524 bytes shared)
    52 bytes of CONST memory
    56 bytes of DATA  memory

Errors: none
Warnings: none
